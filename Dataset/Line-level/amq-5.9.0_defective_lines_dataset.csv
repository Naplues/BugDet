File,Line_number,SRC
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,38,import javax.jms.IllegalStateException;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,166,PooledSession result;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,167,result = (PooledSession) pool.createSession(transacted, ackMode);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,63,private Session session;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,73,this.session = session;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,135,if (session != null) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,137,session.close();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,270,if (session instanceof XASession) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,284,session.run();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,387,if (session == null) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,388,throw new IllegalStateException("The session has already been closed");
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,390,return session;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,443,return "PooledSession { " + session + " }";
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,19,import java.io.StringReader;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,25,import javax.xml.xpath.XPathExpressionException;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,28,import org.apache.activemq.command.Message;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,29,import org.apache.activemq.util.ByteArrayInputStream;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,30,import org.xml.sax.InputSource;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,37,public JAXPXPathEvaluator(String xpathExpression) {
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,38,try {
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,39,XPath xpath = FACTORY.newXPath();
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,40,expression = xpath.compile(xpathExpression);
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,42,throw new RuntimeException("Invalid XPath expression: " + xpathExpression);
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,62,return ((Boolean)expression.evaluate(inputSource, XPathConstants.BOOLEAN)).booleanValue();
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,71,return ((Boolean)expression.evaluate(inputSource, XPathConstants.BOOLEAN)).booleanValue();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,20,import java.io.StringReader;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,32,import org.apache.activemq.command.Message;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,33,import org.apache.activemq.util.ByteArrayInputStream;
activemq-client/src/main/java/org/apache/activemq/filter/XPathExpression.java,78,return c.getConstructor(new Class[] {String.class});
activemq-client/src/main/java/org/apache/activemq/filter/XPathExpression.java,83,return (XPathEvaluator)EVALUATOR_CONSTRUCTOR.newInstance(new Object[] {xpath});
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/ReplicatedLevelDBStoreViewMBean.java,37,String getZkSessionTmeout();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,22,import java.io.FilterOutputStream;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,27,import java.util.zip.DeflaterOutputStream;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,28,import java.util.zip.InflaterInputStream;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,131,if (compressed) {
activemq-karaf/src/main/java/org/apache/activemq/karaf/commands/ActiveMQCommandSupport.java,45,arguments.add(0, "--jmxlocal");
activemq-broker/src/main/java/org/apache/activemq/store/SharedFileLocker.java,55,locked = true;
activemq-broker/src/main/java/org/apache/activemq/network/LdapNetworkConnector.java,213,env.put(Context.SECURITY_PRINCIPAL, user);
activemq-broker/src/main/java/org/apache/activemq/network/LdapNetworkConnector.java,214,env.put(Context.SECURITY_CREDENTIALS, password);
activemq-broker/src/main/java/org/apache/activemq/security/LDAPAuthorizationMap.java,472,if (connectionUsername != null || !"".equals(connectionUsername)) {
activemq-broker/src/main/java/org/apache/activemq/security/LDAPAuthorizationMap.java,475,if (connectionPassword != null || !"".equals(connectionPassword)) {
activemq-broker/src/main/java/org/apache/activemq/security/SimpleCachedLDAPAuthorizationMap.java,126,if (connectionUsername != null || !"".equals(connectionUsername)) {
activemq-broker/src/main/java/org/apache/activemq/security/SimpleCachedLDAPAuthorizationMap.java,129,if (connectionPassword != null || !"".equals(connectionPassword)) {
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,191,username
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,290,doRFC2254Encoding(dn), username
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,22,import java.util.Queue;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,25,import java.util.concurrent.ConcurrentLinkedQueue;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,74,protected final Queue<ConsumerInfo> consumers = new ConcurrentLinkedQueue<ConsumerInfo>();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,107,consumers.offer(info);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,153,ConsumerInfo value = iter.next();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,154,ActiveMQTopic topic = AdvisorySupport.getConsumerAdvisoryTopic(value.getDestination());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,270,consumers.remove(info);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,596,public Queue<ConsumerInfo> getAdvisoryConsumers() {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,597,return consumers;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,78,protected IdGenerator idGenerator;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,350,idGenerator = new IdGenerator();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,401,if (localBridgeStarted.compareAndSet(false, true)) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,486,if (remoteBridgeStarted.compareAndSet(false, true)) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,762,for (Iterator i = subscriptionMapByLocalId.values().iterator(); i.hasNext(); ) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,763,DemandSubscription ds = (DemandSubscription) i.next();
activemq-client/src/main/java/org/apache/activemq/filter/LogicExpression.java,48,return rv == null ? null : rv;
activemq-client/src/main/java/org/apache/activemq/filter/LogicExpression.java,65,if (lv == null) {
activemq-client/src/main/java/org/apache/activemq/filter/LogicExpression.java,66,return null;
activemq-client/src/main/java/org/apache/activemq/filter/LogicExpression.java,68,if (!lv.booleanValue()) {
activemq-client/src/main/java/org/apache/activemq/filter/LogicExpression.java,73,return rv == null ? null : rv;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMessage.java,398,Integer rc = (Integer) TypeConversionSupport.convert(value, Integer.class);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMessage.java,404,else {
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,27,import org.slf4j.Logger;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,28,import org.slf4j.LoggerFactory;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,30,import java.io.FileInputStream;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,31,import java.io.InputStream;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,32,import java.net.URI;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,33,import java.security.KeyStore;
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,37,public HttpsClientTransport(TextWireFormat wireFormat, URI remoteUrl) {
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,38,super(wireFormat, remoteUrl);
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,53,SSLSocketFactory sslSocketFactory =
activemq-http/src/main/java/org/apache/activemq/transport/https/HttpsClientTransport.java,54,new SSLSocketFactory((javax.net.ssl.SSLSocketFactory) javax.net.ssl.SSLSocketFactory.getDefault(),
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,55,public class JmsFrameTranslator extends LegacyFrameTranslator implements
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,56,BrokerContextAware {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,62,public ActiveMQMessage convertFrame(ProtocolConverter converter,
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,63,StompFrame command) throws JMSException, ProtocolException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,66,String transformation = headers.get(Stomp.Headers.TRANSFORMATION);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,67,if (headers.containsKey(Stomp.Headers.CONTENT_LENGTH) || transformation.equals(Stomp.Transformations.JMS_BYTE.toString())) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,74,switch (Stomp.Transformations.getValue(transformation)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,75,case JMS_OBJECT_XML:
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,76,in = new XppReader(new StringReader(text), XppFactory.createDefaultParser());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,77,msg = createObjectMessage(in);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,78,break;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,79,case JMS_OBJECT_JSON:
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,80,in = new JettisonMappedXmlDriver().createReader(new StringReader(text));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,81,msg = createObjectMessage(in);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,82,break;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,83,case JMS_MAP_XML:
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,84,in = new XppReader(new StringReader(text), XppFactory.createDefaultParser());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,85,msg = createMapMessage(in);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,86,break;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,87,case JMS_MAP_JSON:
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,88,in = new JettisonMappedXmlDriver().createReader(new StringReader(text));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,89,msg = createMapMessage(in);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,90,break;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,91,default:
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,92,throw new Exception("Unkown transformation: " + transformation);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,95,command.getHeaders().put(Stomp.Headers.TRANSFORMATION_ERROR, e.getMessage());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,99,FrameTranslator.Helper.copyStandardHeadersFromFrameToMessage(converter, command, msg, this);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,104,public StompFrame convertMessage(ProtocolConverter converter,
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,105,ActiveMQMessage message) throws IOException, JMSException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,108,StompFrame command = new StompFrame();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,109,command.setAction(Stomp.Responses.MESSAGE);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,110,Map<String, String> headers = new HashMap<String, String>(25);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,111,command.setHeaders(headers);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,113,FrameTranslator.Helper.copyStandardHeadersFromMessageToFrame(
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,114,converter, message, command, this);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,116,if (headers.get(Stomp.Headers.TRANSFORMATION).equals(Stomp.Transformations.JMS_XML.toString())) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,117,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_OBJECT_XML.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,119,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_OBJECT_JSON.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,123,command.setContent(marshall(msg.getObject(),
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,125,.getBytes("UTF-8"));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,126,return command;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,129,StompFrame command = new StompFrame();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,130,command.setAction(Stomp.Responses.MESSAGE);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,131,Map<String, String> headers = new HashMap<String, String>(25);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,132,command.setHeaders(headers);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,134,FrameTranslator.Helper.copyStandardHeadersFromMessageToFrame(
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,135,converter, message, command, this);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,137,if (headers.get(Stomp.Headers.TRANSFORMATION).equals(Stomp.Transformations.JMS_XML.toString())) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,138,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_MAP_XML.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,140,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_MAP_JSON.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,144,command.setContent(marshall((Serializable)msg.getContentMap(),
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,145,headers.get(Stomp.Headers.TRANSFORMATION)).getBytes("UTF-8"));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,146,return command;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,148,AdvisorySupport.ADIVSORY_MESSAGE_TYPE.equals(message.getType())) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,150,StompFrame command = new StompFrame();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,151,command.setAction(Stomp.Responses.MESSAGE);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,152,Map<String, String> headers = new HashMap<String, String>(25);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,153,command.setHeaders(headers);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,155,FrameTranslator.Helper.copyStandardHeadersFromMessageToFrame(
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,156,converter, message, command, this);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,158,if (!headers.containsKey(Stomp.Headers.TRANSFORMATION)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,159,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_ADVISORY_JSON.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,162,if (headers.get(Stomp.Headers.TRANSFORMATION).equals(Stomp.Transformations.JMS_XML.toString())) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,163,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_ADVISORY_XML.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,165,headers.put(Stomp.Headers.TRANSFORMATION, Stomp.Transformations.JMS_ADVISORY_JSON.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,168,String body = marshallAdvisory(message.getDataStructure(),
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,169,headers.get(Stomp.Headers.TRANSFORMATION));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,171,return command;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,173,return super.convertMessage(converter, message);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,202,Map<String, Object> map = (Map<String, Object>)getXStream().unmarshal(in);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,285,public  BrokerContext getBrokerContext() {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,181,return findTranslator(header, null);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,184,protected FrameTranslator findTranslator(String header, ActiveMQDestination destination) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,188,translator = (FrameTranslator) FRAME_TRANSLATOR_FINDER
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,189,.newInstance(header);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,191,if (destination != null && AdvisorySupport.isAdvisoryTopic(destination)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,871,return findTranslator(message.getStringProperty(Stomp.Headers.TRANSFORMATION), message.getDestination()).convertMessage(this, message);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,368,XAException e = new XAException("Transaction '" + xid + "' has not been started.");
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,369,e.errorCode = XAException.XAER_NOTA;
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,92,XAException xae = new XAException("STORE COMMIT FAILED: Transaction rolled back");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,93,xae.errorCode = XAException.XA_RBOTHER;
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,100,XAException xae = new XAException("Cannot call " + callName + " now.");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,101,xae.errorCode = XAException.XAER_PROTO;
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,107,XAException xae = new XAException("Cannot do 2 phase commit if the transaction has not been prepared");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,108,xae.errorCode = XAException.XAER_PROTO;
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,121,XAException xae = new XAException("PRE-PREPARE FAILED: Transaction rolled back");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,122,xae.errorCode = XAException.XA_RBOTHER;
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,158,throw new XAException("Invalid state");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,170,XAException xae = new XAException("POST ROLLBACK FAILED");
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,171,xae.errorCode = XAException.XAER_RMERR;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,787,xae.errorCode = XAException.XAER_RMERR;
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,93,boolean answer = index >= firstIndex;
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,122,firstIndex += BitArray.LONG_SIZE;
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,146,if (firstIndex < 0) {
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,147,firstIndex = (int) (index - (index % BitArray.LONG_SIZE));
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,149,answer = (int)((index - firstIndex) / BitArray.LONG_SIZE);
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,162,if (firstIndex >= 0) {
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,163,answer = (int)((index - firstIndex) - (BitArray.LONG_SIZE * getBin(index)));
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,171,if (firstIndex >=0) {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,642,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,643,LOG.debug("Recover: " + flag);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,2528,result = scheduler = new Scheduler("ActiveMQConnection["+info.getConnectionId().getValue()+"] Scheduler");
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,2529,scheduler.start();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,2200,return createInputStream(dest, messageSelector, noLocal,  -1);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1387,if (!session.isTransacted()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1388,LOG.warn("Duplicate non transacted dispatch to consumer: "  + getConsumerId() + ", poison acking: " + md);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1395,LOG.debug(getConsumerId() + " tracking transacted redelivery of duplicate: " + md.getMessage());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1397,boolean needsPoisonAck = false;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1398,synchronized (deliveredMessages) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1399,if (previouslyDeliveredMessages != null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1400,previouslyDeliveredMessages.put(md.getMessage().getMessageId(), true);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1404,needsPoisonAck = true;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1407,if (needsPoisonAck) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1412,LOG.warn("acking duplicate delivery as poison, redelivery must be pending to another"
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1413,+ " consumer on this connection, failoverRedeliveryWaitPeriod="
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1417,if (transactedIndividualAck) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1418,immediateIndividualTransactedAck(md);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1420,session.sendAck(new MessageAck(md, MessageAck.DELIVERED_ACK_TYPE, 1));
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,782,ack.setFirstMessageId(node.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,783,ack.setLastMessageId(node.getMessageId());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,194,long seq = persistenceAdapter.getStoreSequenceIdForMessageId(ack.getLastMessageId(), destination)[0];
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,187,try {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,189,registry.getRegistryMutext().wait(timeout);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,192,broker = registry.lookup(brokerName);
activemq-pool/src/main/java/org/apache/activemq/pool/PooledConnectionFactory.java,67,IntrospectionSupport.getProperties(this, props, POOL_PROPS_PREFIX);
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,32,import javax.jms.QueueConnection;
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,76,private List<DestinationBridge> inboundBridges = new CopyOnWriteArrayList<DestinationBridge>();
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,77,private List<DestinationBridge> outboundBridges = new CopyOnWriteArrayList<DestinationBridge>();
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,89,DestinationBridge bridge = (DestinationBridge)lru.getValue();
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,483,if (this.foreignConnection.compareAndSet((QueueConnection)connection, null)) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,617,private ThreadFactory factory = new ThreadFactory() {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,260,createConnection();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,134,private long waitForSlaveTimeout = 600000L;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,224,private String configurationUrl;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,887,while (!isStarted() && !stopped.get() && !waitSucceeded) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AMQPProtocolDiscriminator.java,60,static final private ArrayList<Command> pendingCommands = new ArrayList<Command>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,557,scheduler.schedualPeriodically(expireMessagesTask, getExpireMessagesPeriod());
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,34,public Scheduler (String name) {
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,38,public void executePeriodically(final Runnable task, long period) {
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,39,TimerTask timerTask = new SchedulerTimerTask(task);
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,40,timer.schedule(timerTask, period, period);
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,41,timerTasks.put(task, timerTask);
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,48,public synchronized void schedualPeriodically(final Runnable task, long period) {
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,78,if (this.timer != null) {
activemq-client/src/main/java/org/apache/activemq/thread/Scheduler.java,79,this.timer.cancel();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,192,connectionsPool.setLifo(true);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,199,connectionsPool.setLifo(false);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,202,try {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,209,while (connection == null) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,210,connection = connectionsPool.borrowObject(key);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,211,synchronized (connection) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,212,if (connection.getConnection() != null) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,213,connection.incrementReferenceCount();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,214,break;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,218,connectionsPool.returnObject(key, connection);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,219,connection = null;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,223,throw createJmsException("Error while attempting to retrieve a connection from the pool", e);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,226,try {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,227,connectionsPool.returnObject(key, connection);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,229,throw createJmsException("Error when returning connection to the pool", e);
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,30,private LinkedList<BitArray> list;
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,32,private int firstIndex = -1;
activemq-client/src/main/java/org/apache/activemq/util/BitArrayBin.java,172,result = firstIndex;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,242,destinationsLock.readLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,243,try{
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,244,return destinations;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,246,destinationsLock.readLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/security/AuthorizationBroker.java,62,Destination existing = this.getDestinationMap().get(destination);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,131,if (context != null && context.getXid() != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,132,message.getMessageId().setEntryLocator(sequenceId);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,134,onAdd(messageId, sequenceId, message.getPriority());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,324,Set<Destination> destinationSet = regionBroker.getDestinations(convert(commandDestination));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,325,for (Destination destination : destinationSet) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,103,case QUEUE_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,104,return new ActiveMQQueue(name);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,105,case TOPIC_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,106,return new ActiveMQTopic(name);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,107,case TEMP_QUEUE_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,108,return new ActiveMQTempQueue(name);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,109,case TEMP_TOPIC_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,110,return new ActiveMQTempTopic(name);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,111,default:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,112,throw new IllegalArgumentException("Invalid default destination type: " + defaultType);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,121,return (ActiveMQDestination)dest;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,136,return new ActiveMQTempQueue(((TemporaryQueue)dest).getQueueName());
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,139,return new ActiveMQTempTopic(((TemporaryTopic)dest).getTopicName());
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,142,return new ActiveMQQueue(((Queue)dest).getQueueName());
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,145,return new ActiveMQTopic(((Topic)dest).getTopicName());
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,170,return compare(this, (ActiveMQDestination)that);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,225,final int len = physicalName.length();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,229,for (int i = 0; i < len; i++) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,322,ActiveMQDestination d = (ActiveMQDestination)o;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,345,this.options = (Map<String, String>)in.readObject();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,350,case QUEUE_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,351,return "Queue";
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,352,case TOPIC_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,353,return "Topic";
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,354,case TEMP_QUEUE_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,355,return "TempQueue";
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,356,case TEMP_TOPIC_TYPE:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,357,return "TempTopic";
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,358,default:
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,359,throw new IllegalArgumentException("Invalid destination type: " + getDestinationType());
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,55,import org.apache.activemq.broker.region.CompositeDestinationInterceptor;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,56,import org.apache.activemq.broker.region.Destination;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,57,import org.apache.activemq.broker.region.DestinationInterceptor;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,58,import org.apache.activemq.broker.region.Queue;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,59,import org.apache.activemq.broker.region.RegionBroker;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,60,import org.apache.activemq.broker.region.Topic;
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,391,if (destination.getActiveMQDestination().isQueue()) {
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,392,updatedEntry.update((Queue) destination);
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,394,updatedEntry.update((Topic) destination);
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,396,LOG.debug("applied update to:" + destination);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaConnectionPool.java,46,return ((XAConnection)connection).createXASession();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaConnectionPool.java,107,session.setIgnoreClose(true);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaConnectionPool.java,108,session.setIsXa(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,275,protected void dispatchPending() throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,636,protected void dispatchPending() throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,122,if (pending.isEmpty(topic)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,123,topic.recoverRetroactiveMessages(context, this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,171,if (pending.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,172,for (Destination destination : durableDestinations.values()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,173,Topic topic = (Topic) destination;
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,174,topic.recoverRetroactiveMessages(context, this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,308,protected void recoverRetroactiveMessages(ConnectionContext context, Subscription subscription) throws Exception {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,114,private final String QOS_PROPERTY_NAME = "QoSPropertyName";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,493,topicName = new UTF8Buffer(message.getDestination().getPhysicalName().replace('.', '/'));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,36,import org.apache.activemq.broker.region.policy.NoSubscriptionRecoveryPolicy;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,94,subscriptionRecoveryPolicy = new NoSubscriptionRecoveryPolicy();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,672,public void setSubscriptionRecoveryPolicy(SubscriptionRecoveryPolicy subscriptionRecoveryPolicy) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,673,this.subscriptionRecoveryPolicy = subscriptionRecoveryPolicy;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,526,EncodedMessage em = new EncodedMessage(delivery.getMessageFormat(), buffer.data, buffer.offset, buffer.length);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,527,final ActiveMQMessage message = (ActiveMQMessage) getInboundTransformer().transform(em);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,528,current = null;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,530,if (destination != null) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,531,message.setJMSDestination(destination);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,533,message.setProducerId(producerId);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,544,LOG.trace("Inbound Message:{} from Producer:{}", message.getMessageId(), producerId + ":" + messageId.getProducerSequenceId());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,546,DeliveryState remoteState = delivery.getRemoteState();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,547,if (remoteState != null && remoteState instanceof TransactionalState) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,548,TransactionalState s = (TransactionalState) remoteState;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,549,long txid = toLong(s.getTxnId());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,550,message.setTransactionId(new LocalTransactionId(connectionId, txid));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,553,message.onSend();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,554,sendToActiveMQ(message, new ResponseHandler() {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,556,public void onResponse(IAmqpProtocolConverter converter, Response response) throws IOException {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,557,if (!delivery.remotelySettled()) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,558,if (response.isException()) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,559,ExceptionResponse er = (ExceptionResponse) response;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,560,Rejected rejected = new Rejected();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,561,ErrorCondition condition = new ErrorCondition();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,562,condition.setCondition(Symbol.valueOf("failed"));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,563,condition.setDescription(er.getException().getMessage());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,564,rejected.setError(condition);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,565,delivery.disposition(rejected);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,568,receiver.flow(1);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,569,delivery.settle();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,570,pumpProtonToSocket();
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,35,private static final int BUFFER_SIZE = 8192;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,43,private volatile long writeTimestamp = -1;//concurrent reads of this value
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,85,buffer[count++] = (byte)b;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,171,int lastRemaining = remaining - 1;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,179,if (remaining == lastRemaining) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,193,lastRemaining = remaining;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOOutputStream.java,197,out.write(plain);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,206,Metadata rc = new Metadata();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,384,metadata = new Metadata();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,422,metadata = new Metadata();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,48,TabularType tt = new TabularType("HealthStatus", "HealthStatus", ct, new String[]{"healthId", "level", "message", "resource"});
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,95,if (storeSize != 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,98,answer.add(new HealthStatus("org.apache.activemq.StoreLimit", "WARNING", "Message Store size is within " + val + "% of its limit", adapter.toString()));
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,104,String message = "Store limit is " + storeLimit / (1024 * 1024) +
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,126,int val = (int) ((storeSize * 100) / storeLimit);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,127,if (val > 90) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,128,answer.add(new HealthStatus("org.apache.activemq.TempStoreLimit", "WARNING", "TempMessage Store size is within " + val + "% of its limit", adapter.toString()));
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,157,if (storeSize != 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,160,answer.add(new HealthStatus("org.apache.activemq.JobSchedulerLimit", "WARNING", "JobSchedulerMessage Store size is within " + val + "% of its limit", scheduler.toString()));
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,166,String message = "JobSchedulerStore limit is " + storeLimit / (1024 * 1024) +
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,176,if (answer != null && !answer.isEmpty()){
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,177,this.currentState = "Getting Worried {";
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,178,for (HealthStatus hs: answer){
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,179,currentState += hs + " , ";
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,181,currentState += " }";
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,183,this.currentState="Good";
activemq-client/src/main/java/org/apache/activemq/advisory/AdvisorySupport.java,109,return new ActiveMQTopic(QUEUE_CONSUMER_ADVISORY_TOPIC_PREFIX + destination.getPhysicalName());
activemq-client/src/main/java/org/apache/activemq/advisory/AdvisorySupport.java,111,return new ActiveMQTopic(TOPIC_CONSUMER_ADVISORY_TOPIC_PREFIX + destination.getPhysicalName());
activemq-client/src/main/java/org/apache/activemq/advisory/AdvisorySupport.java,121,return new ActiveMQTopic(QUEUE_PRODUCER_ADVISORY_TOPIC_PREFIX + destination.getPhysicalName());
activemq-client/src/main/java/org/apache/activemq/advisory/AdvisorySupport.java,123,return new ActiveMQTopic(TOPIC_PRODUCER_ADVISORY_TOPIC_PREFIX + destination.getPhysicalName());
activemq-client/src/main/java/org/apache/activemq/filter/CompositeDestinationFilter.java,49,return true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,167,dest.addSubscription(context, sub);
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,168,rc.add(sub);
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,292,subscriptions.put(info.getConsumerId(), sub);
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,314,dest.addSubscription(context, sub);
activemq-broker/src/main/java/org/apache/activemq/security/AuthorizationBroker.java,53,protected SecurityContext checkSecurityContext(ConnectionContext context) throws SecurityException {
activemq-broker/src/main/java/org/apache/activemq/transport/TransportLogger.java,154,public void finalize() throws Throwable {
activemq-broker/src/main/java/org/apache/activemq/transport/TransportLogger.java,156,view.unregister();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1626,public void finalize() throws Throwable{
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1627,Scheduler s = this.scheduler;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1628,if (s != null){
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1629,s.stop();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,840,if (version.equals(Stomp.V1_2) && sub.getAckMode() != Stomp.Headers.Subscribe.AckModeValues.AUTO) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,127,try {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,128,if (dataOut != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,132,int pos = bs.offset;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,133,ByteSequenceData.writeIntBig(bs, length);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,134,bs.offset = pos;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,136,setContent(bs);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,137,bytesOut = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,138,dataOut = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,141,throw new RuntimeException(ioe.getMessage(), ioe); // TODO verify
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,801,this.bytesOut = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,802,if (dataIn != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,803,try {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,809,this.dataIn = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,810,this.dataOut = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,811,setReadOnlyBody(true);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,819,ActiveMQConnection connection = getConnection();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,820,if (connection != null && connection.isUseCompression()) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,823,try {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,824,os.write(new byte[4]);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,826,throw JMSExceptionSupport.create(e);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,828,length = 0;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,829,compressed = true;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,830,final Deflater deflater = new Deflater(Deflater.BEST_SPEED);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,831,os = new FilterOutputStream(new DeflaterOutputStream(os, deflater)) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,833,public void write(byte[] arg0) throws IOException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,834,length += arg0.length;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,835,out.write(arg0);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,839,public void write(byte[] arg0, int arg1, int arg2) throws IOException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,840,length += arg2;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,841,out.write(arg0, arg1, arg2);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,845,public void write(int arg0) throws IOException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,846,length++;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,847,out.write(arg0);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,851,public void close() throws IOException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,852,super.close();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,853,deflater.end();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,878,try {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,879,DataInputStream dis = new DataInputStream(is);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,880,length = dis.readInt();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,881,dis.close();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,883,throw JMSExceptionSupport.create(e);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,885,is = new InflaterInputStream(is);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,908,int length = bytes.getLength();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,909,ByteArrayOutputStream bytesOut = new ByteArrayOutputStream();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,910,bytesOut.write(new byte[4]);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,911,DeflaterOutputStream os = new DeflaterOutputStream(bytesOut);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,912,DataOutputStream dataOut = new DataOutputStream(os);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,913,dataOut.write(bytes.data, bytes.offset, bytes.length);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,914,dataOut.flush();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,915,dataOut.close();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,916,bytes = bytesOut.toByteSequence();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,917,ByteSequenceData.writeIntBig(bytes, length);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,918,bytes.offset = 0;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,919,setContent(bytes);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,923,protected void finalize() throws Throwable {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,926,if (dataIn != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,928,dataIn.close();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1389,MessageAck poisonAck = new MessageAck(md, MessageAck.POSION_ACK_TYPE, 1);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1390,poisonAck.setFirstMessageId(md.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1391,poisonAck.setPoisonCause(new Throwable("Duplicate non transacted delivery to " + getConsumerId()));
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1392,session.sendAck(poisonAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1408,MessageAck poisonAck = new MessageAck(md, MessageAck.POSION_ACK_TYPE, 1);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1409,poisonAck.setFirstMessageId(md.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1410,poisonAck.setPoisonCause(new JMSException("Duplicate dispatch with transacted redeliver pending on another consumer, connection: "
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1411,+ session.getConnection().getConnectionInfo().getConnectionId()));
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1414,+ failoverRedeliveryWaitPeriod + ". Message: " + md + ", poisonAck: " + poisonAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1415,session.sendAck(poisonAck);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,88,private final LinkedHashMap<MessageId, QueueMessageReference> pagedInMessages = new LinkedHashMap<MessageId, QueueMessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1097,List<MessageReference> toExpire = new ArrayList<MessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1099,pagedInPendingDispatchLock.writeLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1100,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1101,addAll(pagedInPendingDispatch.values(), browseList, max, toExpire);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1102,for (MessageReference ref : toExpire) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1103,pagedInPendingDispatch.remove(ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1104,if (broker.isExpired(ref)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1105,LOG.debug("expiring from pagedInPending: {}", ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1106,messageExpired(connectionContext, ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1110,pagedInPendingDispatchLock.writeLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1112,toExpire.clear();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1113,pagedInMessagesLock.readLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1114,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1115,addAll(pagedInMessages.values(), browseList, max, toExpire);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1117,pagedInMessagesLock.readLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1119,for (MessageReference ref : toExpire) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1120,if (broker.isExpired(ref)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1121,LOG.debug("expiring from pagedInMessages: {}", ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1122,messageExpired(connectionContext, ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1124,pagedInMessagesLock.writeLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1125,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1126,pagedInMessages.remove(ref.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1128,pagedInMessagesLock.writeLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1182,QueueMessageReference ref = this.pagedInMessages.get(msgId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1451,Set<QueueMessageReference> set = new LinkedHashSet<QueueMessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1460,List<QueueMessageReference> list = new ArrayList<QueueMessageReference>(set);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1461,for (QueueMessageReference ref : list) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1464,moveMessageTo(context, ref, dest);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1480,Set<QueueMessageReference> set = new LinkedHashSet<QueueMessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1489,List<QueueMessageReference> list = new ArrayList<QueueMessageReference>(set);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1490,for (QueueMessageReference ref : list) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1493,moveMessageTo(context, ref, ref.getMessage().getOriginalDestination());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1588,ArrayList<QueueMessageReference> alreadyDispatchedMessages = null;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1591,alreadyDispatchedMessages = new ArrayList<QueueMessageReference>(pagedInMessages.values());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1607,for (QueueMessageReference node : alreadyDispatchedMessages) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1745,pagedInMessages.remove(reference.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1908,if (!pagedInMessages.containsKey(ref.getMessageId())) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1909,pagedInMessages.put(ref.getMessageId(), ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2162,message = pagedInMessages.get(messageId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,735,if (context.getBroker() == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,736,context.setBroker(getRoot());
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,738,BrokerSupport.resendNoCopy(context, message, deadLetterDestination);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,192,taskRunner = null;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,50,import org.apache.activemq.command.*;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,684,LOG.info("{} Ignoring sub from {}, browsers explicitly suppressed", configuration.getBrokerName(), remoteBrokerName);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,535,MessageId messageId = message.getMessageId();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,536,if (messageId == null) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,537,messageId = new MessageId();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,538,message.setMessageId(messageId);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,541,messageId.setProducerId(producerId);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,542,messageId.setProducerSequenceId(messageIdGenerator.getNextSequenceId());
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,181,message.setMarshalledProperties(null);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,559,if (!redeliveredWaitingDispatch.isEmpty()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,178,this.rollback();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,180,throw IOExceptionSupport.create(e);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,192,if (addMessageStatement != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,193,addMessageStatement.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,194,addMessageStatement = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,196,if (removedMessageStatement != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,197,removedMessageStatement.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,198,removedMessageStatement = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,200,if (updateLastAckStatement != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,201,updateLastAckStatement.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,202,updateLastAckStatement = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,204,connection.rollback();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,89,private static final int DEFAULT_CACHE_SIZE = 5000;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,94,private final LongSequenceGenerator messageIdGenerator = new LongSequenceGenerator();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,623,private String getClientId() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,219,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,238,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,245,if (!this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,262,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,272,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,279,if (!this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,355,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,368,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,375,if (!this.batchStatments && s != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,446,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,461,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,468,if (!this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,484,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,499,if (this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,507,if (!this.batchStatments) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,899,return this.batchStatments;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,133,mqttTransport.sendToActiveMQ(command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,152,mqttTransport.sendToMQTT(PING_RESP_FRAME);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,25,import org.apache.activemq.broker.BrokerContext;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,81,handleException(e);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,103,n.oneway(command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,149,public void handleException(IOException e) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,151,super.onException(e);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,134,if (sequence == null) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,136,int size = 1;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,137,if (command != null) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,139,DataStructure c = (DataStructure)command;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,140,byte type = c.getDataStructureType();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,141,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,142,if (dsm == null) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,143,throw new IOException("Unknown data type: " + type);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,145,if (tightEncodingEnabled) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,147,BooleanStream bs = new BooleanStream();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,148,size += dsm.tightMarshal1(this, c, bs);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,149,size += bs.marshalledSize();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,151,bytesOut.restart(size);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,152,if (!sizePrefixDisabled) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,153,bytesOut.writeInt(size);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,155,bytesOut.writeByte(type);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,156,bs.marshal(bytesOut);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,157,dsm.tightMarshal2(this, c, bytesOut, bs);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,158,sequence = bytesOut.toByteSequence();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,161,bytesOut.restart();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,162,if (!sizePrefixDisabled) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,163,bytesOut.writeInt(0); // we don't know the final size
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,167,bytesOut.writeByte(type);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,168,dsm.looseMarshal(this, c, bytesOut);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,169,sequence = bytesOut.toByteSequence();
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,171,if (!sizePrefixDisabled) {
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,172,size = sequence.getLength() - 4;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,173,int pos = sequence.offset;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,174,ByteSequenceData.writeIntBig(sequence, size);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,175,sequence.offset = pos;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,180,bytesOut.restart(5);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,181,bytesOut.writeInt(size);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,182,bytesOut.writeByte(NULL_TYPE);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,43,private static final Object DISCONNECT = new Object();
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,134,if (command == DISCONNECT) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,135,transportListener.onException(new TransportDisposedIOException("Peer (" + peer.toString() + ") disposed."));
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,137,transport.receiveCounter++;
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,138,transportListener.onCommand(command);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,244,if( command == DISCONNECT ) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,245,tl.onException(new TransportDisposedIOException("Peer (" + peer.toString() + ") disposed."));
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,247,tl.onCommand(command);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,21,import java.util.concurrent.atomic.AtomicBoolean;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,68,private final AtomicBoolean prefetchWindowOpen = new AtomicBoolean(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,296,if (destination != null && !ack.isInTransaction()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,297,destination.getDestinationStatistics().getDequeues().add(ack.getMessageCount());
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,316,prefetchWindowOpen.set(true);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,320,if (prefetchWindowOpen.get()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,324,prefetchWindowOpen.set(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,334,pullTimeout();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,347,private final void pullTimeout() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,349,if (prefetchWindowOpen.compareAndSet(true, false)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,366,return (int)(dispatchedCounter.get() - dequeueCounter.get());
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,465,return getDispatchedQueueSize() >= info.getPrefetchSize() && !prefetchWindowOpen.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,556,prefetchWindowOpen.set(false);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,901,acknowledge(md, MessageAck.DELIVERED_ACK_TYPE);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,547,try {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,548,PUBLISH publish = new PUBLISH();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,549,publish.topicName(connect.willTopic());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,550,publish.qos(connect.willQos());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,551,publish.payload(connect.willMessage());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,552,ActiveMQMessage message = convertMessage(publish);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,553,message.setProducerId(producerId);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,554,message.onSend();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,555,sendToActiveMQ(message, null);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,557,LOG.warn("Failed to publish Will Message " + connect.willMessage());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,610,try {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,611,getMQTTTransport().stop();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,613,LOG.error("Failed to stop MQTTT Transport ", e);
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,71,ObjectName[] queues = broker.getTopics();
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,72,return getManagedObjects(queues, TopicViewMBean.class);
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,81,ObjectName[] queues = broker.getDurableTopicSubscribers();
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,82,return getManagedObjects(queues, DurableSubscriptionViewMBean.class);
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,91,ObjectName[] queues = broker.getInactiveDurableTopicSubscribers();
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,92,return getManagedObjects(queues, DurableSubscriptionViewMBean.class);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,327,return topic.qos();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,712,receiver.setCondition(new ErrorCondition(AmqpError.INTERNAL_ERROR, exception.getMessage()));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1107,sender.setCondition(new ErrorCondition(AmqpError.INTERNAL_ERROR, exception.getMessage()));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1159,Symbol condition = AmqpError.INTERNAL_ERROR;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1160,if (exception instanceof InvalidSelectorException) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1161,condition = AmqpError.INVALID_FIELD;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1163,sender.setCondition(new ErrorCondition(condition, exception.getMessage()));
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,454,MessageId id = new MessageId(producerId, messageIdGenerator.getNextSequenceId());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,477,short id = (short) message.getMessageId().getProducerSequenceId();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,478,result.messageId(id);
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,163,if (!((StoreDurableSubscriberCursor) pending).isStarted() || !keepDurableSubsActive) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,19,import java.io.DataInputStream;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,30,import javax.net.SocketFactory;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,33,import org.apache.activemq.transport.nio.NIOOutputStream;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,34,import org.apache.activemq.transport.nio.SelectorManager;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,35,import org.apache.activemq.transport.nio.SelectorSelection;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,36,import org.apache.activemq.transport.tcp.TcpTransport;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,37,import org.apache.activemq.util.IOExceptionSupport;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,38,import org.apache.activemq.util.ServiceStopper;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,39,import org.apache.activemq.wireformat.WireFormat;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,40,import org.fusesource.hawtbuf.Buffer;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,109,if( !magicRead ) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,110,if( inputBuffer.remaining()>= 8 ) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,111,magicRead = true;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,112,Buffer magic = new Buffer(8);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,113,for (int i = 0; i < 8; i++) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,114,magic.data[i] = inputBuffer.get();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,116,doConsume(new AmqpHeader(magic));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,118,inputBuffer.flip();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,119,continue;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,504,if (trackTransactions && info != null) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,521,if (trackTransactions && info != null) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,538,if (trackTransactions && info != null) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,555,if (trackTransactions && info != null) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,572,if (trackTransactions && info != null) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,633,Tracked tracked = stateTracker.track(command);
activemq-client/src/main/java/org/apache/activemq/RedeliveryPolicy.java,101,long nextDelay;
activemq-client/src/main/java/org/apache/activemq/RedeliveryPolicy.java,103,if (previousDelay == 0) {
activemq-client/src/main/java/org/apache/activemq/RedeliveryPolicy.java,104,nextDelay = redeliveryDelay;
activemq-client/src/main/java/org/apache/activemq/RedeliveryPolicy.java,112,nextDelay = previousDelay;
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,146,LOG.debug("suppressing duplicate message send [{}] from network producer with producerSequence [{}] less than last stored: {}", new Object[]{
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,152,LOG.debug("suppressing duplicated message send [{}] with producerSequenceId [{}] less than last stored: {}", new Object[]{
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,153,(LOG.isTraceEnabled() ? messageSend : messageSend.getMessageId()), producerSequenceId, lastSendSequenceNumber
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,844,if (message.isExpired() || connection.isDuplicate(ActiveMQSession.this, message)) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,846,continue;
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,872,asyncSendPacket(ack);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,74,private final ActiveMQConnection connection;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,76,private final ConnectionId connectionId;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,88,this.connectionId = connection.getConnectionInfo().getConnectionId();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,234,this.transactionId = new LocalTransactionId(connectionId, localTransactionIdGenerator.getNextSequenceId());
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,679,private String getResourceManagerId() throws JMSException {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,698,TransactionInfo info = new TransactionInfo(connectionId, transactionId, TransactionInfo.BEGIN);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,702,LOG.debug("Started XA transaction: " + transactionId);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,712,TransactionInfo info = new TransactionInfo(connectionId, transactionId, TransactionInfo.END);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,716,LOG.debug("Ended XA transaction: " + transactionId);
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,105,for (int i = 0; i < globalTransactionId.length; i++) {
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,106,s.append(Integer.toHexString(globalTransactionId[i]));
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,109,for (int i = 0; i < branchQualifier.length; i++) {
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,110,s.append(Integer.toHexString(branchQualifier[i]));
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionFactory.java,101,throw new JMSException(e.getMessage());
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,204,cleanup();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,207,physicalConnection.close();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,208,destroyed = true;
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,238,localAndXATransaction.cleanup();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,22,import javax.jms.Connection;
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,24,import javax.jms.XAConnection;
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,25,import javax.jms.XASession;
activemq-ra/src/main/java/org/apache/activemq/ra/LocalAndXATransaction.java,33,private final TransactionContext transactionContext;
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,171,log.debug("JMS Session is no longer running (maybe due to loss of connection?), marking ServerSesison as stale");
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,177,log.debug("Endpoint failed to process message.", e);
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,179,log.info("Endpoint failed to process message. Reason: " + e.getMessage());
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,258,return "ServerSessionImpl:" + serverSessionId;
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,224,for (Iterator i = l.iterator(); i.hasNext();) {
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,225,dispatchToSession((MessageDispatch)i.next());
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,228,LOG.error("Error redispatching unconsumed messages from stale session", t);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,25,import javax.net.SocketFactory;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,27,import org.apache.activemq.transport.nio.NIOSSLTransport;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,28,import org.apache.activemq.wireformat.WireFormat;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,29,import org.fusesource.hawtbuf.Buffer;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,33,private final ByteBuffer magic = ByteBuffer.allocate(8);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,54,byte[] fill = new byte[plain.remaining()];
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,55,plain.get(fill);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,57,ByteBuffer payload = ByteBuffer.wrap(fill);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,59,if (magic.position() != 8) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,61,while (payload.hasRemaining() && magic.position() < 8) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,62,magic.put(payload.get());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,65,if (!magic.hasRemaining()) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,66,magic.flip();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,67,doConsume(new AmqpHeader(new Buffer(magic)));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,68,magic.position(8);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,72,if (payload.hasRemaining()) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioSslTransport.java,73,doConsume(AmqpSupport.toBuffer(payload));
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,413,protonConnection.setCondition(new ErrorCondition(AmqpError.UNAUTHORIZED_ACCESS, exception.getMessage()));
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,286,StringTokenizer iter = new StringTokenizer(physicalName, PATH_SEPERATOR);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,287,while (iter.hasMoreTokens()) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,288,String name = iter.nextToken().trim();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,289,if (name.length() == 0) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,290,continue;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,292,l.add(name);
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMapNode.java,115,answer.addAll(removeValues());
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMapNode.java,173,answer.addAll(values);
activemq-client/src/main/java/org/apache/activemq/filter/PrefixDestinationFilter.java,39,this.prefixes = prefixes;
activemq-client/src/main/java/org/apache/activemq/thread/DedicatedTaskRunner.java,72,LOG.trace("Shutdown timeout: {} task: {}", task);
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,92,LOG.trace("Shutdown timeout: {} task: {}", task);
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,135,synchronized( runable ) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,149,Response response = service(command);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,150,if (response != null && !brokerService.isStopping() ) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,151,dispatchSync(response);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,215,Connection connection = createConnection(transport);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,216,connection.start();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,304,LOG.warn("No topics defined for Subscription " + command);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,32,import org.apache.activemq.transport.nio.NIOInputStream;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransport.java,123,doConsume(AmqpSupport.toBuffer(inputBuffer));
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,330,void onUnSubscribe(UNSUBSCRIBE command) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,203,throw new MQTTProtocolException("All ready connected.");
activemq-broker/src/main/java/org/apache/activemq/broker/Connection.java,19,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,23,import java.util.HashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,24,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,25,import java.util.LinkedList;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,26,import java.util.List;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,27,import java.util.Map;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,28,import java.util.Properties;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,264,private ThreadFactory factory = new ThreadFactory() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,30,import org.apache.activemq.command.KeepAliveInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,53,private final AtomicBoolean commandReceived = new AtomicBoolean(true);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,60,private long readCheckTime = DEFAULT_CHECK_TIME_MILLS;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,61,private long initialDelayTime = DEFAULT_CHECK_TIME_MILLS;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,66,long lastRunTime;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,69,long now = System.currentTimeMillis();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,70,long elapsed = (now - lastRunTime);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,72,if (lastRunTime != 0 && LOG.isDebugEnabled()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,73,LOG.debug("" + elapsed + " ms elapsed since last read check.");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,81,if (!allowReadCheck(elapsed)) { // FUNKY qdox bug does not allow me to inline this expression.
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,82,LOG.debug("Aborting read check.. Not enough time elapsed since last read check.");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,86,lastRunTime = now;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,87,readCheck();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,92,return elapsed > (readCheckTime * 9 / 10);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,109,final void readCheck() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,110,int currentCounter = next.getReceiveCounter();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,111,int previousCounter = lastReceiveCounter.getAndSet(currentCounter);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,117,if (inReceive.get() || currentCounter != previousCounter) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,118,if (LOG.isTraceEnabled()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,119,LOG.trace("A receive is in progress");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,121,return;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,123,if (!commandReceived.get() && monitorStarted.get() && !ASYNC_TASKS.isTerminating()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,124,if (LOG.isDebugEnabled()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,125,LOG.debug("No message received since last read check for " + toString() + "! Throwing InactivityIOException.");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,127,ASYNC_TASKS.execute(new Runnable() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,128,public void run() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,132,onException(new InactivityIOException("Channel was inactive for too (>" + readCheckTime + ") long: " + next.getRemoteAddress()));
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,136,if (LOG.isTraceEnabled()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,137,LOG.trace("Message received since last read check, resetting flag: ");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,140,commandReceived.set(false);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,144,commandReceived.set(true);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,179,public long getReadCheckTime() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,180,return readCheckTime;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,183,public void setReadCheckTime(long readCheckTime) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,184,this.readCheckTime = readCheckTime;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,187,public long getInitialDelayTime() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,188,return initialDelayTime;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,191,public void setInitialDelayTime(long initialDelayTime) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,192,this.initialDelayTime = initialDelayTime;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,226,if (readCheckTime > 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,230,if (readCheckTime > 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,238,if (readCheckTime > 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,239,READ_CHECK_TIMER.schedule(readCheckerTask, initialDelayTime, readCheckTime);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,88,private static final double MQTT_KEEP_ALIVE_GRACE_PERIOD= 1.5;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,580,long keepAliveMSWithGracePeriod = (long) (keepAliveMS * MQTT_KEEP_ALIVE_GRACE_PERIOD);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,584,if (keepAliveMSWithGracePeriod == 0 && defaultKeepAlive > 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,585,keepAliveMSWithGracePeriod = defaultKeepAlive;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,589,monitor.setReadCheckTime(keepAliveMSWithGracePeriod);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,590,monitor.setInitialDelayTime(keepAliveMS);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,458,msg.setPersistent(command.qos() != QoS.AT_MOST_ONCE);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,33,import org.fusesource.mqtt.codec.MQTTFrame;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,76,TRACE.trace("Received: \n" + command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,79,protocolConverter.onMQTTCommand((MQTTFrame) command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,99,TRACE.trace("Sending: \n" + command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,402,ActiveMQMessage message = convertMessage(command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,465,String topicName = command.topicName().toString().replaceAll("/", ".");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,546,if (connected.get() && connect.willTopic() != null && connect.willMessage() != null) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,684,String result = name.replace('#', '>');
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,685,result = result.replace('+', '*');
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,686,result = result.replace('/', '.');
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,687,return result;
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQEndpointWorker.java,24,import javax.jms.Destination;
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQEndpointWorker.java,120,serverSessionPool.closeIdleSessions();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,169,session.run();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,265,int activeCount = closeIdleSessions();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,281,activeCount = closeIdleSessions();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,286,protected int closeIdleSessions() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,19,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,20,import java.util.List;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,21,import java.util.Set;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,76,if (matches == false && subs.size() == 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,90,final String selector = cache.getSelector(dest.getActiveMQDestination().getQualifiedName());
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,91,if (selector != null) {
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,19,import java.io.File;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,20,import java.io.FileInputStream;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,21,import java.io.FileOutputStream;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,22,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,23,import java.io.ObjectInputStream;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,24,import java.io.ObjectOutputStream;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,25,import java.util.concurrent.ConcurrentHashMap;
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,54,private ConcurrentHashMap<String, String> subSelectorCache = new ConcurrentHashMap<String, String>();
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,88,LOG.debug("Caching consumer selector [{}] on a {}", info.getSelector(), info.getDestination().getQualifiedName());
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,96,subSelectorCache.put(info.getDestination().getQualifiedName(), selector);
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,108,subSelectorCache = (ConcurrentHashMap<String, String>) in.readObject();
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,151,public String getSelector(final String destination) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,35,public static final int DEFAULT_OPTIMIZE_DURABLE_TOPIC_PREFETCH=1000;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,36,public static final int DEFAULT_INPUT_STREAM_PREFETCH=100;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,153,this.durableTopicPrefetch = i;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,154,this.queueBrowserPrefetch = i;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,155,this.queuePrefetch = i;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,156,this.topicPrefetch = i;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,157,this.inputStreamPrefetch = 1;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,158,this.optimizeDurableTopicPrefetch = i;
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,169,public boolean equals(Object object){
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,170,if (object instanceof ActiveMQPrefetchPolicy){
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,173,this.queueBrowserPrefetch == other.queueBrowserPrefetch &&
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,174,this.topicPrefetch == other.topicPrefetch &&
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,175,this.durableTopicPrefetch == other.durableTopicPrefetch &&
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,176,this.optimizeDurableTopicPrefetch == other.optimizeDurableTopicPrefetch &&
activemq-client/src/main/java/org/apache/activemq/ActiveMQPrefetchPolicy.java,177,this.inputStreamPrefetch == other.inputStreamPrefetch;
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,661,for (final ActiveMQMessageConsumer consumer : consumers) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,662,consumer.inProgressClearRequired();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,663,transportInterruptionProcessingComplete.incrementAndGet();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,667,consumer.clearMessagesInProgress();
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,529,RegionBroker regionBroker = (RegionBroker) getBrokerService().getRegionBroker();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,238,final ActiveMQConnection connection = makeConnection();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,239,return new XAResource[]{new LocalAndXATransaction(new TransactionContext(connection)) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,240,public void finalize() throws Throwable {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,241,try {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,242,connection.close();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,245,super.finalize();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,438,List<JobLocation> values = entry.getValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,446,for (Long l : keys) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,447,this.index.remove(tx, l);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,457,List<JobLocation> values = entry.getValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,458,if (values != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,459,for (JobLocation jl : values) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,460,this.store.decrementJournalCount(tx, jl.getLocation());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,469,this.index.remove(tx, l);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,20,import java.util.*;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,54,import org.apache.activemq.command.*;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,950,if (memoryUsage != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,951,memoryUsage.start();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,953,if (systemUsage.getStoreUsage() != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,954,systemUsage.getStoreUsage().start();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,956,systemUsage.getMemoryUsage().addUsageListener(this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,957,messages.start();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,958,if (getExpireMessagesPeriod() > 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,959,scheduler.schedualPeriodically(expireMessagesTask, getExpireMessagesPeriod());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,961,doPageIn(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,966,if (taskRunner != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,967,taskRunner.shutdown();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,969,if (this.executor != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,970,ThreadPoolUtils.shutdownNow(executor);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,971,executor = null;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,974,scheduler.cancel(expireMessagesTask);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,976,if (flowControlTimeoutTask.isAlive()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,977,flowControlTimeoutTask.interrupt();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,980,if (messages != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,981,messages.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,984,systemUsage.getMemoryUsage().removeUsageListener(this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,985,if (memoryUsage != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,986,memoryUsage.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,988,if (store != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,989,store.stop();
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,23,import java.util.Vector;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,63,protected final ConcurrentHashMap<ConnectionId, ConnectionState> connectionStates = new ConcurrentHashMap<ConnectionId, ConnectionState>();
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,73,private int currentCacheSize;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,74,private Map<Object,Command> messageCache = new LinkedHashMap<Object,Command>(){
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,107,private class PrepareReadonlyTransactionAction extends RemoveTransactionAction {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,148,currentCacheSize += MESSAGE_PULL_SIZE;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,173,for (Command msg:messageCache.values()) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,270,for (ConsumerState consumerState : sessionState.getConsumerStates()) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,474,producerState.setTransactionState(transactionState);
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,593,messageCache.put(id.intern(), pull);
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,676,transport.oneway(control);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,179,MessageAvailableConsumer consumer = (MessageAvailableConsumer)client.getConsumer(destination, request.getHeader(WebClient.selectorName));
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,181,message = (Message)request.getAttribute("message");
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,182,if (message != null) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,185,writeResponse(request, response, message);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,186,return;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,188,long timeout = getReadTimeout(request);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,194,Continuation continuation = null;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,195,Listener listener = null;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,198,message = consumer.receive(10);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,203,continuation = ContinuationSupport.getContinuation(request);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,205,if (continuation.isExpired()) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,206,response.setStatus(HttpServletResponse.SC_NO_CONTENT);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,207,return;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,210,continuation.setTimeout(timeout);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,211,continuation.suspend();
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,214,listener = (Listener)consumer.getAvailableListener();
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,215,if (listener == null) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,216,listener = new Listener(consumer);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,217,consumer.setAvailableListener(listener);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,221,listener.setContinuation(continuation);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,224,writeResponse(request, response, message);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,226,throw new ServletException("Could not post JMS message: " + e, e);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,233,response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,234,response.setHeader("Pragma", "no-cache"); // HTTP 1.0
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,235,response.setDateHeader("Expires", 0);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,272,TextMessage textMsg = (TextMessage)message;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,281,ObjectMessage objectMsg = (ObjectMessage)message;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,291,TextMessage textMsg = (TextMessage)message;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,307,synchronized(this) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,341,for(Enumeration names = message.getPropertyNames(); names.hasMoreElements();) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,343,response.setHeader(name , message.getObjectProperty(name).toString());
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,351,protected long getReadTimeout(HttpServletRequest request) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,352,long answer = defaultReadTimeout;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,354,String name = request.getParameter(readTimeoutParameter);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,355,if (name != null) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,356,answer = asLong(name);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,358,if (answer < 0 || answer > maximumReadTimeout) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,359,answer = maximumReadTimeout;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,361,return answer;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,389,try {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,390,Message message = consumer.receiveNoWait();
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,391,continuation.setAttribute("message", message);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,393,LOG.warn("Error receiving message due " + e.getMessage() + ". This exception is ignored.", e);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,395,continuation.resume();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,25,import java.io.*;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,33,private long maxFrameSize = 1024*1024*100;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,56,if( !magicRead ) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,63,if( size > maxFrameSize) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,764,protected ConnectionContext createConnectionContext() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,99,LOG.trace("{} - cursor got duplicate: {}, {}", new Object[]{ this, message.getMessageId(), message.getPriority() });
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,182,disableCache = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,249,LOG.trace("{} - fillBatch", this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/TopicStorePrefetch.java,72,LOG.trace("recover: {}, priority: {}", message.getMessageId(), message.getPriority());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1285,LOG.warn("Duplicate message add attempt rejected. Destination: " + command.getDestination().getName() + ", Message id: " + command.getMessageId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessor.java,92,throw new IOException("Invalid location: " + location + ", : " + e);
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,37,private AtomicLong sequence = new AtomicLong(1);
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,65,LOG.trace("could not generate unique stub by using DNS and binding to local port", ioe);
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,67,LOG.warn("could not generate unique stub by using DNS and binding to local port: {} {}", ioe.getClass().getCanonicalName(), ioe.getMessage());
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,114,IntegerResponse response = (IntegerResponse) command;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,115,if (XAResource.XA_RDONLY == response.getResult()) {
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,117,super.onResponse(command);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1096,pageInMessages(true);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1133,if (browseList.size() < getMaxBrowsePageSize()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1134,messagesLock.writeLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1135,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1136,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1137,messages.reset();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1138,while (messages.hasNext() && browseList.size() < max) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1139,MessageReference node = messages.next();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1140,if (node.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1141,if (broker.isExpired(node)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1142,LOG.debug("expiring from messages: {}", node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1143,messageExpired(connectionContext, createMessageReference(node.getMessage()));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1145,messages.remove();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1147,messages.rollback(node.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1148,if (browseList.contains(node.getMessage()) == false) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1149,browseList.add(node.getMessage());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1152,node.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1155,messages.release();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1158,messagesLock.writeLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1166,private void addAll(Collection<? extends MessageReference> refs, List<Message> l, int maxBrowsePageSize,
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1168,for (Iterator<? extends MessageReference> i = refs.iterator(); i.hasNext() && l.size() < getMaxBrowsePageSize();) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1847,LOG.debug("{} toPageIn: {}, Inflight: {}, pagedInMessages.size {}, enqueueCount: {}, dequeueCount: {}",
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1861,int pagedInPendingSize = 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1862,pagedInPendingDispatchLock.readLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1863,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1864,pagedInPendingSize = pagedInPendingDispatch.size();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1866,pagedInPendingDispatchLock.readLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,343,LOG.info("{}, Usage Manager memory limit reached for {}. Producers will be throttled to the rate at which messages are removed from this destination to prevent flooding it. See http://activemq.apache.org/producer-flow-control.html for more info.", getActiveMQDestination().getQualifiedName());
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,414,protected boolean isSpaceInMemoryList() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,415,return hasSpace() && isDiskListEmpty();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,853,org.apache.activemq.command.Message message = md.getMessage();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,854,if (!message.getProperties().containsKey(MESSAGE_FORMAT_KEY)) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,855,message.setProperty(MESSAGE_FORMAT_KEY, 0);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,858,final ActiveMQMessage jms = (ActiveMQMessage) md.getMessage();
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,19,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,20,import java.util.concurrent.atomic.AtomicBoolean;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,36,private final Transport localTransport;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,37,private final Transport remoteTransport;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,38,private AtomicBoolean shuttingDown = new AtomicBoolean(false);
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,39,private AtomicBoolean running = new AtomicBoolean(false);
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnection.java,117,ss.stop(localTransport);
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,19,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,20,import java.net.URI;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,21,import java.net.URISyntaxException;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,22,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,23,import java.util.concurrent.CopyOnWriteArrayList;
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,60,Transport remoteTransport = createRemoteTransport();
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,61,ProxyConnection connection = new ProxyConnection(localTransport, remoteTransport);
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,62,connections.add(connection);
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,136,private Transport createRemoteTransport() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,140,ct.add(false,new URI[] {localUri});
activemq-broker/src/main/java/org/apache/activemq/proxy/ProxyConnector.java,149,connections.remove(this);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQStreamMessage.java,1114,private void initializeWriting() throws MessageNotWriteableException {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,840,message.getMessageId().setBrokerSequenceId(getDestinationSequenceId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,841,if (messages.isCacheEnabled()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,842,result = store.asyncAddQueueMessage(context, message, isOptimizeStorage());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,844,store.addMessage(context, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,846,if (isReduceMemoryFootprint()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,847,message.clearMarshalledState();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,22,import java.util.*;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,99,protected final BrokerId localBrokerPath[] = new BrokerId[] { null };
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,106,protected final BrokerId remoteBrokerPath[] = new BrokerId[] { null };
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,253,LOG.info("pending tasks on stop {}", pendingTasks);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,337,ServiceSupport.dispose(localBroker);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,338,ServiceSupport.dispose(remoteBroker);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,341,return;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,433,+ configuration.getBrokerName());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,580,|| AdvisorySupport.isDestinationAdvisoryTopic(message.getDestination())) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,589,message.setProducerId(duplexInboundLocalProducerInfo.getProducerId());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,590,if (message.isResponseRequired() || configuration.isAlwaysSyncSend()) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,591,duplexInboundLocalBroker.asyncRequest(message, new ResponseCallback() {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,592,final int correlationId = message.getCommandId();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,595,public void onCompletion(FutureResponse resp) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,596,try {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,597,Response reply = resp.getResult();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,598,reply.setCorrelationId(correlationId);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,599,remoteBroker.oneway(reply);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,601,LOG.error("Exception: {} on duplex forward of: {}", error, message);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,602,serviceRemoteException(error);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,607,duplexInboundLocalBroker.oneway(message);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,811,LOG.info("Network connection between {} and {} shutdown due to a local error: {}", new Object[]{ localBroker, remoteBroker, error });
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,838,advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,865,LOG.trace("{} remove local subscription: {} for remote {}", new Object[]{ configuration.getBrokerName(), sub.getLocalInfo().getConsumerId(), sub.getRemoteInfo().getConsumerId() });
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1042,return new BrokerId[] { idToAppend };
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1149,&& !configuration.isSuppressDuplicateTopicSubscriptions()) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1269,LOG.debug("{} using priority: {} for subscription: {}", new Object[]{ configuration.getBrokerName(), priority, info });
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1281,info.setBrokerPath(new BrokerId[] { remoteBrokerId });
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,30,import org.apache.activemq.broker.BrokerContext;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,64,import org.fusesource.mqtt.codec.CONNACK;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,65,import org.fusesource.mqtt.codec.CONNECT;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,66,import org.fusesource.mqtt.codec.DISCONNECT;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,67,import org.fusesource.mqtt.codec.MQTTFrame;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,68,import org.fusesource.mqtt.codec.PINGREQ;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,69,import org.fusesource.mqtt.codec.PINGRESP;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,70,import org.fusesource.mqtt.codec.PUBACK;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,71,import org.fusesource.mqtt.codec.PUBCOMP;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,72,import org.fusesource.mqtt.codec.PUBLISH;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,73,import org.fusesource.mqtt.codec.PUBREC;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,74,import org.fusesource.mqtt.codec.PUBREL;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,75,import org.fusesource.mqtt.codec.SUBACK;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,76,import org.fusesource.mqtt.codec.SUBSCRIBE;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,77,import org.fusesource.mqtt.codec.UNSUBACK;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,78,import org.fusesource.mqtt.codec.UNSUBSCRIBE;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,37,import org.apache.activemq.command.Command;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,122,NIOOutputStream outputStream = new NIOOutputStream(channel);
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,275,doConsume((Command) command);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,19,import java.util.Comparator;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,26,import java.util.concurrent.ConcurrentSkipListMap;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,39,import org.apache.activemq.command.ActiveMQDestination;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,40,import org.apache.activemq.command.ActiveMQMessage;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,41,import org.apache.activemq.command.ActiveMQTopic;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,42,import org.apache.activemq.command.BrokerInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,43,import org.apache.activemq.command.Command;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,44,import org.apache.activemq.command.ConnectionId;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,45,import org.apache.activemq.command.ConnectionInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,46,import org.apache.activemq.command.ConsumerId;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,47,import org.apache.activemq.command.ConsumerInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,48,import org.apache.activemq.command.DestinationInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,49,import org.apache.activemq.command.Message;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,50,import org.apache.activemq.command.MessageId;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,51,import org.apache.activemq.command.ProducerId;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,52,import org.apache.activemq.command.ProducerInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,53,import org.apache.activemq.command.RemoveSubscriptionInfo;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,114,for (Iterator<ConnectionInfo> iter = connections.values().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,143,for (Iterator<ProducerInfo> iter = producers.values().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,146,fireProducerAdvisory(context, value.getDestination(),topic, value, info.getConsumerId());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,152,for (Iterator<ConsumerInfo> iter = consumers.iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,155,fireConsumerAdvisory(context,value.getDestination(), topic, value, info.getConsumerId());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,161,for (Iterator<BrokerInfo> iter = networkBridges.keySet().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,184,public Destination addDestination(ConnectionContext context, ActiveMQDestination destination,boolean create) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,185,Destination answer = super.addDestination(context, destination,create);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,189,if( previous==null ) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,204,if( previous==null ) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,223,for(ActiveMQTopic advisoryDestination : advisoryDestinations) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,244,for(ActiveMQTopic advisoryDestination : advisoryDestinations) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,272,fireConsumerAdvisory(context,dest, topic, info.createRemoveCommand());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,280,DurableTopicSubscription sub = ((TopicRegion)((RegionBroker)next).getTopicRegion()).getDurableSubscription(key);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,308,if (!dest.isTemporary() || destinations.contains(dest)) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,309,fireProducerAdvisory(context, dest,topic, info.createRemoveCommand());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,318,if(!messageReference.isAdvisory()) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,335,if(!messageReference.isAdvisory()) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,339,fireAdvisory(context, topic,payload);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,354,fireAdvisory(context, topic,payload);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,371,advisoryMessage.setIntProperty(AdvisorySupport.MSG_PROPERTY_DISCARDED_COUNT, ((TopicSubscription)sub).discarded());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,382,public void slowConsumer(ConnectionContext context, Destination destination,Subscription subs) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,383,super.slowConsumer(context, destination,subs);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,397,public void fastProducer(ConnectionContext context,ProducerInfo producerInfo,ActiveMQDestination destination) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,437,fireAdvisory(context, topic,null,null,advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,449,if(!messageReference.isAdvisory()) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,453,fireAdvisory(context, topic,payload);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,466,if (brokerInfo != null) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,467,ActiveMQMessage advisoryMessage = new ActiveMQMessage();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,468,advisoryMessage.setBooleanProperty("started", true);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,469,advisoryMessage.setBooleanProperty("createdByDuplex", createdByDuplex);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,470,advisoryMessage.setStringProperty("remoteIp", remoteIp);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,471,networkBridges.putIfAbsent(brokerInfo, advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,473,ActiveMQTopic topic = AdvisorySupport.getNetworkBridgeAdvisoryTopic();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,475,ConnectionContext context = new ConnectionContext();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,476,context.setSecurityContext(SecurityContext.BROKER_SECURITY_CONTEXT);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,477,context.setBroker(getBrokerService().getBroker());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,478,fireAdvisory(context, topic, brokerInfo, null, advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,488,if (brokerInfo != null) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,489,ActiveMQMessage advisoryMessage = new ActiveMQMessage();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,490,advisoryMessage.setBooleanProperty("started", false);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,491,networkBridges.remove(brokerInfo);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,493,ActiveMQTopic topic = AdvisorySupport.getNetworkBridgeAdvisoryTopic();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,495,ConnectionContext context = new ConnectionContext();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,496,context.setSecurityContext(SecurityContext.BROKER_SECURITY_CONTEXT);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,497,context.setBroker(getBrokerService().getBroker());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,498,fireAdvisory(context, topic, brokerInfo, null, advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,519,protected void fireConsumerAdvisory(ConnectionContext context, ActiveMQDestination consumerDestination,ActiveMQTopic topic, Command command) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,520,fireConsumerAdvisory(context, consumerDestination,topic, command, null);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,523,protected void fireConsumerAdvisory(ConnectionContext context, ActiveMQDestination consumerDestination,ActiveMQTopic topic, Command command, ConsumerId targetConsumerId) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,526,Set<Destination>set = getDestinations(consumerDestination);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,528,for (Destination dest:set) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,537,protected void fireProducerAdvisory(ConnectionContext context,ActiveMQDestination producerDestination, ActiveMQTopic topic, Command command) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,538,fireProducerAdvisory(context,producerDestination, topic, command, null);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,541,protected void fireProducerAdvisory(ConnectionContext context, ActiveMQDestination producerDestination,ActiveMQTopic topic, Command command, ConsumerId targetConsumerId) throws Exception {
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,771,final PluggableSchemaResolver springResolver =
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,772,new PluggableSchemaResolver(getClass().getClassLoader());
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,773,final InputSource beanInputSource =
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,774,springResolver.resolveEntity(
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,777,if (beanInputSource != null) {
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,778,schemas.add(new StreamSource(beanInputSource.getByteStream()));
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,780,schemas.add(new StreamSource("http://www.springframework.org/schema/beans/spring-beans.xsd"));
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,97,broker.startAllConnectors();
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,98,LOG.info("Successfully restarted transports on " + broker);
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,100,LOG.warn("Stopping " + broker + " due to failure while restarting transports", e);
activemq-http/src/main/java/org/apache/activemq/transport/ws/MQTTSocket.java,38,public class MQTTSocket  extends TransportSupport implements WebSocket.OnBinaryMessage, MQTTTransport {
activemq-http/src/main/java/org/apache/activemq/transport/ws/MQTTSocket.java,42,MQTTProtocolConverter protocolConverter = new MQTTProtocolConverter(this, null);
activemq-http/src/main/java/org/apache/activemq/transport/ws/MQTTSocket.java,59,protocolConverter.onMQTTCommand(frame);
activemq-http/src/main/java/org/apache/activemq/transport/ws/MQTTSocket.java,73,protocolConverter.onMQTTCommand(new DISCONNECT().encode());
activemq-http/src/main/java/org/apache/activemq/transport/ws/MQTTSocket.java,104,protocolConverter.onActiveMQCommand((Command)command);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOTransportFactory.java,45,private BrokerContext brokerContext = null;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOTransportFactory.java,78,transport = new MQTTTransportFilter(transport, format, brokerContext);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOTransportFactory.java,84,this.brokerContext = brokerService.getBrokerContext();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,31,import org.apache.activemq.command.ActiveMQBytesMessage;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,32,import org.apache.activemq.command.ActiveMQDestination;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,33,import org.apache.activemq.command.ActiveMQMapMessage;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,34,import org.apache.activemq.command.ActiveMQMessage;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,35,import org.apache.activemq.command.ActiveMQTextMessage;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,36,import org.apache.activemq.command.ActiveMQTopic;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,37,import org.apache.activemq.command.Command;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,38,import org.apache.activemq.command.ConnectionError;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,39,import org.apache.activemq.command.ConnectionId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,40,import org.apache.activemq.command.ConnectionInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,41,import org.apache.activemq.command.ConsumerId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,42,import org.apache.activemq.command.ConsumerInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,43,import org.apache.activemq.command.ExceptionResponse;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,44,import org.apache.activemq.command.MessageAck;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,45,import org.apache.activemq.command.MessageDispatch;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,46,import org.apache.activemq.command.MessageId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,47,import org.apache.activemq.command.ProducerId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,48,import org.apache.activemq.command.ProducerInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,49,import org.apache.activemq.command.RemoveInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,50,import org.apache.activemq.command.Response;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,51,import org.apache.activemq.command.SessionId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,52,import org.apache.activemq.command.SessionInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,53,import org.apache.activemq.command.ShutdownInfo;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,116,public MQTTProtocolConverter(MQTTTransport mqttTransport, BrokerContext brokerContext) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,293,qos[i] = (byte) onSubscribe(command, topics[i]).ordinal();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,308,QoS onSubscribe(SUBSCRIBE command, Topic topic) throws MQTTProtocolException {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,309,ActiveMQDestination destination = new ActiveMQTopic(convertMQTTToActiveMQ(topic.name().toString()));
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,311,ConsumerId id = new ConsumerId(sessionId, consumerIdGenerator.getNextSequenceId());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,312,ConsumerInfo consumerInfo = new ConsumerInfo(id);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,313,consumerInfo.setDestination(destination);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,314,consumerInfo.setPrefetchSize(getActiveMQSubscriptionPrefetch());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,315,consumerInfo.setDispatchAsync(true);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,316,if (!connect.cleanSession() && (connect.clientId() != null)) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,318,consumerInfo.setSubscriptionName(
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,319,connect.clientId().toString() + topic.name().toString());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,321,MQTTSubscription mqttSubscription = new MQTTSubscription(this, topic.qos(), consumerInfo);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,323,subscriptionsByConsumerId.put(id, mqttSubscription);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,324,mqttSubscriptionByTopic.put(topic.name(), mqttSubscription);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,326,sendToActiveMQ(consumerInfo, null);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTSslTransportFactory.java,36,private BrokerContext brokerContext = null;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTSslTransportFactory.java,45,transport = new MQTTTransportFilter(transport, format, brokerContext);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTSslTransportFactory.java,64,this.brokerContext = brokerService.getBrokerContext();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFactory.java,36,private BrokerContext brokerContext = null;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFactory.java,44,transport = new MQTTTransportFilter(transport, format, brokerContext);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFactory.java,50,this.brokerContext = brokerService.getBrokerContext();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,53,public MQTTTransportFilter(Transport next, WireFormat wireFormat, BrokerContext brokerContext) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,55,this.protocolConverter = new MQTTProtocolConverter(this, brokerContext);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,717,private volatile LinkedList<Transaction> orderIndexUpdates = new LinkedList<Transaction>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,745,synchronized (sendLock) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,752,LinkedList<Transaction> orderedWork = new LinkedList<Transaction>();;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,754,synchronized (sendLock) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,755,Transaction next = orderIndexUpdates.peek();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,756,while( next!=null && next.isCommitted() ) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,757,orderedWork.addLast(orderIndexUpdates.removeFirst());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,758,next = orderIndexUpdates.peek();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,762,if (!orderedWork.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,764,ArrayList<SendSync> syncs = new ArrayList<SendSync>(orderedWork.size());;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,765,for (Transaction tx : orderedWork) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,766,syncs.add(sendSyncs.remove(tx));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,768,sendLock.lockInterruptibly();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,769,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,770,for (SendSync sync : syncs) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,771,sync.processSend();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,774,sendLock.unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,777,sync.processSent();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,820,final Transaction transaction = context.getTransaction();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,850,if (context.isInTransaction()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,865,if (!context.isInTransaction()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,193,LOG.trace(this + "{} - disabling cache, lastCachedId: {} current node Id: {} batchList size: {}", new Object[]{ this, lastCachedId, node.getMessageId(), batchList.size() });
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,290,+ ",maxBatchSize:" + maxBatchSize;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,129,if (protocolConverter != null) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,130,protocolConverter.onTransportError();
activemq-client/src/main/java/org/apache/activemq/filter/PrefixDestinationFilter.java,44,if (destination.getDestinationType() != destinationType) return false;
activemq-client/src/main/java/org/apache/activemq/filter/PrefixDestinationFilter.java,50,if (!path[i].equals(ANY_CHILD) && !prefixes[i].equals(ANY_CHILD) && !prefixes[i].equals(path[i])) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,69,answer.addAll((Set)value);
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,141,protected void setEntries(List<DestinationMapEntry>  entries) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,145,DestinationMapEntry entry = (DestinationMapEntry)element;
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,213,if (key.isTemporary()){
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,235,public boolean isEmpty(){
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,240,if ( candidates != null ) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,242,for (Iterator<Object> iterator = existing.iterator(); iterator.hasNext();) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/HsqldbJDBCAdapter.java,29,statements.setBinaryDataType("OTHER");
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,36,import org.apache.activemq.broker.Broker;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,37,import org.apache.activemq.broker.BrokerService;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,38,import org.apache.activemq.broker.Connection;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,39,import org.apache.activemq.broker.ConnectionContext;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,40,import org.apache.activemq.broker.ConsumerBrokerExchange;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,41,import org.apache.activemq.broker.EmptyBroker;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,42,import org.apache.activemq.broker.ProducerBrokerExchange;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,43,import org.apache.activemq.broker.TransportConnector;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,237,LOG.warn("Stealing link for clientId {} From Connection {}", clientId, oldContext.getConnection());
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,238,oldContext.getConnection().stop();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOSSLTransportFactory.java,41,return new TcpTransportServer(this, location, serverSocketFactory) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOTransportFactory.java,52,return new TcpTransportServer(this, location, serverSocketFactory) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,64,return configuration;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,67,public void setConfiguration(WebConsoleConfiguration configuration) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,68,this.configuration = configuration;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,79,throws IOException, MalformedObjectNameException {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,80,Set<ObjectName> brokers = findBrokers(connection);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,81,if (brokers.size() == 0) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,82,throw new IOException("No broker could be found in the JMX.");
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,84,ObjectName name = brokers.iterator().next();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,85,return name;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,91,Set brokers = findBrokers(connection);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,95,ObjectName name = (ObjectName)brokers.iterator().next();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,96,BrokerViewMBean mbean = (BrokerViewMBean)MBeanServerInvocationHandler.newProxyInstance(connection, name, BrokerViewMBean.class, true);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,100,public String getBrokerName() throws Exception,
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,101,MalformedObjectNameException {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,137,if (this.configuration.getJmxUser() != null) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,138,env.put("jmx.remote.credentials", new String[] {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,139,this.configuration.getJmxUser(),
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,140,this.configuration.getJmxPassword() });
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,145,for (JMXServiceURL url : jmxUrls) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,146,try {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,147,JMXConnector connector = JMXConnectorFactory.connect(url, env);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,148,connector.connect();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,149,MBeanServerConnection connection = connector
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,150,.getMBeanServerConnection();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,152,Set<ObjectName> brokers = findBrokers(connection);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,153,if (brokers.size() > 0) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,154,LOG.info("Connected via JMX to the broker at " + url);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,155,return connector;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,159,exception = e;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,162,if (exception != null) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,163,if (exception instanceof RuntimeException) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,164,throw (RuntimeException) exception;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,166,throw new RuntimeException(exception);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,169,throw new IllegalStateException("No broker is found at any of the "
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,170,+ jmxUrls.size() + " configured urls");
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,198,throws IOException, MalformedObjectNameException {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,199,ObjectName name;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,200,if (this.brokerName == null) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,201,name = new ObjectName("org.apache.activemq:type=Broker,brokerName=*");
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,203,name = new ObjectName("org.apache.activemq:brokerName="
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,204,+ this.brokerName + ",Type=broker");
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,207,Set<ObjectName> brokers = connection.queryNames(name, null);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,208,Set<ObjectName> masterBrokers = new HashSet<ObjectName>();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,209,for (ObjectName objectName : brokers) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,210,BrokerViewMBean mbean = (BrokerViewMBean)MBeanServerInvocationHandler.newProxyInstance(connection, objectName, BrokerViewMBean.class, true);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,211,if (!mbean.isSlave()) masterBrokers.add(objectName);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,213,return masterBrokers;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,216,public void purgeQueue(ActiveMQDestination destination) throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,217,QueueViewMBean queue = getQueue(destination.getPhysicalName());
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,218,queue.purge();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,221,public ManagementContext getManagementContext() {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,222,throw new IllegalStateException("not supported");
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,227,protected <T> Collection<T> getManagedObjects(ObjectName[] names,
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,228,Class<T> type) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,229,MBeanServerConnection connection;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,230,try {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,231,connection = getMBeanServerConnection();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,233,throw new RuntimeException(e);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,236,List<T> answer = new ArrayList<T>();
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,237,if (connection != null) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,238,for (int i = 0; i < names.length; i++) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,239,ObjectName name = names[i];
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,240,T value = (T) MBeanServerInvocationHandler.newProxyInstance(
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,241,connection, name, type, true);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,242,if (value != null) {
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,243,answer.add(value);
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,247,return answer;
activemq-web/src/main/java/org/apache/activemq/web/RemoteJMXBrokerFacade.java,256,public Object newProxyInstance(ObjectName objectName, Class interfaceClass,boolean notificationBroadcaster) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/InactiveDurableSubscriptionView.java,54,public long getSubcriptionId() {
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,31,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,32,import java.io.PrintWriter;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,33,import java.util.Collection;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,34,import java.util.HashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,35,import java.util.HashSet;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,36,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,37,import java.util.Map;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,38,import java.util.Set;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,39,import javax.management.ObjectName;
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,50,private String domain = "org.apache.activemq";
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,54,private Map<ProducerId, ProducerInfo> producers = new HashMap<ProducerId, ProducerInfo>();
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,55,private Map<ProducerId, Set<ActiveMQDestination>> producerDestinations = new HashMap<ProducerId, Set<ActiveMQDestination>>();
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,56,private Object lock = new Object();
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,216,String subscriberId = safeClientId + "_" + subscriber.getSessionId() + "_" + subscriber.getSubcriptionId();
activemq-broker/src/main/java/org/apache/activemq/broker/view/ConnectionDotFileInterceptor.java,231,String label = "Subscription: " + subscriber.getSessionId() + "-" + subscriber.getSubcriptionId();
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,21,import org.apache.activemq.command.*;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,26,import org.apache.activemq.store.*;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,32,import java.io.BufferedOutputStream;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,33,import java.io.File;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,34,import java.io.FileOutputStream;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,35,import java.io.IOException;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,36,import java.net.URI;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,37,import java.net.URISyntaxException;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,38,import java.util.HashMap;
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,51,private ObjectMapper mapper = new ObjectMapper();
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,169,jsonMap.put("name", sub.getClientId() + ":" + sub.getSubcriptionName());
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,183,topic.recoverSubscription(sub.getClientId(), sub.getSubcriptionName(), new MessageRecoveryListener() {
activemq-http/src/main/java/org/apache/activemq/transport/ws/WSServlet.java,54,if (protocol.startsWith("mqtt")) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,43,private boolean inTx;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,150,LOG.warn("Close failed: " + e.getMessage(), e);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,162,inTx = true;
activemq-broker/src/main/java/org/apache/activemq/filter/JAXPXPathEvaluator.java,35,private javax.xml.xpath.XPathExpression expression;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,25,import javax.xml.parsers.DocumentBuilder;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,26,import javax.xml.parsers.DocumentBuilderFactory;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,28,import org.w3c.dom.Document;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,29,import org.w3c.dom.traversal.NodeIterator;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,30,import org.xml.sax.InputSource;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,34,import org.apache.xpath.CachedXPathAPI;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,35,import org.apache.xpath.objects.XObject;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,40,private final String xpath;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,42,public XalanXPathEvaluator(String xpath) {
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,43,this.xpath = xpath;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,46,public boolean evaluate(Message m) throws JMSException {
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,47,if (m instanceof TextMessage) {
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,48,String text = ((TextMessage)m).getText();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,51,BytesMessage bm = (BytesMessage)m;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,64,DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,65,factory.setNamespaceAware(true);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,66,DocumentBuilder dbuilder = factory.newDocumentBuilder();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,67,Document doc = dbuilder.parse(inputSource);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,69,CachedXPathAPI cachedXPathAPI = new CachedXPathAPI();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,70,XObject result = cachedXPathAPI.eval(doc, xpath);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,72,return true;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,73,else {
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,74,NodeIterator iterator = cachedXPathAPI.selectNodeIterator(doc, xpath);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,75,return (iterator.nextNode() != null);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,87,DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,88,factory.setNamespaceAware(true);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,89,DocumentBuilder dbuilder = factory.newDocumentBuilder();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,90,Document doc = dbuilder.parse(inputSource);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,97,CachedXPathAPI cachedXPathAPI = new CachedXPathAPI();
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,98,XObject result = cachedXPathAPI.eval(doc, xpath);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,100,return true;
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,101,else {
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,102,NodeIterator iterator = cachedXPathAPI.selectNodeIterator(doc, xpath);
activemq-broker/src/main/java/org/apache/activemq/filter/XalanXPathEvaluator.java,103,return (iterator.nextNode() != null);
activemq-camel/src/main/java/org/apache/activemq/camel/component/ActiveMQComponent.java,84,answer.setConnectionFactory(new ActiveMQConnectionFactory(brokerURL));
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,24,import java.util.HashMap;
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,35,private static final HashMap<String, Class> primClasses = new HashMap<String, Class>(8, 1.0F);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,77,return Class.forName(className, false, loader);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,83,final Class<?> clazz = (Class<?>) primClasses.get(className);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,84,if (clazz != null) {
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,85,return clazz;
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,87,return Class.forName(className, false, FALLBACK_CLASS_LOADER);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,91,static {
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,92,primClasses.put("boolean", boolean.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,93,primClasses.put("byte", byte.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,94,primClasses.put("char", char.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,95,primClasses.put("short", short.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,96,primClasses.put("int", int.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,97,primClasses.put("long", long.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,98,primClasses.put("float", float.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,99,primClasses.put("double", double.class);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,100,primClasses.put("void", void.class);
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,228,NameParser parser = context.getNameParser("");
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,229,Name contextName = parser.parse(context.getNameInNamespace());
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,230,Name baseName = parser.parse(getLDAPPropertyValue(USER_BASE));
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,231,Name entryName = parser.parse(result.getName());
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,232,Name name = contextName.addAll(baseName);
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,233,name = name.addAll(entryName);
activemq-jaas/src/main/java/org/apache/activemq/jaas/LDAPLoginModule.java,234,String dn = name.toString();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/AbstractJDBCLocker.java,32,protected Statements statements;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/AbstractJDBCLocker.java,40,this.statements = ((JDBCPersistenceAdapter) adapter).getStatements();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/AbstractJDBCLocker.java,97,String[] createStatements = this.statements.getCreateLockSchemaStatements();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/DefaultDatabaseLocker.java,47,String sql = statements.getLockCreateStatement();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/DefaultDatabaseLocker.java,161,lockUpdateStatement = connection.prepareStatement(statements.getLockUpdateStatement());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,55,String sql = statements.getLeaseObtainStatement();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,104,statement = connection.prepareStatement(statements.getLeaseOwnerStatement());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,126,PreparedStatement statement = connection.prepareStatement(statements.getCurrentDateTime());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,154,statement = connection.prepareStatement(statements.getLeaseUpdateStatement());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,172,final String sql = statements.getLeaseUpdateStatement();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/TransactDatabaseLocker.java,48,String sql = statements.getLockCreateStatement();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1912,if (storeLimit > dirFreeSpace) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1917,dirFreeSpace / (1024 * 1024) + " mb");
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1918,usage.getStoreUsage().setLimit(dirFreeSpace);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/CallerBufferingDataFileAppender.java,85,RandomAccessFile file = null;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFile.java,70,public synchronized RandomAccessFile openRandomAccessFile() throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFile.java,71,return new RandomAccessFile(file.getCanonicalPath(), "rw");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFile.java,74,public synchronized void closeRandomAccessFile(RandomAccessFile file) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessor.java,35,private final RandomAccessFile file;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,280,RandomAccessFile file = null;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,45,import org.apache.activemq.util.DataByteArrayOutputStream;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,46,import org.apache.activemq.util.IOExceptionSupport;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,47,import org.apache.activemq.util.IOHelper;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,48,import org.apache.activemq.util.IntrospectionSupport;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,49,import org.apache.activemq.util.LFUCache;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,50,import org.apache.activemq.util.LRUCache;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,88,private RandomAccessFile readFile;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,90,private RandomAccessFile writeFile;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,92,private RandomAccessFile recoveryFile;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,380,writeFile = new RandomAccessFile(file, "rw");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,381,readFile = new RandomAccessFile(file, "r");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,400,recoveryFile = new RandomAccessFile(getRecoveryFile(), "rw");
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,78,context.printException(new RuntimeException("Failed to execute dstat task. Reason: " + e));
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,86,List<?> queueList = JmxMBeansUtil.queryMBeans(createJmxConnection(), query);
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,95,ObjectName queueName = ((ObjectInstance)view).getObjectName();
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,113,List<?> queueList = JmxMBeansUtil.queryMBeans(createJmxConnection(), query);
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,122,ObjectName queueName = ((ObjectInstance)view).getObjectName();
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,140,List<?> topicsList = JmxMBeansUtil.queryMBeans(createJmxConnection(), query);
activemq-console/src/main/java/org/apache/activemq/console/command/DstatCommand.java,149,ObjectName topicName = ((ObjectInstance)view).getObjectName();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2064,protected void registerNetworkConnectorMBean(NetworkConnector connector) throws IOException {
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,660,Node brokerRootNode = doc.getElementsByTagName("broker").item(0);
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,662,JAXBElement<DtoBroker> brokerJAXBElement =
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,663,unMarshaller.unmarshal(brokerRootNode, DtoBroker.class);
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,664,jaxbConfig = brokerJAXBElement.getValue();
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,667,lastModified = configToMonitor.lastModified();
activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java,669,loadPropertiesPlaceHolderSupport(doc);
activemq-http/src/main/java/org/apache/activemq/transport/ws/StompSocket.java,126,return null;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,289,return this.maxBrowsePageSize;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1608,if (!node.isAcked() && !browser.isDuplicate(node.getMessageId())) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1617,if (!added) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,650,if (tracked == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,351,for (Iterator iter = headers.entrySet().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,352,Map.Entry entry = (Map.Entry) iter.next();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,353,msg.setObjectProperty((String) entry.getKey(), entry.getValue());
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,373,connection.close();
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,92,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,93,final BooleanExpression expression = getExpression(selector);
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,94,matches = expression.matches(msgContext);
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,96,LOG.error(e.getMessage(), e);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,46,return load(classDesc.getName(), cl, inLoader);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,57,return Proxy.getProxyClass(cl, cinterfaces);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,60,return Proxy.getProxyClass(inLoader, cinterfaces);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,65,return Proxy.getProxyClass(FALLBACK_CLASS_LOADER, cinterfaces);
activemq-client/src/main/java/org/apache/activemq/util/ClassLoadingAwareObjectInputStream.java,70,throw new ClassNotFoundException(null, e);
activemq-http/src/main/java/org/apache/activemq/transport/xstream/XStreamWireFormat.java,92,public XStream getXStream() {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/JmsFrameTranslator.java,255,xstream = new XStream();
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,86,return e;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,246,InputStream in = null;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,248,if ((in = BrokerService.class.getResourceAsStream("/org/apache/activemq/version.txt")) != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,249,BufferedReader reader = new BufferedReader(new InputStreamReader(in));
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,250,try {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,251,version = reader.readLine();
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,41,Map properties = loadProperties(brokerURI);
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,51,protected Map loadProperties(URI brokerURI) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,58,if (file.exists()) {
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,75,if (inputStream != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,76,properties.load(inputStream);
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,77,inputStream.close();
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,81,try {
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,82,Properties systemProperties = System.getProperties();
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,83,properties.putAll(systemProperties);
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,87,return properties;
activemq-broker/src/main/java/org/apache/activemq/broker/PropertiesBrokerFactory.java,98,protected BrokerService createBrokerService(URI brokerURI, Map properties) {
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,263,byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,264,int len = in.read(buffer);
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,265,while (len >= 0) {
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,266,out.write(buffer, 0, len);
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,267,len = in.read(buffer);
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,269,in.close();
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,270,out.close();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,130,InputStream tsStream = getInputStream(trustStore);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,132,trustedCertStore.load(tsStream, trustStorePassword.toCharArray());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,133,TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,135,tmf.init(trustedCertStore);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,136,trustStoreManagers = tmf.getTrustManagers();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,149,ByteArrayInputStream bin = new ByteArrayInputStream(sslCert);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,150,ks.load(bin, keyStorePassword.toCharArray());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,152,keystoreManagers = kmf.getKeyManagers();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,162,InputStream in = getInputStream(fileName);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,163,ByteArrayOutputStream out = new ByteArrayOutputStream();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,164,byte[] buf = new byte[512];
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,165,int i = in.read(buf);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,166,while (i > 0) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,167,out.write(buf, 0, i);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,168,i = in.read(buf);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,170,in.close();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSslConnectionFactory.java,171,return out.toByteArray();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,43,return uploadStream(message, new FileInputStream(file));
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,58,OutputStream os = connection.getOutputStream();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,60,byte[] buf = new byte[transferPolicy.getBufferSize()];
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,61,for (int c = fis.read(buf); c != -1; c = fis.read(buf)) {
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,62,os.write(buf, 0, c);
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,63,os.flush();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,65,os.close();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,66,fis.close();
activemq-client/src/main/java/org/apache/activemq/blob/FTPBlobUploadStrategy.java,42,return uploadStream(message, new FileInputStream(file));
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,68,return uploadStream(message, new FileInputStream(file));
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,77,FileOutputStream out = new FileOutputStream(f);
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,78,byte[] buffer = new byte[policy.getBufferSize()];
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,79,for (int c = in.read(buffer); c != -1; c = in.read(buffer)) {
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,80,out.write(buffer, 0, c);
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,81,out.flush();
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,83,out.flush();
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,84,out.close();
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,126,String fileName = message.getJMSMessageID().replaceAll(":", "_");
activemq-client/src/main/java/org/apache/activemq/blob/FileSystemBlobStrategy.java,127,return new File(rootFile, fileName);
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,108,byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,109,int len = in.read(buffer);
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,110,while (len >= 0) {
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,111,out.write(buffer, 0, len);
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,112,len = in.read(buffer);
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,114,in.close();
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,115,out.close();
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,119,MAX_DIR_NAME_LENGTH = Integer.valueOf(System.getProperty("MaximumDirNameLength","200")).intValue();
activemq-fileserver/src/main/java/org/apache/activemq/util/IOHelper.java,120,MAX_FILE_NAME_LENGTH = Integer.valueOf(System.getProperty("MaximumFileNameLength","64")).intValue();
activemq-jaas/src/main/java/org/apache/activemq/jaas/TextFileCertificateLoginModule.java,91,try {
activemq-jaas/src/main/java/org/apache/activemq/jaas/TextFileCertificateLoginModule.java,92,java.io.FileInputStream in = new java.io.FileInputStream(usersFile);
activemq-jaas/src/main/java/org/apache/activemq/jaas/TextFileCertificateLoginModule.java,94,in.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,142,InputStream is = blob.getBinaryStream();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,144,ByteArrayOutputStream os = new ByteArrayOutputStream((int)blob.length());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,145,int ch;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,146,while ((ch = is.read()) >= 0) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,147,os.write(ch);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,149,is.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,150,os.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,152,return os.toByteArray();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/StreamJDBCAdapter.java,50,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/StreamJDBCAdapter.java,51,InputStream is = rs.getBinaryStream(index);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/StreamJDBCAdapter.java,52,ByteArrayOutputStream os = new ByteArrayOutputStream(1024 * 4);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/StreamJDBCAdapter.java,58,is.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/StreamJDBCAdapter.java,59,os.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,198,RandomAccessFile file = new RandomAccessFile(tmpFile, "r");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,199,file.seek(diskBoundLocation);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,200,file.read(diskBound);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,201,file.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,20,import java.io.IOException;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,214,RandomAccessFile raf = new RandomAccessFile(file, "rw");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,215,raf.setLength(size);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,218,long start = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,219,long now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,223,break;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,225,raf.seek(0);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,227,raf.write(data);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,228,ioCount++;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,229,now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,239,raf.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,246,raf = new RandomAccessFile(file, "rw");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,247,start = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,248,now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,252,break;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,255,raf.seek(i);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,256,raf.write(data);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,258,ioCount++;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,259,now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,265,raf.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,270,raf = new RandomAccessFile(file, "rw");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,271,start = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,272,now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,276,break;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,278,raf.seek(0);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,280,raf.seek(i);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,281,raf.readFully(data);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,282,ioCount++;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,283,now = System.currentTimeMillis();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,289,raf.close();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,60,InputStream in = null;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,62,if ((in = ProtocolConverter.class.getResourceAsStream("/org/apache/activemq/version.txt")) != null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,63,BufferedReader reader = new BufferedReader(new InputStreamReader(in));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,64,try {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,65,version = reader.readLine();
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClientSystem.java,265,LOG.info("Loading properties file: " + configFile.getAbsolutePath());
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClientSystem.java,266,fileProps.load(new FileInputStream(configFile));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,198,BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(tempLogFile)));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,199,String line;
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,200,while ((line = reader.readLine()) != null) {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,201,if (line.startsWith("[TP-DATA]")) {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,202,handleCsvData(REPORT_PLUGIN_THROUGHPUT, line.substring("[TP-DATA]".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,203,parsePerfCsvData("tpdata", line.substring("[TP-DATA]".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,205,handleCsvData(REPORT_PLUGIN_CPU, line.substring("[CPU-DATA]".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,206,parsePerfCsvData("cpudata", line.substring("[CPU-DATA]".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,208,xmlFileWriter.println("<info>" + line + "</info>");
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/reports/XmlFilePerfReportWriter.java,210,xmlFileWriter.println("<error>" + line + "</error>");
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,67,InputStream in = Thread.currentThread().getContextClassLoader().getResourceAsStream(resource);
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,68,if (in != null) {
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,69,ByteArrayOutputStream out = new ByteArrayOutputStream();
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,70,byte[] buf = new byte[4096];
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,71,int len = in.read(buf);
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,72,while (len >= 0) {
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,73,out.write(buf, 0, len);
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,74,len = in.read(buf);
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,76,in.close();
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,77,out.close();
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,78,data = out.toByteArray();
activemq-web/src/main/java/org/apache/activemq/web/AjaxServlet.java,79,jsCache.put(resource, data);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,327,CronEntry dayOfMonth = new CronEntry("DayOfMonth", tokens.get(DAY_OF_MONTH), 1, 31);
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,143,long delay = ( redeliveryCount == 0 ?
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,144,redeliveryPolicy.getInitialRedeliveryDelay() :
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,145,redeliveryPolicy.getNextRedeliveryDelay(getExistingDelay(messageReference)));
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,203,private int getExistingDelay(MessageReference messageReference) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,204,Object val = messageReference.getMessage().getProperty(REDELIVERY_DELAY);
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,205,if (val instanceof Long) {
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,206,return ((Long)val).intValue();
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,208,return 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,31,import org.apache.activemq.DestinationDoesNotExistException;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractSubscription.java,259,return getDispatchedQueueSize() - info.getPrefetchSize();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,631,destination.getDestinationStatistics().getDispatched().subtract(references.size());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,877,md.getMessage().onMessageRolledBack();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,883,&& redeliveryCounter > redeliveryPolicy.getMaximumRedeliveries()) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,19,import java.util.Map;
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,29,import org.apache.camel.converter.ObjectConverter;
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,87,private ActiveMQMessage getMessage(Exchange exchange) throws Exception {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,105,if (jmsMessage.getJmsMessage() instanceof ActiveMQMessage) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,106,result = (ActiveMQMessage) jmsMessage.getJmsMessage();
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,108,setJmsHeaders(result, headers);
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,116,return result;
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,119,private void setJmsHeaders(ActiveMQMessage message, Map<String, Object> headers) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,120,message.setReadOnlyProperties(false);
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,122,if (entry.getKey().equalsIgnoreCase("JMSDeliveryMode")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,123,Object value = entry.getValue();
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,124,if (value instanceof Number) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,125,Number number = (Number) value;
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,126,message.setJMSDeliveryMode(number.intValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,129,if (entry.getKey().equalsIgnoreCase("JmsPriority")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,130,Integer value = ObjectConverter.toInteger(entry.getValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,131,if (value != null) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,132,message.setJMSPriority(value.intValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,135,if (entry.getKey().equalsIgnoreCase("JMSTimestamp")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,136,Long value = ObjectConverter.toLong(entry.getValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,137,if (value != null) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,138,message.setJMSTimestamp(value.longValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,141,if (entry.getKey().equalsIgnoreCase("JMSExpiration")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,142,Long value = ObjectConverter.toLong(entry.getValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,143,if (value != null) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,144,message.setJMSExpiration(value.longValue());
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,147,if (entry.getKey().equalsIgnoreCase("JMSRedelivered")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,148,message.setJMSRedelivered(ObjectConverter.toBool(entry.getValue()));
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,150,if (entry.getKey().equalsIgnoreCase("JMSType")) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,151,Object value = entry.getValue();
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,152,if (value != null) {
activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java,153,message.setJMSType(value.toString());
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,22,import java.io.BufferedReader;
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,25,import java.util.ArrayList;
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,54,private final ConcurrentHashMap<String, Class> serviceCache = new ConcurrentHashMap<String, Class>();
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,106,if( !isImportingUs(bundle) ) {
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,107,debug("The bundle does not import us: "+ bundle.getBundleId());
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,108,return;
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,110,bundleWrappers.put(bundle.getBundleId(), new BundleWrapper(bundle));
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,137,Class clazz = serviceCache.get(path);
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,209,|| isImportingClass(bundle, PersistenceAdapter.class);
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,212,private boolean isImportingClass(Bundle bundle, Class clazz) {
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,213,try {
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,214,return bundle.loadClass(clazz.getName())==clazz;
activemq-broker/src/main/java/org/apache/activemq/util/osgi/Activator.java,216,return false;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,60,List<PersistenceAdapter> adapters = new LinkedList<PersistenceAdapter>();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCAdapter.java,107,void doCommitAddOp(TransactionContext c, long storeSequenceIdForMessageId) throws SQLException, IOException;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,124,this.isPrioritizedMessages() ? message.getPriority() : 0, context != null ? context.getXid() : null);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,773,public void commitAdd(ConnectionContext context, MessageId messageId) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,777,getAdapter().doCommitAddOp(c, sequence);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,91,updateFromPreparedStateCommands.add(new AddMessageCommand() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,93,public Message getMessage() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,94,return addMessageCommand.getMessage();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,98,public MessageStore getMessageStore() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,99,return addMessageCommand.getMessageStore();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,103,public void run(ConnectionContext context) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,104,JDBCPersistenceAdapter jdbcPersistenceAdapter = (JDBCPersistenceAdapter) persistenceAdapter;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,105,Message message = addMessageCommand.getMessage();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,106,jdbcPersistenceAdapter.commitAdd(context, message.getMessageId());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,107,((JDBCMessageStore)addMessageCommand.getMessageStore()).onAdd(
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,110,message.getPriority());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,115,tx.messages = updateFromPreparedStateCommands;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,116,preparedTransactions.put(txid, tx);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,145,((JDBCPersistenceAdapter) persistenceAdapter).commitAdd(ctx,
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,146,removeMessageCommand.getMessageAck().getLastMessageId());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,168,tx.add(new AddMessageCommand() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,170,public Message getMessage() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,171,return message;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,175,public MessageStore getMessageStore() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,180,public void run(ConnectionContext context) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,181,((JDBCPersistenceAdapter)persistenceAdapter).commitAdd(null, message.getMessageId());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,620,+ " SET XID = NULL WHERE ID = ?";
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1000,public void doCommitAddOp(TransactionContext c, long sequence) throws SQLException, IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1612,final TreeSet<Integer> gcCandidates = new TreeSet<Integer>(gcCandidateSet);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1619,if (completeFileSet.contains(referencedFileId) && !gcCandidates.contains(referencedFileId)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,591,public void preProcessDispatch(MessageDispatch messageDispatch) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,592,Message message = messageDispatch.getMessage();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1107,processRemoveConnection(cs.getInfo().getConnectionId(), 0l);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,24,import javax.jms.Connection;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,25,import javax.jms.JMSException;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,26,import javax.jms.Session;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,43,public class ConnectionPool {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1892,LOG.error("Memory Usage for the Broker (" + memLimit / (1024 * 1024) +
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1952,LOG.error("Temporary Store limit is " + storeLimit / (1024 * 1024) +
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,109,if (!isFull() && matched.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,112,dispatch(node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,113,setSlowConsumer(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,115,if (info.getPrefetchSize() > 1 && matched.size() > info.getPrefetchSize()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,117,if (!isSlowConsumer()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,118,LOG.warn("{}: has twice its prefetch limit pending, without an ack; it appears to be slow", toString());
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,119,setSlowConsumer(true);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,120,for (Destination dest: destinations) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,121,dest.slowConsumer(getContext(), this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,125,if (maximumPendingMessages != 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,126,boolean warnedAboutWait = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,127,while (active) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,128,synchronized (matchedListMutex) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,154,synchronized (matchedListMutex) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,199,dispatchMatched();
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,186,public void deactivate(boolean keepDurableSubsActive) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,216,Integer count = redeliveredMessages.get(node.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,217,if (count != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,218,redeliveredMessages.put(node.getMessageId(), Integer.valueOf(count.intValue() + 1));
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,220,redeliveredMessages.put(node.getMessageId(), Integer.valueOf(1));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,522,if (lastDeiveredSequenceId != 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,527,LOG.debug("found lastDeliveredSeqID: {}, message reference: {}", lastDeiveredSequenceId, ref.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,206,removed.deactivate(false);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,150,private long lastDeliveredSequenceId;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,51,private final AtomicBoolean monitorStarted = new AtomicBoolean(false);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,62,private boolean keepAliveResponseRequired;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,101,startMonitorThread();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,105,stopMonitorThread();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,174,stopMonitorThread();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,195,public boolean isKeepAliveResponseRequired() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,196,return this.keepAliveResponseRequired;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,199,public void setKeepAliveResponseRequired(boolean value) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,200,this.keepAliveResponseRequired = value;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,203,public boolean isMonitorStarted() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,204,return this.monitorStarted.get();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,215,synchronized void startMonitorThread() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,218,if (protocolConverter == null) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,219,return;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,222,if (monitorStarted.get()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,223,return;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,231,monitorStarted.set(true);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,245,synchronized void stopMonitorThread() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,246,if (monitorStarted.compareAndSet(true, false)) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,247,if (readCheckerTask != null) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTInactivityMonitor.java,248,readCheckerTask.cancel();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,591,monitor.startMonitorThread();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,110,if( stopped.compareAndSet(false, true) ) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,967,if (checkpointThread != null && !checkpointThread.isAlive()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,238,if (getPrefetchSize() == 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,240,while (true) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,241,int currentExtension = prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,242,int newExtension = Math.max(0, currentExtension - index);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,243,if (prefetchExtension.compareAndSet(currentExtension, newExtension)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,244,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,249,while (true) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,250,int currentExtension = prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,251,int newExtension = Math.max(currentExtension, index);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,252,if (prefetchExtension.compareAndSet(currentExtension, newExtension)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,253,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,287,while (true) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,288,int currentExtension = prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,289,int newExtension = Math.max(0, currentExtension - 1);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,290,if (prefetchExtension.compareAndSet(currentExtension, newExtension)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,291,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,316,if (usePrefetchExtension) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,519,return dispatched.size() - prefetchExtension.get() >= info.getPrefetchSize();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,540,return info.getPrefetchSize() + prefetchExtension.get() - dispatched.size();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnectionFactory.java,119,private boolean messagePrioritySupported = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/group/CachedMessageGroupMap.java,35,cache = new LRUMap<String, ConsumerId>(size);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,122,if (sub.isActive()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,123,throw new JMSException("Durable consumer is in use for client: " + clientId + " and subscriptionName: " + subscriptionName);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,156,+ " subscriberName: " + key.getSubscriptionName());
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,173,sub.deactivate(keepDurableSubsActive);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpHeader.java,39,setBuffer(buffer);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpHeader.java,83,return buffer.toString();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,237,amqpTransport.getWireFormat().magicRead = false;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,241,amqpTransport.getWireFormat().magicRead = false;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,54,boolean magicRead = false;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpWireFormat.java,60,return new AmqpHeader(magic);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,204,private boolean messagePrioritySupported = true;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,269,this.transactedIndividualAck = session.connection.isTransactedIndividualAck() || this.nonBlockingRedelivery;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,203,long x = s1.getConsumerInfo().getLastDeliveredSequenceId();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,204,long y = s2.getConsumerInfo().getLastDeliveredSequenceId();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,405,LOG.debug("{} add sub: {}, dequeues: {}, dispatched: {}, inflight: {}", new Object[]{ getActiveMQDestination().getQualifiedName(), getDestinationStatistics().getDequeues().getCount(), getDestinationStatistics().getDispatched().getCount(), getDestinationStatistics().getInflight().getCount() });
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,476,LOG.debug("{} remove sub: {}, lastDeliveredSeqId: {}, dequeues: {}, dispatched: {}, inflight: {}", new Object[]{
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1972,consumersLock.writeLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1981,consumersLock.writeLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2066,subscription.getConsumerInfo().setLastDeliveredSequenceId(subscription.getConsumerInfo().getLastDeliveredSequenceId() - 1);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2082,subs.getConsumerInfo().setLastDeliveredSequenceId(subs.getConsumerInfo().getLastDeliveredSequenceId() + 1);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFile.java,83,IOHelper.moveFile(file,targetDirectory);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,23,import java.util.ArrayList;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,24,import java.util.Collections;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,25,import java.util.HashMap;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,26,import java.util.Iterator;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,27,import java.util.LinkedHashMap;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,28,import java.util.List;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,29,import java.util.Map;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,30,import java.util.Set;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,31,import java.util.Timer;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,32,import java.util.TimerTask;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,33,import java.util.TreeMap;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,98,protected File directoryArchive = new File(DEFAULT_ARCHIVE_DIRECTORY);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,437,dataFile.move(getDirectoryArchive());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,438,LOG.debug("moved data file " + dataFile + " to " + getDirectoryArchive());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,441,LOG.debug("Discarded data file " + dataFile);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,443,LOG.warn("Failed to discard data file " + dataFile.getFile());
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1368,Transport t = transport;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1369,if (null != t){
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1370,ServiceSupport.dispose(t);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1411,Transport t = this.transport;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1412,if (null != t){
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1413,ServiceSupport.dispose(t);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransport.java,203,IOException ioe=new IOException("Unexpected error occured: " + e);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1011,MessageDispatch md = dispatchedInTx.getFirst();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1012,MessageAck pendingTxAck = new MessageAck(md, MessageAck.STANDARD_ACK_TYPE, dispatchedInTx.size());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1013,pendingTxAck.setTransactionId(md.getMessage().getTransactionId());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1014,pendingTxAck.setFirstMessageId(dispatchedInTx.getLast().getMessage().getMessageId());
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1016,LOG.trace("Sending commit Ack to ActiveMQ: {}", pendingTxAck);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1018,dispatchedInTx.clear();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1020,sendToActiveMQ(pendingTxAck, new ResponseHandler() {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1022,public void onResponse(IAmqpProtocolConverter converter, Response response) throws IOException {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1023,if (response.isException()) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1025,Throwable exception = ((ExceptionResponse) response).getException();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1026,exception.printStackTrace();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1027,sender.close();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1030,pumpProtonToSocket();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,61,import org.apache.qpid.proton.amqp.messaging.Accepted;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,62,import org.apache.qpid.proton.amqp.messaging.AmqpValue;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,63,import org.apache.qpid.proton.amqp.messaging.Modified;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,64,import org.apache.qpid.proton.amqp.messaging.Rejected;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,65,import org.apache.qpid.proton.amqp.messaging.Released;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,66,import org.apache.qpid.proton.amqp.messaging.Target;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,67,import org.apache.qpid.proton.amqp.messaging.TerminusDurability;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,803,sendToActiveMQ(new RemoveInfo(consumerId), null);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,56,private AtomicBoolean failed = new AtomicBoolean(false);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,62,public SimpleDiscoveryEvent(SimpleDiscoveryEvent copy) {
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,63,super(copy);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,64,connectFailures = copy.connectFailures;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,65,reconnectDelay = copy.reconnectDelay;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,66,connectTime = copy.connectTime;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,67,failed.set(copy.failed.get());
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,96,taskRunner.shutdown();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,957,if (txState.getOutcome() instanceof DeliveryState) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,959,LOG.trace("onDelivery: TX delivery state = {}", state);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,961,state = (DeliveryState) txState.getOutcome();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,963,if (state instanceof Accepted) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,965,delivery.disposition(new Accepted());
activemq-client/src/main/java/org/apache/activemq/filter/AnyDestination.java,31,physicalName = "0";
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,347,AckEntry pendingAck = this.pedingAcks.get(ackId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,404,AckEntry pendingAck = this.pedingAcks.get(ackId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,21,import java.util.LinkedList;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,43,private final List<Destination> destinations = new LinkedList<Destination>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,86,for (Destination destination : destinations) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,99,destinations.removeAll(disposed);
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,167,this.destinations.add(destination);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,856,broker.preProcessDispatch(messageDispatch);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1936,if (!pagedInPendingDispatch.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1939,pagedInPendingDispatch = doActualDispatch(pagedInPendingDispatch);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1944,if (list != null && !list.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1945,if (pagedInPendingDispatch.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1946,pagedInPendingDispatch.addAll(doActualDispatch(list));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1948,for (MessageReference qmr : list) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1949,if (!pagedInPendingDispatch.contains(qmr)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1950,pagedInPendingDispatch.addMessageLast(qmr);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1953,doWakeUp = true;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1298,metadata.lastUpdate = location;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1345,metadata.lastUpdate = ackLocation;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,944,+ ", memory=" + memoryUsage.getPercentUsage() + "%, size=" + size + ", in flight groups="
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,945,+ messageGroupOwners;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1849,destination.getPhysicalName(),
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,312,LOG.trace(destination.getPhysicalName() + " resetBatching, existing last recovered seqId: " + lastRecoveredSequenceId.get());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1189,messagesLock.readLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1206,messagesLock.readLock().unlock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2708,MessageOrderCursor cursor = new MessageOrderCursor();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2809,if (highPriorityIndex.containsKey(tx, sequence)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2810,lastHighKey = sequence;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2811,cursor.highPriorityCursorPosition = nextPosition.longValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2813,lastLowKey = sequence;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2814,cursor.lowPriorityCursorPosition = nextPosition.longValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2817,LOG.warn("setBatch: sequence " + sequence + " not found in orderindex:" + this);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,31,import org.apache.activemq.command.ActiveMQDestination;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,32,import org.apache.activemq.command.ActiveMQMessage;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,33,import org.apache.activemq.command.ActiveMQTempQueue;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,34,import org.apache.activemq.command.Command;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,35,import org.apache.activemq.command.ConnectionError;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,36,import org.apache.activemq.command.ConnectionId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,37,import org.apache.activemq.command.ConnectionInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,38,import org.apache.activemq.command.ConsumerId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,39,import org.apache.activemq.command.ConsumerInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,40,import org.apache.activemq.command.DestinationInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,41,import org.apache.activemq.command.ExceptionResponse;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,42,import org.apache.activemq.command.LocalTransactionId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,43,import org.apache.activemq.command.MessageAck;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,44,import org.apache.activemq.command.MessageDispatch;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,45,import org.apache.activemq.command.MessageId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,46,import org.apache.activemq.command.ProducerId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,47,import org.apache.activemq.command.ProducerInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,48,import org.apache.activemq.command.RemoveInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,49,import org.apache.activemq.command.RemoveSubscriptionInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,50,import org.apache.activemq.command.Response;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,51,import org.apache.activemq.command.SessionId;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,52,import org.apache.activemq.command.SessionInfo;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,53,import org.apache.activemq.command.TransactionInfo;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,232,ConnectionContext oldContext = clientIdSet.get(clientId);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1109,sender.open();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTSubscription.java,48,return new MessageAck(md, MessageAck.STANDARD_ACK_TYPE, 1);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,92,storeHasMessages = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,263,this.storeHasMessages = !this.batchList.isEmpty() || !hadSpace;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1709,private final HashMap<String, StoredDestination> storedDestinations = new HashMap<String, StoredDestination>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2271,private String key(KahaDestination destination) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,234,if (context.isAllowLinkStealing()){
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,235,clientIdSet.remove(clientId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,236,if (oldContext.getConnection() != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,240,LOG.error("Not Connection for {}", oldContext);
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,244,+ oldContext.getConnection().getRemoteAddress());
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,58,public static final int MAX_AUDIT_DEPTH = 2048;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,79,private static final int MAX_ASYNC_JOBS = 10000;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,322,long[] storedValues = persistenceAdapter.getStoreSequenceIdForMessageId(messageId, destination);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,836,long[] getStoreSequenceIdForMessageId(MessageId messageId, ActiveMQDestination destination) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,838,TransactionContext c = getTransactionContext();
activemq-web/src/main/java/org/apache/activemq/web/AjaxListener.java,68,if (!continuation.isResumed() && !continuation.isInitial()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,44,import org.apache.activemq.broker.region.Destination;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,45,import org.apache.activemq.broker.region.RegionBroker;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,456,KahaAddMessageCommand command = new KahaAddMessageCommand();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,637,final String key = identity.toProducerKey();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,638,lockAsyncJobQueue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,644,indexLock.writeLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,645,try {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,646,pageFile.tx().execute(new Transaction.Closure<IOException>() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,648,public void execute(Transaction tx) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,649,StoredDestination sd = getStoredDestination(dest, tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,650,Long location = sd.messageIdIndex.get(tx, key);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,651,if (location != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,652,sd.orderIndex.setBatch(tx, location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,657,indexLock.writeLock().unlock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,660,unlockAsyncJobQueue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,678,this.localDestinationSemaphore.tryAcquire(this.maxAsyncJobs, 60, TimeUnit.SECONDS);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,683,receiver.flow(prefetch);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,703,receiver.flow(prefetch);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java,1136,consumerInfo.setPrefetchSize(100);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1170,if (ref.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueSubscription.java,56,if (n.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueSubscription.java,58,if (!broker.isExpired(n)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueSubscription.java,59,LOG.debug("ignoring ack {}, for already expired message: {}", ack, n);
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueSubscription.java,60,return;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,22,import java.util.concurrent.ConcurrentHashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,28,import java.util.concurrent.Future;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,66,import org.apache.activemq.transaction.Transaction;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,79,public class Queue extends BaseDestination implements Task, UsageListener {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,716,final ConcurrentHashMap<Transaction, SendSync> sendSyncs = new ConcurrentHashMap<Transaction, SendSync>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,720,class SendSync extends Synchronization {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,722,class MessageContext {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,723,public Message message;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,724,public ConnectionContext context;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,726,public MessageContext(ConnectionContext context, Message message) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,727,this.context = context;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,728,this.message = message;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,732,final Transaction transaction;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,733,List<MessageContext> additions = new ArrayList<MessageContext>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,735,public SendSync(Transaction transaction) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,736,this.transaction = transaction;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,739,public void add(ConnectionContext context, Message message) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,740,additions.add(new MessageContext(context, message));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,744,public void beforeCommit() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,746,orderIndexUpdates.addLast(transaction);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,751,public void afterCommit() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,776,for (SendSync sync : syncs) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,783,private void processSend() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,785,for (Iterator<MessageContext> iterator = additions.iterator(); iterator.hasNext(); ) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,786,MessageContext messageContext = iterator.next();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,789,if (broker.isExpired(messageContext.message)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,790,broker.messageExpired(messageContext.context, messageContext.message, null);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,791,destinationStatistics.getExpired().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,792,iterator.remove();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,793,continue;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,795,sendMessage(messageContext.message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,796,messageContext.message.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,800,private void processSent() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,801,for (MessageContext messageContext : additions) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,807,public void afterRollback() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,808,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,809,for (MessageContext messageContext : additions) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,810,messageContext.message.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,813,sendSyncs.remove(transaction);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,819,private void registerSendSync(Message message, ConnectionContext context) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,821,Queue.SendSync currentSync = sendSyncs.get(transaction);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,822,if (currentSync == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,823,currentSync = new Queue.SendSync(transaction);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,824,transaction.addSynchronization(currentSync);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,825,sendSyncs.put(transaction, currentSync);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,827,currentSync.add(context, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,854,message.incrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,856,registerSendSync(message, context);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,860,sendMessage(message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1774,final void sendMessage(final Message msg) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1777,messages.addMessageLast(msg);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,85,public void addMessageLast(MessageReference node) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,89,addMessageLast(node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,90,return true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,40,private MessageId lastCachedId;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,169,public final synchronized void addMessageLast(MessageReference node) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,173,LOG.trace("{} - enabling cache for empty store {}", this, node.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,178,lastCachedId = node.getMessageId();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,192,if (lastCachedId != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,194,setBatch(lastCachedId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,195,lastCachedId = null;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,237,for (Iterator<MessageReference>i = batchList.iterator();i.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,238,MessageReference msg = i.next();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,206,public synchronized void addMessageLast(MessageReference node) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,207,tryAddMessageLast(node, 0);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PendingMessageCursor.java,87,void addMessageLast(MessageReference node) throws Exception;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreDurableSubscriberCursor.java,186,public synchronized void addMessageLast(MessageReference node) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreQueueCursor.java,90,public synchronized void addMessageLast(MessageReference node) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreQueueCursor.java,100,persistent.addMessageLast(node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/VMPendingMessageCursor.java,100,public synchronized void addMessageLast(MessageReference node) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,98,public void addMessage(ConnectionContext context, Message message) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,206,if (context != null && context.getXid() != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,207,ack.getLastMessageId().setEntryLocator(seq);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,776,long sequence = (Long)messageId.getEntryLocator();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,789,getAdapter().doRemoveMessage(c, (Long)ack.getLastMessageId().getEntryLocator(), null);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,109,(Long)message.getMessageId().getEntryLocator(),
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,166,message.getMessageId().setEntryLocator(id);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,189,msg.getMessageId().setEntryLocator(id);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,371,throw new SQLException("Failed to remove message");
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1119,printQuery(c, "Select * from ACTIVEMQ_MSGS ORDER BY ID", System.out);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1120,printQuery(c, "Select * from ACTIVEMQ_ACKS", System.out);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,77,public class KahaDBStore extends MessageDatabase implements PersistenceAdapter {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,200,LOG.warn("Receovered Store uses a different OpenWire version[{}] " +
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,320,void rollbackStatsOnDuplicate(KahaDestination commandDestination) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,321,if (brokerService != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,322,RegionBroker regionBroker = (RegionBroker) brokerService.getRegionBroker();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,323,if (regionBroker != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,326,destination.getDestinationStatistics().getMessages().decrement();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,327,destination.getDestinationStatistics().getEnqueues().decrement();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,417,return result.getFuture();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,455,public void addMessage(ConnectionContext context, Message message) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,464,store(command, isEnableJournalDiskSyncs() && message.isResponseRequired(), null, null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,635,public void setBatch(MessageId identity) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBTransactionStore.java,45,import org.apache.activemq.store.kahadb.MessageDatabase.AddOpperation;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBTransactionStore.java,47,import org.apache.activemq.store.kahadb.MessageDatabase.RemoveOpperation;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBTransactionStore.java,339,if (op.getClass() == AddOpperation.class) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBTransactionStore.java,340,AddOpperation addOp = (AddOpperation) op;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBTransactionStore.java,345,RemoveOpperation rmOp = (RemoveOpperation) op;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,255,public MessageDatabase() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,509,if (operation instanceof AddOpperation) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,510,AddOpperation add = (AddOpperation) operation;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,514,RemoveOpperation removeOpperation = (RemoveOpperation) operation;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,860,process(message, lastRecoveryPosition, (Runnable)null, (Runnable)null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,927,return store(data, false, null,null, onJournalStoreComplete);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,930,public Location store(JournalCommand<?> data, boolean sync, Runnable before,Runnable after) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,940,public Location store(JournalCommand<?> data, boolean sync, Runnable before, Runnable after, Runnable onJournalStoreComplete) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,951,process(data, location, before, after);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1025,process(data, location, (Runnable) null, (Runnable) null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1043,void process(JournalCommand<?> data, final Location location, final Runnable before, final Runnable after) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1047,process(command, location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1062,process(command, location, before, after);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1098,protected void process(final KahaAddMessageCommand command, final Location location) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1100,List<Operation> inflightTx = getInflightTx(command.getTransactionInfo(), location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1101,inflightTx.add(new AddOpperation(command, location));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1120,List<Operation> inflightTx = getInflightTx(command.getTransactionInfo(), location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1121,inflightTx.add(new RemoveOpperation(command, location));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1175,protected void process(KahaCommitCommand command, Location location, final Runnable before, final Runnable after) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1187,before.run();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1193,this.indexLock.writeLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1196,if (before != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1197,before.run();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1199,pageFile.tx().execute(new Transaction.Closure<IOException>() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1201,public void execute(Transaction tx) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1202,for (Operation op : messagingTx) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1203,op.execute(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1207,metadata.lastUpdate = location;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1209,this.indexLock.writeLock().unlock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1268,return;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1288,rollbackStatsOnDuplicate(command.getDestination());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1301,abstract void rollbackStatsOnDuplicate(KahaDestination commandDestination);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2312,private List<Operation> getInflightTx(KahaTransactionInfo info, Location location) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2350,class AddOpperation extends Operation<KahaAddMessageCommand> {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2352,public AddOpperation(KahaAddMessageCommand command, Location location) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2363,class RemoveOpperation extends Operation<KahaRemoveMessageCommand> {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2365,public RemoveOpperation(KahaRemoveMessageCommand command, Location location) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2876,Iterator<Entry<Long, MessageKeys>> iterator = index.iterator(tx, sequenceId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2911,return new MessageOrderIterator(tx,cursor);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2915,return new MessageOrderIterator(tx,m);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2928,MessageOrderIterator(Transaction tx, MessageOrderCursor m) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2929,this.defaultIterator = defaultPriorityIndex.iterator(tx, m.defaultCursorPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2931,this.highIterator = highPriorityIndex.iterator(tx, m.highPriorityCursorPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2936,this.lowIterator = lowPriorityIndex.iterator(tx, m.lowPriorityCursorPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeIndex.java,232,return getRoot(tx).iterator(tx, initialKey);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeNode.java,87,private BTreeIterator(Transaction tx, BTreeNode<Key,Value> current, int nextIndex) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeNode.java,634,public Iterator<Map.Entry<Key,Value>> iterator(final Transaction tx, Key startKey) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeNode.java,639,return getLeafNode(tx, this, startKey).iterator(tx, startKey);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeNode.java,645,return new BTreeIterator(tx, this, idx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeNode.java,650,return new BTreeIterator(tx, getFirstLeafNode(tx), 0);
activemq-client/src/main/java/org/apache/activemq/management/SizeStatisticImpl.java,19,public class SizeStatisticImpl extends StatisticImpl{
activemq-client/src/main/java/org/apache/activemq/management/SizeStatisticImpl.java,40,if(isDoReset()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,121,c.getConnection().commit();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,150,c.getConnection().commit();
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,46,private boolean logMessageEvents = false;
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,88,public boolean isLogMessageEvents() {
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,89,return logMessageEvents;
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,95,public void setLogMessageEvents(boolean logMessageEvents) {
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,96,this.logMessageEvents = logMessageEvents;
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,607,buf.append(", logMessageEvents=");
activemq-broker/src/main/java/org/apache/activemq/broker/util/LoggingBrokerPlugin.java,608,buf.append(isLogMessageEvents());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2414,connector.setBrokerService(this);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2491,protected TransportConnector startTransportConnector(TransportConnector connector) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,345,connector.start();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,577,return allowLinkStealing;
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,111,public Destination[] createDestination(int destIndex, int destCount) throws JMSException {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,113,if (getClient().isDestComposite()) {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,114,return new Destination[] {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,118,Destination[] dest = new Destination[destCount];
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,123,return dest;
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,127,public Destination createCompositeDestination(int destIndex, int destCount) throws JMSException {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,128,return createCompositeDestination(getClient().getDestName(), destIndex, destCount);
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,131,protected Destination createCompositeDestination(String name, int destIndex, int destCount) throws JMSException {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,133,String simpleName;
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,135,if (name.startsWith("queue://")) {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,136,simpleName = name.substring("queue://".length());
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,138,simpleName = name.substring("topic://".length());
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,140,simpleName = name;
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,151,return createDestination(compDestName);
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,154,protected Destination createDestination(String name) throws JMSException {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,155,if (name.startsWith("queue://")) {
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,156,return getSession().createQueue(name.substring("queue://".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,158,return getSession().createTopic(name.substring("topic://".length()));
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/AbstractJmsClient.java,160,return getSession().createTopic(name);
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/JmsConsumerClient.java,211,Destination[] dest = createDestination(destIndex, destCount);
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/JmsProducerClient.java,80,Destination[] dest = createDestination(destIndex, destCount);
activemq-tooling/activemq-perf-maven-plugin/src/main/java/org/apache/activemq/tool/JmsProducerClient.java,167,Destination[] dest = createDestination(destIndex, destCount);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,21,import javax.jms.JMSException;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,25,import org.fusesource.mqtt.codec.*;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,29,TcpTransport transport;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,31,DataByteArrayOutputStream currentCommand = new DataByteArrayOutputStream();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,32,boolean processedHeader = false;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,33,String action;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,34,byte header;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,35,int contentLength = -1;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,36,int previousByte = -1;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,37,int payLoadRead = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,39,public MQTTCodec(TcpTransport transport) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,40,this.transport = transport;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,43,public void parse(DataByteArrayInputStream input, int readSize) throws Exception {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,44,int i = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,45,byte b;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,46,while (i++ < readSize) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,47,b = input.readByte();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,49,if (!processedHeader && b == 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,50,previousByte = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,51,continue;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,54,if (!processedHeader) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,55,i += processHeader(b, input);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,56,if (contentLength == 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,57,processCommand();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,62,if (contentLength == -1) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,64,if (b == 0) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,65,processCommand();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,67,currentCommand.write(b);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,71,if (payLoadRead == contentLength) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,72,processCommand();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,73,i += processHeader(b, input);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,75,currentCommand.write(b);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,76,payLoadRead++;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,81,previousByte = b;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,83,if (processedHeader && payLoadRead == contentLength) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,84,processCommand();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,93,private int processHeader(byte header, DataByteArrayInputStream input) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,94,this.header = header;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,95,byte digit;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,96,int multiplier = 1;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,97,int read = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,98,int length = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,99,do {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,100,digit = input.readByte();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,101,length += (digit & 0x7F) * multiplier;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,102,multiplier <<= 7;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,103,read++;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,106,contentLength = length;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,107,processedHeader = true;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,108,return read;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,112,private void processCommand() throws Exception {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,113,MQTTFrame frame = new MQTTFrame(currentCommand.toBuffer().deepCopy()).header(header);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,114,transport.doConsume(frame);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,115,processedHeader = false;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,116,currentCommand.reset();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,117,contentLength = -1;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,118,payLoadRead = 0;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,121,public static String commandType(byte header) throws IOException, JMSException {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,123,byte messageType = (byte) ((header & 0xF0) >>> 4);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,124,switch (messageType) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,125,case PINGREQ.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,126,return "PINGREQ";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,128,case CONNECT.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,129,return "CONNECT";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,131,case DISCONNECT.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,132,return "DISCONNECT";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,134,case SUBSCRIBE.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,135,return "SUBSCRIBE";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,137,case UNSUBSCRIBE.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,138,return "UNSUBSCRIBE";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,140,case PUBLISH.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,141,return "PUBLISH";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,143,case PUBACK.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,144,return "PUBACK";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,146,case PUBREC.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,147,return "PUBREC";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,149,case PUBREL.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,150,return "PUBREL";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,152,case PUBCOMP.TYPE: {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,153,return "PUBCOMP";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,155,default:
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTCodec.java,156,return "UNKNOWN";
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTNIOSSLTransport.java,32,MQTTCodec codec;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestination.java,44,public void remove(Destination destination) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualDestinationInterceptor.java,48,Set matchingDestinations = destinationMap.get(destination.getActiveMQDestination());
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualDestinationInterceptor.java,51,VirtualDestination virtualDestination = (VirtualDestination)iter.next();
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualDestinationInterceptor.java,68,for (VirtualDestination virt: virtualDestinations) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualDestinationInterceptor.java,73,public synchronized void remove(Destination destination) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualTopic.java,51,return selectorAware ? new SelectorAwareVirtualTopicInterceptor(destination, getPrefix(), getPostfix(), isLocal()) :
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualTopic.java,52,new VirtualTopicInterceptor(destination, getPrefix(), getPostfix(), isLocal());
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualTopic.java,65,public void remove(Destination destination) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualTopic.java,126,return new StringBuilder("VirtualTopic:").append(prefix).append(',').append(name).append(',').append(postfix).append(',').append(selectorAware).append(',').append(local).toString();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTSslTransportFactory.java,22,import org.apache.activemq.broker.BrokerContext;
activemq-partition/src/main/java/org/apache/activemq/partition/PartitionBrokerPlugin.java,22,import org.codehaus.jackson.JsonParseException;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,95,private long inactiveTimoutBeforeGC = DEFAULT_INACTIVE_TIMEOUT_BEFORE_GC;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,251,public void setMemoryUsage(MemoryUsage memoryUsage) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,252,this.memoryUsage = memoryUsage;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,672,public long getInactiveTimoutBeforeGC() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,673,return this.inactiveTimoutBeforeGC;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,679,public void setInactiveTimoutBeforeGC(long inactiveTimoutBeforeGC) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,680,this.inactiveTimoutBeforeGC = inactiveTimoutBeforeGC;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,711,&& destinationStatistics.messages.getCount() == 0 && getInactiveTimoutBeforeGC() > 0l) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,719,if ((System.currentTimeMillis() - this.lastActiveTime) >= getInactiveTimoutBeforeGC()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Destination.java,57,long getInactiveTimoutBeforeGC();
activemq-broker/src/main/java/org/apache/activemq/broker/region/DestinationFilter.java,91,public long getInactiveTimoutBeforeGC() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DestinationFilter.java,92,return next.getInactiveTimoutBeforeGC();
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,843,log.info("{} Inactive for longer than {} ms - removing ...", dest.getName(), dest.getInactiveTimoutBeforeGC());
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/PolicyEntry.java,98,private long inactiveTimoutBeforeGC = BaseDestination.DEFAULT_INACTIVE_TIMEOUT_BEFORE_GC;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/PolicyEntry.java,187,destination.setInactiveTimoutBeforeGC(getInactiveTimoutBeforeGC());
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/PolicyEntry.java,873,return this.inactiveTimoutBeforeGC;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/PolicyEntry.java,877,this.inactiveTimoutBeforeGC = inactiveTimoutBeforeGC;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,244,ack.code(CONNACK.Code.CONNECTION_REFUSED_SERVER_UNAVAILABLE);
activemq-console/src/main/java/org/apache/activemq/console/command/store/StoreExporter.java,27,import org.codehaus.jackson.map.ObjectMapper;
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/dto/LogDelete.java,20,import org.codehaus.jackson.annotate.JsonIgnoreProperties;
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/dto/LogWrite.java,19,import org.codehaus.jackson.annotate.JsonIgnoreProperties;
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/dto/Login.java,20,import org.codehaus.jackson.annotate.JsonIgnoreProperties;
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/dto/Transfer.java,20,import org.codehaus.jackson.annotate.JsonIgnoreProperties;
activemq-leveldb-store/src/main/java/org/apache/activemq/leveldb/replicated/dto/WalAck.java,20,import org.codehaus.jackson.annotate.JsonIgnoreProperties;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,19,import org.codehaus.jackson.annotate.JsonProperty;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,20,import org.codehaus.jackson.map.DeserializationConfig;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,21,import org.codehaus.jackson.map.ObjectMapper;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,22,import org.codehaus.jackson.map.SerializationConfig;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,23,import org.codehaus.jackson.map.annotate.JsonDeserialize;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,24,import org.codehaus.jackson.map.annotate.JsonSerialize;
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,36,MAPPER.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,37,MAPPER.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,42,TO_STRING_MAPPER.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Partitioning.java,43,TO_STRING_MAPPER.enable(SerializationConfig.Feature.INDENT_OUTPUT);
activemq-partition/src/main/java/org/apache/activemq/partition/dto/Target.java,19,import org.codehaus.jackson.annotate.JsonProperty;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,20,import java.nio.channels.SocketChannel;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,46,ThreadPoolExecutor rc = new ThreadPoolExecutor(0, Integer.MAX_VALUE, getDefaultKeepAliveTime(), TimeUnit.SECONDS, new SynchronousQueue<Runnable>(), new ThreadFactory() {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,48,private long i = 0;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,51,public Thread newThread(Runnable runnable) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,52,this.i++;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,53,final Thread t = new Thread(runnable, "ActiveMQ NIO Worker " + this.i);
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,54,return t;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,75,throws IOException {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,78,while( selection == null ) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,81,if( worker.isReleased() ) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,85,selection = new SelectorSelection(worker, socketChannel, listener);
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorManager.java,91,selection = new SelectorSelection(worker, socketChannel, listener);
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,22,import java.nio.channels.SocketChannel;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,36,private AtomicBoolean closed = new AtomicBoolean();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,38,public SelectorSelection(final SelectorWorker worker, final SocketChannel socketChannel, Listener listener) throws ClosedChannelException {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,44,SelectorSelection.this.key = socketChannel.register(worker.selector, 0, SelectorSelection.this);
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,80,if( closed.compareAndSet(false, true) ) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,296,while (!isStopped()) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,297,Socket socket = null;
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,299,socket = serverSocket.accept();
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,300,if (socket != null) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,301,if (isStopped() || getAcceptListener() == null) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,302,socket.close();
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,304,if (useQueueForAccept) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,305,socketQueue.put(socket);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,307,handleSocket(socket);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,314,if (!isStopping()) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,315,onAcceptError(e);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,317,LOG.warn("run()", e);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,318,onAcceptError(e);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCAdapter.java,89,void doRecoverNextMessages(TransactionContext c, ActiveMQDestination destination, long nextSeq, long priority, int maxReturned, boolean isPrioritizeMessages, JDBCMessageRecoveryListener listener) throws Exception;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,109,long sequenceId = persistenceAdapter.getNextSequenceId();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,122,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,138,protected void onAdd(MessageId messageId, long sequenceId, byte priority) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,219,Message msg = (Message)wireFormat.unmarshal(new ByteSequence(data));
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,278,adapter.doRecoverNextMessages(c, destination, lastRecoveredSequenceId.get(), lastRecoveredPriority.get(),
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,745,synchronized(sequenceGenerator) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,746,return sequenceGenerator.getNextSequenceId();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCTopicMessageStore.java,319,protected void onAdd(MessageId messageId, long sequenceId, byte priority) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCTopicMessageStore.java,326,sequenceIdCache.put(messageId, new long[]{sequenceId, priority});
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,108,message.getMessageId(),
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,501,+ " WHERE CONTAINER=? AND ID > ? AND XID IS NULL ORDER BY ID";
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,514,+ " AND ((ID > ? AND PRIORITY = ?) OR PRIORITY < ?)"
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1037,public void doRecoverNextMessages(TransactionContext c, ActiveMQDestination destination, long nextSeq,
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1050,s.setLong(2, nextSeq);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1052,s.setLong(3, priority);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/GenericResourceManager.java,154,final XAConnection xaConnection = connFactory.createXAConnection(rm.getUserName(), rm.getPassword());
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,66,private ConnectionFactory connectionFactory;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,143,public ConnectionFactory getConnectionFactory() {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,157,public void setConnectionFactory(final ConnectionFactory toUse) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,158,if (toUse instanceof XAConnectionFactory) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,159,connectionFactory = new ConnectionFactory() {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,247,if (key.getUserName() == null && key.getPassword() == null) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,248,return connectionFactory.createConnection();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,250,return connectionFactory.createConnection(key.getUserName(), key.getPassword());
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,60,public class PooledConnectionFactory implements ConnectionFactory {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,23,import javax.jms.JMSException;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,24,import javax.jms.QueueConnection;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,25,import javax.jms.QueueConnectionFactory;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,26,import javax.jms.TopicConnection;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,27,import javax.jms.TopicConnectionFactory;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,126,public QueueConnection createQueueConnection() throws JMSException {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,127,return (QueueConnection) createConnection();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,131,public QueueConnection createQueueConnection(String userName, String password) throws JMSException {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,132,return (QueueConnection) createConnection(userName, password);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,136,public TopicConnection createTopicConnection() throws JMSException {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,137,return (TopicConnection) createConnection();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,141,public TopicConnection createTopicConnection(String userName, String password) throws JMSException {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/XaPooledConnectionFactory.java,142,return (TopicConnection) createConnection(userName, password);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,86,Map brokerOptions = IntrospectionSupport.extractProperties(options, "broker.");
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,67,host = (String)brokerData.getParameters().get("brokerName");
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,82,String config = (String)options.remove("brokerConfig");
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,183,if (broker == null && waitForStart > 0) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportFactory.java,188,LOG.debug("waiting for broker named: " + brokerName + " to start");
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,200,public Object chooseValue(ActiveMQDestination destination) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,205,SortedSet sortedSet = new TreeSet(set);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1726,static protected class MessageKeysMarshaller extends VariableMarshaller<MessageKeys> {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1727,static final MessageKeysMarshaller INSTANCE = new MessageKeysMarshaller();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1731,return new MessageKeys(dataIn.readUTF(), LocationMarshaller.INSTANCE.readPayload(dataIn));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1737,LocationMarshaller.INSTANCE.writePayload(object.location, dataOut);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2727,defaultPriorityIndex.setValueMarshaller(MessageKeysMarshaller.INSTANCE);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2730,lowPriorityIndex.setValueMarshaller(MessageKeysMarshaller.INSTANCE);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2733,highPriorityIndex.setValueMarshaller(MessageKeysMarshaller.INSTANCE);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,220,LOG.info("Corrupt journal records found in '"+dataFile.getFile()+"' between offsets: "+sequence);
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,21,import java.util.HashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,23,import java.util.Map;
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,45,private final Map<MessageId, Object> audit = new HashMap<MessageId, Object>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,70,if (!audit.containsKey(messageId)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,71,audit.put(messageId, Boolean.TRUE);
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,72,return false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueBrowserSubscription.java,75,return true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,136,if (map.values().contains(message)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,137,return true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/OrderedPendingList.java,140,for (PendingNode value : map.values()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/OrderedPendingList.java,141,if (value.getMessage().equals(message)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/OrderedPendingList.java,142,return true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,226,node.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,655,node.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/scheduler/SchedulerBroker.java,205,Message messageSend = (Message) this.wireFormat.unmarshal(packet);
activemq-broker/src/main/java/org/apache/activemq/broker/scheduler/SchedulerBroker.java,244,messageSend.setMessageId(new MessageId(this.producerId, this.messageIdGenerator.getNextSequenceId()));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1017,if (data instanceof KahaSubscriptionCommand) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1018,KahaSubscriptionCommand kahaSubscriptionCommand = (KahaSubscriptionCommand)data;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1019,if (kahaSubscriptionCommand.hasSubscriptionInfo()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1021,LOG.debug("ignoring add sub command during recovery replay:" + data);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1022,return;
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,303,throw new UnsupportedOperationException("You cannot dynamically change the selector for durable topic subscriptions");
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,154,if (destination == null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQDestination.java,159,if (destination.isQueue() == destination2.isQueue()) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,206,return sortedSet.last();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1951,if (storeLimit > dirFreeSpace) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1955,dirFreeSpace / (1024 * 1024) + " mb.");
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1956,usage.getTempUsage().setLimit(dirFreeSpace);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,402,ConnectionContext context = new ConnectionContext();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,427,ConnectionContext context = new ConnectionContext();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,76,if (text == null && getContent() != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,77,text = decodeContent();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,84,private String decodeContent() throws JMSException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,86,if (getContent() != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,89,ByteSequence bodyAsBytes = getContent();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,90,if (bodyAsBytes != null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,91,is = new ByteArrayInputStream(bodyAsBytes);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,92,if (isCompressed()) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,93,is = new InflaterInputStream(is);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,95,DataInputStream dataIn = new DataInputStream(is);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,96,text = MarshallingSupport.readUTF8(dataIn);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,97,dataIn.close();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,138,MarshallingSupport.writeUTF8(dataOut, this.text);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,185,text = decodeContent();
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,109,DestinationViewMBean destinationViewMBean = iter.next();
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,110,if (name.equals(destinationViewMBean.getName())) {
activemq-web/src/main/java/org/apache/activemq/web/BrokerFacadeSupport.java,111,return destinationViewMBean;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,116,storeContent();
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,61,DemandSubscription sub = createDemandSubscription(dest);
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,62,sub.setStaticallyIncluded(true);
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,63,if (dest.isTopic()) {
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,64,sub.getLocalInfo().setSubscriptionName(getSubscriberName(dest));
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,67,addSubscription(sub);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,798,if (session.isClientAcknowledge()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,223,protected Object sendMutex = new Object();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,66,if (!isStopping()) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,67,synchronized (this) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,68,unregisterMBean(byClientIdName);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,69,unregisterMBean(byAddressName);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,70,byClientIdName = null;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedTransportConnection.java,71,byAddressName = null;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,307,if (node.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,308,if (broker.isExpired(node)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,309,Destination regionDestination = nodeDest;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,310,regionDestination.messageExpired(context, this, node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,312,iter.remove();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,313,nodeDest.getDestinationStatistics().getInflight().decrement();
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,287,if (bytesRead == 0) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,330,while (true) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,331,switch (sslEngine.getHandshakeStatus()) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,332,case NEED_UNWRAP:
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,333,secureRead(ByteBuffer.allocate(sslSession.getApplicationBufferSize()));
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,334,break;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,335,case NEED_TASK:
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,336,Runnable task;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,337,while ((task = sslEngine.getDelegatedTask()) != null) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,338,taskRunnerFactory.execute(task);
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,340,break;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,341,case NEED_WRAP:
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,342,((NIOOutputStream) buffOut).write(ByteBuffer.allocate(0));
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,343,break;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,344,case FINISHED:
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,345,case NOT_HANDSHAKING:
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,346,finishHandshake();
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,347,return;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2805,if (defaultPriorityIndex.containsKey(tx, sequence)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2806,lastDefaultKey = sequence;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2807,cursor.defaultCursorPosition = nextPosition.longValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2818,lastDefaultKey = sequence;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2819,cursor.defaultCursorPosition = nextPosition.longValue();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,223,private int storeOpenWireVersion = OpenWireFormat.DEFAULT_VERSION;
activemq-client/src/main/java/org/apache/activemq/command/CommandTypes.java,30,byte PROTOCOL_STORE_VERSION = 6;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,41,public static final int DEFAULT_VERSION = CommandTypes.PROTOCOL_STORE_VERSION;
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,69,this(DEFAULT_VERSION);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,228,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,266,dataOut.writeInt(size);
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,296,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,319,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,363,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[dataType & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,402,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,429,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,442,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[dataType & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,475,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[dataType & 0xFF];
activemq-client/src/main/java/org/apache/activemq/openwire/OpenWireFormat.java,493,DataStreamMarshaller dsm = (DataStreamMarshaller)dataMarshallers[type & 0xFF];
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,127,protected int openwireVersion = OpenWireFormat.DEFAULT_VERSION;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,163,openwireVersion = OpenWireFormat.DEFAULT_VERSION;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1022,if (!isEmptyTopic(entry, tx)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1023,rc.add(convert(entry.getKey()));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1029,throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1030,boolean isEmptyTopic = false;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1031,ActiveMQDestination dest = convert(entry.getKey());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1032,if (dest.isTopic()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1033,StoredDestination loadedStore = getStoredDestination(convert(dest), tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1034,if (loadedStore.subscriptionAcks.isEmpty(tx)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1035,isEmptyTopic = true;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1038,return isEmptyTopic;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,252,if (adapter instanceof PersistenceAdapter) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,267,if (adapter instanceof PersistenceAdapter) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,275,if (adapter.getDestinations().isEmpty()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,276,stopAdapter(adapter, destination.toString());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,277,File adapterDir = adapter.getDirectory();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,278,if (adapterDir != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,279,if (IOHelper.deleteFile(adapterDir)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,280,if (LOG.isTraceEnabled()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,281,LOG.info("deleted per destination adapter directory for: " + destination);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,284,if (LOG.isTraceEnabled()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,285,LOG.info("failed to deleted per destination adapter directory for: " + destination);
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,55,private final boolean keepDurableSubsActive;
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,190,this.usageManager.getMemoryUsage().removeUsageListener(this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,656,if( !isDropped(node) && canDispatch(node)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,660,if (node!=QueueMessageReference.NULL_MESSAGE && node.isExpired()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,492,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,493,LOG.debug(getConsumerId() + " received expired message: " + md);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,694,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,695,LOG.debug("remove: " + this.getConsumerId() + ", lastDeliveredSequenceId:" + lastDeliveredSequenceId);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,714,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,715,LOG.debug(getConsumerId() + " clearing unconsumed list (" + unconsumedMessages.size() + ") on transport interrupt");
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,822,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,823,LOG.debug("on close, rollback duplicate: " + old.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1003,if ( !oldPendingAck.isDeliveredAck()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1004,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1005,LOG.debug("Sending old pending ack " + oldPendingAck + ", new pending: " + pendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1009,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1010,LOG.debug("dropping old pending ack " + oldPendingAck + ", new pending: " + pendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1017,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1018,LOG.debug("ackLater: sending: " + pendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1111,LOG.info("waiting for redelivery of " + numberNotReplayed + " in transaction: "
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1112,+ previouslyDeliveredMessages.transactionId +  ", to consumer :" + this.getConsumerId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1134,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1135,LOG.debug("previously delivered message has not been replayed in transaction: "
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1136,+ previouslyDeliveredMessages.transactionId
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1137,+ " , messageId: " + entry.getKey());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1311,if (LOG.isTraceEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1312,LOG.trace("rollback non redelivered: " + entry.getKey());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1365,LOG.error(getConsumerId() + " Exception while processing message: " + md.getMessage().getMessageId(), e);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1394,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1450,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1451,LOG.debug(getConsumerId() + " tracking existing transacted " + previouslyDeliveredMessages.transactionId +
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1456,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1457,LOG.debug(getConsumerId() + " rolling back delivered list (" + deliveredMessages.size() + ") on transport interrupt");
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1466,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1467,LOG.debug(getConsumerId() + " clearing delivered list (" + deliveredMessages.size() + ") on transport interrupt");
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1568,if (LOG.isInfoEnabled()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1569,LOG.info("Consumer:{} is performing scheduled delivery of outstanding optimized Acks", info.getConsumerId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,666,continue;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,21,import java.util.concurrent.atomic.AtomicLong;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,66,protected AtomicLong lastRecoveredSequenceId = new AtomicLong(-1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,67,protected AtomicLong lastRecoveredPriority = new AtomicLong(Byte.MAX_VALUE -1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,285,lastRecoveredSequenceId.set(sequenceId);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,286,lastRecoveredPriority.set(msg.getPriority());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,314,lastRecoveredSequenceId.set(-1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,323,lastRecoveredSequenceId.set(storedValues[0]);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,324,lastRecoveredPriority.set(storedValues[1]);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,326,lastRecoveredSequenceId.set(-1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,327,lastRecoveredPriority.set(Byte.MAX_VALUE -1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,331,+ ", priority: " + lastRecoveredPriority.get());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1038,long priority, int maxReturned, boolean isPrioritizedMessages, JDBCMessageRecoveryListener listener) throws Exception {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1053,s.setLong(4, priority);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,315,lastRecoveredPriority.set(Byte.MAX_VALUE - 1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1048,s.setMaxRows(Math.min(maxReturned * 2, maxRows));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,246,private boolean rewriteOnRedelivery = false;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2063,for(Long sequenceId : pendingAcks) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2145,count = count.longValue() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2146,sd.messageReferences.put(ackPosition, count);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2169,sd.messageReferences.put(messageSequence+1, Long.valueOf(0L));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2232,if (count != null){
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2233,long references = count.longValue() - 1;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,160,throws Exception {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,75,protected ThreadPoolExecutor connectionSerivce;
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,119,connectionSerivce = createExecutor();
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,170,ThreadPoolUtils.shutdown(connectionSerivce);
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,171,connectionSerivce = null;
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,496,this.connectionSerivce.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,521,this.connectionSerivce.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,536,this.connectionSerivce.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,549,this.connectionSerivce.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,574,do
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,583,if (connectionSerivce.isTerminating()) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,612,while (maxRetries < ++attempt && !connectionSerivce.isTerminating());
activemq-broker/src/main/java/org/apache/activemq/network/jms/ReconnectionPolicy.java,31,private int maxReconnectAttempts = -1;
activemq-broker/src/main/java/org/apache/activemq/network/jms/ReconnectionPolicy.java,32,private int maxInitialConnectAttempts = -1;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,94,public void start() throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,254,protected MBeanServer getMBeanServer() {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,148,while (endpointWorkers.size() > 0) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,149,ActiveMQEndpointActivationKey key = endpointWorkers.keySet().iterator().next();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,150,endpointDeactivation(key.getMessageEndpointFactory(), key.getActivationSpec());
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,209,ActiveMQEndpointWorker worker = endpointWorkers.remove(key);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,334,public String findAllDurableSubMessagesStatement() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,335,if (findAllDurableSubMessagesStatement == null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,337,+ " M, " + getFullAckTableName() + " D "
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,338,+ " WHERE D.CONTAINER=? AND D.CLIENT_ID=? AND D.SUB_NAME=?"
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,339,+ " AND M.CONTAINER=D.CONTAINER AND M.ID > D.LAST_ACKED_ID"
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,340,+ " ORDER BY M.ID";
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/Statements.java,342,return findAllDurableSubMessagesStatement;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,225,String selector = subscription.getConsumerInfo().getSelector();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,229,String s1 = info.getSelector();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,230,if (s1 == null ^ selector == null || (s1 != null && !s1.equals(selector))) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,250,info.setSelector(selector);
activemq-client/src/main/java/org/apache/activemq/command/CommandTypes.java,27,byte PROTOCOL_VERSION = 10;
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,564,if (getBrokerService().getDefaultSocketURIString() != null) {
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,34,PREDEFINED_OBJNAME_QUERY.setProperty("Broker", "type=Broker,brokerName=%1");
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,35,PREDEFINED_OBJNAME_QUERY.setProperty("Connection", "type=Broker,connector=clientConnectors,connectionName=%1,*");
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,36,PREDEFINED_OBJNAME_QUERY.setProperty("Connector", "type=Broker,brokerName=*,connector=clientConnectors,connectorName=%1");
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,37,PREDEFINED_OBJNAME_QUERY.setProperty("NetworkConnector", "type=Broker,brokerName=%1,connector=networkConnectors,networkConnectorName=*");
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,38,PREDEFINED_OBJNAME_QUERY.setProperty("Queue", "type=Broker,brokerName=*,destinationType=Queue,destinationName=%1");
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,39,PREDEFINED_OBJNAME_QUERY.setProperty("Topic", "type=Broker,brokerName=*,destinationType=Topic,destinationName=%1,*");
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,863,try {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,864,ack.setFirstMessageId(md.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,865,doStartTransaction();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,866,ack.setTransactionId(getTransactionContext().getTransactionId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,867,if (ack.getTransactionId() != null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,868,getTransactionContext().addSynchronization(new Synchronization() {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,871,public void beforeEnd() throws Exception {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,876,public void afterRollback() throws Exception {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,879,connection.rollbackDuplicate(ActiveMQSession.this, md.getMessage());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,880,RedeliveryPolicy redeliveryPolicy = connection.getRedeliveryPolicy();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,881,int redeliveryCounter = md.getMessage().getRedeliveryCounter();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,882,if (redeliveryPolicy.getMaximumRedeliveries() != RedeliveryPolicy.NO_MAXIMUM_REDELIVERIES
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,888,MessageAck ack = new MessageAck(md, MessageAck.POSION_ACK_TYPE, 1);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,889,ack.setFirstMessageId(md.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,890,ack.setPoisonCause(new Throwable("Exceeded ra redelivery policy limit:" + redeliveryPolicy));
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,891,asyncSendPacket(ack);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,895,MessageAck ack = new MessageAck(md, MessageAck.REDELIVERED_ACK_TYPE, 1);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,896,ack.setFirstMessageId(md.getMessage().getMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,897,asyncSendPacket(ack);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,901,long redeliveryDelay = redeliveryPolicy.getInitialRedeliveryDelay();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,902,for (int i = 0; i < redeliveryCounter; i++) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,903,redeliveryDelay = redeliveryPolicy.getNextRedeliveryDelay(redeliveryDelay);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,905,connection.getScheduler().executeAfterDelay(new Runnable() {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,907,public void run() {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,916,messageListener.onMessage(message);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,919,LOG.error("error dispatching message: ", e);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,926,connection.onClientInternalException(e);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,928,if (ack.getTransactionId() == null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,930,asyncSendPacket(ack);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,932,connection.onClientInternalException(e);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,937,if (deliveryListener != null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,938,deliveryListener.afterDelivery(this, message);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,2008,return "ActiveMQSession {id=" + info.getSessionId() + ",started=" + started.get() + "}";
activemq-console/src/main/java/org/apache/activemq/console/Main.java,115,app.runTaskClass(tokens);
activemq-console/src/main/java/org/apache/activemq/console/Main.java,116,System.exit(0);
activemq-console/src/main/java/org/apache/activemq/console/Main.java,219,public void runTaskClass(List<String> tokens) throws Throwable {
activemq-console/src/main/java/org/apache/activemq/console/Main.java,262,runTask.invoke(task.newInstance(), args, System.in, System.out);
activemq-console/src/main/java/org/apache/activemq/console/command/ShellCommand.java,108,return -1;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,646,switch (command.qos()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,647,case AT_LEAST_ONCE:
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,648,return new ResponseHandler() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,650,public void onResponse(MQTTProtocolConverter converter, Response response) throws IOException {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,651,if (response.isException()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,652,LOG.warn("Failed to send MQTT Publish: ", command, ((ExceptionResponse) response).getException());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,654,PUBACK ack = new PUBACK();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,655,ack.messageId(command.messageId());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,656,converter.getMQTTTransport().sendToMQTT(ack.encode());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,660,case EXACTLY_ONCE:
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,661,return new ResponseHandler() {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,663,public void onResponse(MQTTProtocolConverter converter, Response response) throws IOException {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,664,if (response.isException()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,665,LOG.warn("Failed to send MQTT Publish: ", command, ((ExceptionResponse) response).getException());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,667,PUBREC ack = new PUBREC();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,668,ack.messageId(command.messageId());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,669,synchronized (publisherRecs) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,670,publisherRecs.put(command.messageId(), ack);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,672,converter.getMQTTTransport().sendToMQTT(ack.encode());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,676,case AT_MOST_ONCE:
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,677,break;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,378,URI uri = getVmConnectorURI();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,379,Map<String, String> map = new HashMap<String, String>(URISupport.parseParameters(uri));
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,380,map.put("network", "true");
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,381,uri = URISupport.createURIWithQuery(uri, URISupport.createQueryString(map));
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,382,connector.setLocalUri(uri);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2426,map.put("network", "true");
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,44,public static DemandForwardingBridge createBridge(NetworkBridgeConfiguration config,
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,45,Transport localTransport, Transport remoteTransport) {
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,46,return createBridge(config, localTransport, remoteTransport, null);
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,77,map.put("network", "true");
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,50,protected boolean network;
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,340,public boolean isNetwork() {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,341,return network;
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,344,public void setNetwork(boolean network) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,345,this.network = network;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,380,ObjectInstance result = getMBeanServer().registerMBean(bean, name);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,381,this.registeredMBeanNames.put(name, result.getObjectName());
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java,32,import org.apache.activemq.command.Command;
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java,138,doConsume((Command)command);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,214,private final Object persistenceAdapterLock = new Object();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,595,synchronized (persistenceAdapterLock) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,596,persistenceAdapterLock.notifyAll();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,622,synchronized (persistenceAdapterLock) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,623,persistenceAdapterLock.wait();
activemq-broker/src/main/java/org/apache/activemq/network/jms/DestinationBridge.java,157,protected boolean isDoHandleReplyTo() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/DestinationBridge.java,164,protected void setDoHandleReplyTo(boolean doHandleReplyTo) {
activemq-broker/src/main/java/org/apache/activemq/store/SharedFileLocker.java,65,Thread.sleep(lockAcquireSleepInterval);
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionRequestInfo.java,65,public void configure(ActiveMQConnectionFactory factory) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionSupport.java,45,protected ActiveMQConnectionFactory createConnectionFactory(ActiveMQConnectionRequestInfo connectionRequestInfo) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionSupport.java,46,ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionSupport.java,47,connectionRequestInfo.configure(factory);
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionSupport.java,60,public ActiveMQConnection makeConnection(ActiveMQConnectionRequestInfo connectionRequestInfo) throws JMSException{
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQConnectionSupport.java,61,return makeConnection(connectionRequestInfo, createConnectionFactory(connectionRequestInfo));
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,122,cf = createConnectionFactory(getInfo());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,90,if (AdvisorySupport.isMasterBrokerAdvisoryTopic(destination)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,91,subscriptionRecoveryPolicy = new LastImageSubscriptionRecoveryPolicy();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,92,setAlwaysRetroactive(true);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedRegionBroker.java,291,ObjectName inactiveName = subscriptionKeys.get(subscriptionKey);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1422,sd.messageIdIndex.clear(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1423,sd.locationIndex.clear(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1424,sd.orderIndex.clear(tx);
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,92,if (peer.async || !peer.started.get()) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,262,public void setMessageQueue(LinkedBlockingQueue<Object> asyncQueue) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,263,synchronized (this) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,264,if (messageQueue == null) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,265,messageQueue = asyncQueue;
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,44,private AtomicBoolean handlingException = new AtomicBoolean(false);
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,67,String message = cause.getMessage();
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,68,if (cause instanceof SQLException && message.contains(sqlExceptionMessage)) {
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,69,LOG.info("Ignoring SQLException, " + exception, cause);
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,70,return;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1834,jobSchedulerStore.start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1846,try {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1847,jobSchedulerStore.start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1849,RuntimeException exception = new RuntimeException(
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1851,LOG.error(exception.getLocalizedMessage(), e);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1852,throw exception;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,471,super.removeSubscription(context, sub, lastDeiveredSequenceId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,479,lastDeiveredSequenceId,
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,524,if (ref.getMessageId().getBrokerSequenceId() == lastDeiveredSequenceId) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,539,if (lastDeiveredSequenceId == 0) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,670,long lastDeliveredSequenceId = 0;
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,231,private long lastDeliveredSequenceId;
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,843,ActiveMQMessage message = (ActiveMQMessage)md.getMessage();
activemq-client/src/main/java/org/apache/activemq/command/ConsumerInfo.java,66,private transient long lastDeliveredSequenceId;
activemq-client/src/main/java/org/apache/activemq/command/RemoveInfo.java,34,protected long lastDeliveredSequenceId;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/AnnotatedMBean.java,194,entry.getParameters().put("arguments", objects);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,332,public String sendTextMessage(String body, String user, String password) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,337,public String sendTextMessage(Map<String, String> headers, String body, String userName, String password) throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,41,private BrokerService brokerService;
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,43,public LocalBrokerFacade(BrokerService brokerService) {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,44,this.brokerService = brokerService;
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,47,public BrokerService getBrokerService() {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,48,return brokerService;
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,50,public String getBrokerName() throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,51,return brokerService.getBrokerName();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,53,public Broker getBroker() throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,54,return brokerService.getBroker();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,56,public ManagementContext getManagementContext() {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,57,return brokerService.getManagementContext();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,59,public BrokerViewMBean getBrokerAdmin() throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,60,return brokerService.getAdminView();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,62,public ManagedRegionBroker getManagedBroker() throws Exception {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,63,BrokerView adminView = brokerService.getAdminView();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,64,if (adminView == null) {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,65,return null;
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,67,return adminView.getBroker();
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,71,Set destinations = getManagedBroker().getQueueRegion().getDestinations(destination);
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,72,for (Iterator i = destinations.iterator(); i.hasNext();) {
activemq-web/src/main/java/org/apache/activemq/web/LocalBrokerFacade.java,73,Destination dest = (Destination) i.next();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,583,JournalCommand<?> message = load(recoveryPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,584,metadata.lastUpdate = recoveryPosition;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,585,process(message, recoveryPosition, lastIndoubtPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,586,redoCounter++;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,802,for (StoredDestination sd : storedDestinations.values()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,211,if ( size>=0 ) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,29,import org.apache.commons.pool.KeyedPoolableObjectFactory;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,30,import org.apache.commons.pool.impl.GenericKeyedObjectPool;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,31,import org.apache.commons.pool.impl.GenericObjectPool;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,91,return true;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,244,return this.sessionPool.getMaxActive();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,248,this.sessionPool.setMaxActive(maximumActiveSessionPerConnection);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,282,this.sessionPool.setWhenExhaustedAction(
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,283,(block ? GenericObjectPool.WHEN_EXHAUSTED_BLOCK : GenericObjectPool.WHEN_EXHAUSTED_FAIL));
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/ConnectionPool.java,287,return this.sessionPool.getWhenExhaustedAction() == GenericObjectPool.WHEN_EXHAUSTED_BLOCK;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,26,import org.apache.commons.pool.KeyedPoolableObjectFactory;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,27,import org.apache.commons.pool.impl.GenericKeyedObjectPool;
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,132,this.connectionsPool.setMaxIdle(1);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,350,return getConnectionsPool().getMaxIdle();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,361,getConnectionsPool().setMaxIdle(maxConnections);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledSession.java,49,import org.apache.commons.pool.KeyedObjectPool;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,19,import java.util.ArrayList;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,20,import java.util.Enumeration;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,21,import java.util.HashSet;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,22,import java.util.List;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,23,import java.util.Properties;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,24,import java.util.Set;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,25,import java.util.StringTokenizer;
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,99,private final Set queryViews = new HashSet(10);
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,120,List addMBeans = JmxMBeansUtil.queryMBeans(createJmxConnection(), queryAddObjects, queryViews);
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,124,List subMBeans = JmxMBeansUtil.queryMBeans(createJmxConnection(), querySubObjects, queryViews);
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,125,addMBeans.removeAll(subMBeans);
activemq-console/src/main/java/org/apache/activemq/console/command/QueryCommand.java,128,context.printMBean(JmxMBeansUtil.filterMBeansView(addMBeans, queryViews));
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,19,import java.util.ArrayList;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,20,import java.util.Collection;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,21,import java.util.HashMap;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,22,import java.util.Iterator;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,23,import java.util.List;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,24,import java.util.Map;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,25,import java.util.Set;
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,105,newData = data.getClass().newInstance();
activemq-console/src/main/java/org/apache/activemq/console/filter/PropertiesViewFilter.java,108,newData = new HashMap<Object, Object>();
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,19,import java.util.Iterator;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,20,import java.util.List;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,21,import java.util.Set;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,23,import javax.management.ObjectName;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,25,import javax.management.remote.JMXServiceURL;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,27,import org.apache.activemq.console.filter.GroupPropertiesViewFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,28,import org.apache.activemq.console.filter.MBeansAttributeQueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,29,import org.apache.activemq.console.filter.MBeansObjectNameQueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,30,import org.apache.activemq.console.filter.MBeansRegExQueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,31,import org.apache.activemq.console.filter.MapTransformFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,32,import org.apache.activemq.console.filter.MessagesQueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,33,import org.apache.activemq.console.filter.PropertiesViewFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,34,import org.apache.activemq.console.filter.QueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,35,import org.apache.activemq.console.filter.StubQueryFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,36,import org.apache.activemq.console.filter.WildcardToMsgSelectorTransformFilter;
activemq-console/src/main/java/org/apache/activemq/console/util/JmxMBeansUtil.java,37,import org.apache.activemq.console.filter.WildcardToRegExTransformFilter;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,67,private ActiveMQMessageAudit audit;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,289,Synchronization sync = null;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,292,if (transaction != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,293,sync = new Synchronization() {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,295,public void afterRollback() {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,296,if (audit != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,297,audit.rollback(message);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,301,transaction.addSynchronization(sync);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,304,if (audit == null || !audit.isDuplicate(message)) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,305,context.setTransaction(transaction);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,306,try {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,307,next.send(producerExchange, message);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,309,context.setTransaction(originalTx);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,312,if (sync != null && transaction != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,313,transaction.removeSynchronization(sync);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,315,LOG.debug("IGNORING duplicate message {}", message);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,382,public synchronized void brokerServiceStarted() {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,383,super.brokerServiceStarted();
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,385,audit = new ActiveMQMessageAudit();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,183,private boolean supportFailOver;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1707,public boolean isSupportFailOver() {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1708,return this.supportFailOver;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1715,public void setSupportFailOver(boolean supportFailOver) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1716,this.supportFailOver = supportFailOver;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,384,if (getBrokerService().isSupportFailOver() && audit == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,529,if (destination != null && !AdvisorySupport.isAdvisoryTopic(destination)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,622,message.decrementReferenceCount();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,623,matched.remove(message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,624,discarded++;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,625,if(destination != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,626,destination.getDestinationStatistics().getDequeues().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,628,LOG.debug("{}, discarding message {}", this, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,629,Destination dest = (Destination) message.getRegionDestination();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,630,if (dest != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,631,dest.messageDiscarded(getContext(), this, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,633,broker.getRoot().sendToDeadLetterQueue(getContext(), message, this, new Throwable("TopicSubDiscard. ID:" + info.getConsumerId()));
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1616,if (userSpecifiedClientID) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1617,info.setClientId(null);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1618,userSpecifiedClientID = false;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1620,clientIDSet = false;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,2011,cleanup();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,138,MemoryTransactionStore.this.addMessage(getDelegate(), send);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,143,MemoryTransactionStore.this.addMessage(getDelegate(), send);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,148,MemoryTransactionStore.this.addMessage(getDelegate(), message);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,154,MemoryTransactionStore.this.addMessage(getDelegate(), message);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,174,MemoryTransactionStore.this.addMessage(getDelegate(), send);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,179,MemoryTransactionStore.this.addMessage(getDelegate(), send);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,184,MemoryTransactionStore.this.addMessage(getDelegate(), message);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,190,MemoryTransactionStore.this.addMessage(getDelegate(), message);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,303,void addMessage(final MessageStore destination, final Message message) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,327,destination.addMessage(null, message);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1610,if (isConnectionInfoSentToBroker) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1611,if (!transportFailed.get() && !closing.get()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1612,syncSendPacket(info.createRemoveCommand());
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1614,isConnectionInfoSentToBroker = false;
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1622,started.set(false);
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,235,throw new ResourceException("Could cleanup the ActiveMQ connection: " + e, e);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,581,LOG.info("Recovering from the journal ...");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,534,if (cur.getType() == 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/view/MessageBrokerView.java,39,private Map<ActiveMQDestination,BrokerDestinationView> destinationViewMap = new LRUCache<ActiveMQDestination, BrokerDestinationView>();
activemq-broker/src/main/java/org/apache/activemq/broker/view/MessageBrokerView.java,201,if (destination.isTopic() && destination.isTemporary()){
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportFactory.java,84,IntrospectionSupport.setProperties(transport, options);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportFactory.java,85,return super.compositeConfigure(transport, format, options);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFactory.java,45,IntrospectionSupport.setProperties(transport, options);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFactory.java,46,return super.compositeConfigure(transport, format, options);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,41,import org.apache.activemq.broker.region.cursors.OrderedPendingList;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,42,import org.apache.activemq.broker.region.cursors.PendingList;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,43,import org.apache.activemq.broker.region.cursors.PendingMessageCursor;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,44,import org.apache.activemq.broker.region.cursors.PrioritizedPendingList;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,45,import org.apache.activemq.broker.region.cursors.StoreQueueCursor;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,46,import org.apache.activemq.broker.region.cursors.VMPendingMessageCursor;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,91,protected PendingList pagedInPendingDispatch = new OrderedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,92,protected PendingList redeliveredWaitingDispatch = new OrderedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,318,if (prioritizedMessages && this.pagedInPendingDispatch instanceof OrderedPendingList) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,319,pagedInPendingDispatch = new PrioritizedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,320,redeliveredWaitingDispatch = new PrioritizedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,322,pagedInPendingDispatch = new OrderedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,323,redeliveredWaitingDispatch = new OrderedPendingList();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,552,redeliveredWaitingDispatch.addMessageLast(qmr);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1567,pageInMoreMessages |= !pagedInPendingDispatch.isEmpty();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1579,if (pageInMoreMessages || hasBrowsers || !redeliveredWaitingDispatch.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1684,pagedInPendingDispatch.remove(r);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1827,if (pagedInPendingDispatch.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1828,pagedInPendingDispatch.addAll(newlyPaged);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1832,if (!pagedInPendingDispatch.contains(qmr)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1833,pagedInPendingDispatch.addMessageLast(qmr);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1931,if (!redeliveredWaitingDispatch.isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1934,redeliveredWaitingDispatch = doActualDispatch(redeliveredWaitingDispatch);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2148,for (MessageReference ref : pagedInPendingDispatch) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2151,pagedInPendingDispatch.remove(ref);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2201,+ pagedInPendingDispatch.size() + ") for subscription: "
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,91,public Response pullMessage(ConnectionContext context, MessagePull pull) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,97,prefetchExtension.incrementAndGet();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,108,if (dispatchCounterBeforePull == dispatchCounter) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,119,pullTimeout(dispatchCounterBeforePull);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,133,final void pullTimeout(long dispatchCounterBeforePull) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,135,if (dispatchCounterBeforePull == dispatchCounter) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,150,if( !destinations.contains(node.getRegionDestination()) && node!=QueueMessageReference.NULL_MESSAGE) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,216,int index = 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,234,index++;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,311,public Response pullMessage(ConnectionContext context, MessagePull pull) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,314,if (getPrefetchSize() == 0 ) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,566,Message message = node.getMessage();
activemq-broker/src/main/java/org/apache/activemq/store/ProxyMessageStore.java,20,import java.util.concurrent.Future;
activemq-broker/src/main/java/org/apache/activemq/store/ProxyMessageStore.java,141,return asyncAddTopicMessage(context,message,canOptimizeHint);
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,26,import java.util.Collection;
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,27,import java.util.HashSet;
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,28,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,29,import java.util.List;
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,30,import java.util.Set;
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,168,getRootNode(key).appendMatchingValues(answer, paths, 0);
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMapNode.java,206,public void appendMatchingValues(Set<DestinationNode> answer, String[] paths, int startIndex) {
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMapNode.java,212,if (path.equals(ANY_DESCENDENT)) {
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,57,idGeneratorPort = Integer.parseInt(System.getProperty(PROPERTY_IDGENERATOR_PORT, "0"));
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,58,LOG.trace("Using port {}", idGeneratorPort);
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,59,hostName = InetAddressUtil.getLocalHostName();
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,60,ss = new ServerSocket(idGeneratorPort);
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,61,stub = "-" + ss.getLocalPort() + "-" + System.currentTimeMillis() + "-";
activemq-client/src/main/java/org/apache/activemq/util/IdGenerator.java,62,Thread.sleep(100);
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,167,return findWildcardMatches(key);
activemq-camel/src/main/java/org/apache/activemq/camel/component/ActiveMQConfiguration.java,26,import org.springframework.jms.connection.SingleConnectionFactory;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,443,if (value instanceof Double) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,446,if (value instanceof Float) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,449,if (value instanceof UTF8Buffer) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,450,return Float.valueOf(value.toString()).floatValue();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,452,if (value instanceof String) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,453,return Float.valueOf(value.toString()).floatValue();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,455,throw new MessageFormatException(" cannot read a double from " + value.getClass().getName());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,536,if (this.version.equals(Stomp.V1_1) && subscriptionId == null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,654,if (this.version.equals(Stomp.V1_1) && subscriptionId == null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,665,if (this.version.equals(Stomp.V1_1)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2747,if (highPriorityIndex != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2748,Entry<Long, MessageKeys> lastEntry = highPriorityIndex.getLast(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2749,if (lastEntry != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2750,nextMessageId = lastEntry.getKey() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2752,lastEntry = defaultPriorityIndex.getLast(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2753,if (lastEntry != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2754,nextMessageId = lastEntry.getKey() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2756,lastEntry = lowPriorityIndex.getLast(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2757,if (lastEntry != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2758,nextMessageId = lastEntry.getKey() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2763,Entry<Long, MessageKeys> lastEntry = defaultPriorityIndex.getLast(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2765,nextMessageId = lastEntry.getKey() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,372,public synchronized void close() throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,373,if (!started) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,374,return;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,376,if (this.timer != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,377,this.timer.cancel();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,379,accessorPool.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,381,fileMap.clear();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,382,fileByFileMap.clear();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,383,dataFiles.clear();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,384,lastAppendLocation.set(null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,385,started = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,211,destinationMap.removeAll(destination);
activemq-broker/src/main/java/org/apache/activemq/security/SimpleAuthenticationPlugin.java,43,private Map<String, String> userPasswords;
activemq-broker/src/main/java/org/apache/activemq/security/SimpleAuthenticationPlugin.java,44,private Map<String, Set<Principal>> userGroups;
activemq-broker/src/main/java/org/apache/activemq/security/SimpleAuthenticationPlugin.java,76,userPasswords = new HashMap<String, String>();
activemq-broker/src/main/java/org/apache/activemq/security/SimpleAuthenticationPlugin.java,77,userGroups = new HashMap<String, Set<Principal>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/DiskBenchmark.java,52,System.out.println("File " + file + " allready exists, will not benchmark.");
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualTopic.java,57,if (destination.isQueue() && destination.isPattern() && broker.getDestinations(destination).isEmpty()) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransport.java,189,tr.shutdown(TimeUnit.SECONDS.toMillis(1));
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,200,if (TRANSPORTLOG.isDebugEnabled()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,201,TRANSPORTLOG.debug(this + " failed: " + e, e);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,203,TRANSPORTLOG.warn(this + " failed: " + e);
activemq-broker/src/main/java/org/apache/activemq/security/SimpleCachedLDAPAuthorizationMap.java,94,private long lastUpdated;
activemq-broker/src/main/java/org/apache/activemq/security/SimpleCachedLDAPAuthorizationMap.java,219,protected void query() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/security/SimpleCachedLDAPAuthorizationMap.java,687,entries.clear();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,82,protected final List<Command> dispatchQueue = new LinkedList<Command>();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,106,private final Map<ProducerId, ProducerBrokerExchange> producerExchanges = new HashMap<ProducerId, ProducerBrokerExchange>();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,107,private final Map<ConsumerId, ConsumerBrokerExchange> consumerExchanges = new HashMap<ConsumerId, ConsumerBrokerExchange>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractSubscription.java,225,if (info.getPrefetchSize() > 0) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/ListNode.java,197,entryToRemove = null;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,739,if (isAutoAcknowledgeEach()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,740,synchronized(deliveredMessages) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,752,pendingAck = null;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1007,session.sendAck(oldPendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1016,if ((0.5 * info.getPrefetchSize()) <= (deliveredCounter + ackCounter - additionalWindowSize)) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1022,deliveredCounter = 0;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1023,additionalWindowSize = 0;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,149,private MessageAck pendingAck;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,746,ack = pendingAck;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,751,ack = pendingAck;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,930,if (pendingAck != null && deliveredCounter > 0) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,931,session.sendAck(pendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,993,MessageAck oldPendingAck = pendingAck;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,994,pendingAck = new MessageAck(md, ackType, deliveredCounter);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,995,pendingAck.setTransactionId(session.getTransactionContext().getTransactionId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,996,if( oldPendingAck==null ) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,997,pendingAck.setFirstMessageId(pendingAck.getLastMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,999,pendingAck.setFirstMessageId(oldPendingAck.getFirstMessageId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1020,session.sendAck(pendingAck);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1021,pendingAck=null;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,279,if (connected.get()) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,280,connected.set(false);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,866,messageSent(context, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,599,List<MessageReference> rc = new ArrayList<MessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,605,rc.addAll(pending.remove(context, destination));
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,608,return rc;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,614,updateDestinationStats(rc, destination, dispatched);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,617,updateDestinationStats(rc, destination, dispatched);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,620,return rc;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,623,private void updateDestinationStats(List<MessageReference> rc, Destination destination, List<MessageReference> dispatched) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,630,rc.addAll(references);
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,238,if (paramTypes.length != 0 && paramTypes[0].equals(String.class)) {
activemq-broker/src/main/java/org/apache/activemq/security/DefaultAuthorizationMap.java,250,if (paramTypes.length != 0 && methods[i].getName().equals("setName") && paramTypes[0].equals(String.class)) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,162,final QueueConnection newConnection;
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,164,if (foreignConnection.get() == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,166,if (outboundQueueConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,168,if (outboundQueueConnectionFactoryName != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,170,.lookup(outboundQueueConnectionFactoryName, QueueConnectionFactory.class);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,178,throw new JMSException("Cannot create foreignConnection - no information");
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,181,if (outboundUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,182,newConnection = outboundQueueConnectionFactory
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,183,.createQueueConnection(outboundUsername, outboundPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,185,newConnection = outboundQueueConnectionFactory.createQueueConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,190,newConnection = (QueueConnection) foreignConnection.getAndSet(null);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,193,if (outboundClientId != null && outboundClientId.length() > 0) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,194,newConnection.setClientID(getOutboundClientId());
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,196,newConnection.start();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,198,outboundMessageConvertor.setConnection(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,201,initializeInboundDestinationBridgesOutboundSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,202,initializeOutboundDestinationBridgesOutboundSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,206,newConnection.setExceptionListener(new ExceptionListener() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,208,public void onException(JMSException exception) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,209,handleConnectionFailure(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,214,foreignConnection.set(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,220,final QueueConnection newConnection;
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,222,if (localConnection.get() == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,224,if (localQueueConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,225,if (embeddedConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,227,if (localConnectionFactoryName != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,229,.lookup(localConnectionFactoryName, QueueConnectionFactory.class);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,230,if (localUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,231,newConnection = localQueueConnectionFactory
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,232,.createQueueConnection(localUsername, localPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,234,newConnection = localQueueConnectionFactory.createQueueConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,237,throw new JMSException("Cannot create localConnection - no information");
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,240,newConnection = embeddedConnectionFactory.createQueueConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,243,if (localUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,244,newConnection = localQueueConnectionFactory.
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,245,createQueueConnection(localUsername, localPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,247,newConnection = localQueueConnectionFactory.createQueueConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,253,newConnection = (QueueConnection) localConnection.getAndSet(null);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,256,if (localClientId != null && localClientId.length() > 0) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,257,newConnection.setClientID(getLocalClientId());
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,259,newConnection.start();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,261,inboundMessageConvertor.setConnection(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,264,initializeInboundDestinationBridgesLocalSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,265,initializeOutboundDestinationBridgesLocalSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,269,newConnection.setExceptionListener(new ExceptionListener() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,271,public void onException(JMSException exception) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,272,handleConnectionFailure(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsQueueConnector.java,277,localConnection.set(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,160,final TopicConnection newConnection;
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,162,if (foreignConnection.get() == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,164,if (outboundTopicConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,166,if (outboundTopicConnectionFactoryName != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,168,.lookup(outboundTopicConnectionFactoryName, TopicConnectionFactory.class);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,176,throw new JMSException("Cannot create foreignConnection - no information");
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,179,if (outboundUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,180,newConnection = outboundTopicConnectionFactory
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,181,.createTopicConnection(outboundUsername, outboundPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,183,newConnection = outboundTopicConnectionFactory.createTopicConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,188,newConnection = (TopicConnection) foreignConnection.getAndSet(null);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,191,if (outboundClientId != null && outboundClientId.length() > 0) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,192,newConnection.setClientID(getOutboundClientId());
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,194,newConnection.start();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,196,outboundMessageConvertor.setConnection(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,199,initializeInboundDestinationBridgesOutboundSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,200,initializeOutboundDestinationBridgesOutboundSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,204,newConnection.setExceptionListener(new ExceptionListener() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,206,public void onException(JMSException exception) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,207,handleConnectionFailure(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,212,foreignConnection.set(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,218,final TopicConnection newConnection;
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,220,if (localConnection.get() == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,222,if (localTopicConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,223,if (embeddedConnectionFactory == null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,225,if (localConnectionFactoryName != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,227,.lookup(localConnectionFactoryName, TopicConnectionFactory.class);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,228,if (localUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,229,newConnection = localTopicConnectionFactory
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,230,.createTopicConnection(localUsername, localPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,232,newConnection = localTopicConnectionFactory.createTopicConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,235,throw new JMSException("Cannot create localConnection - no information");
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,238,newConnection = embeddedConnectionFactory.createTopicConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,241,if (localUsername != null) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,242,newConnection = localTopicConnectionFactory.
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,243,createTopicConnection(localUsername, localPassword);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,245,newConnection = localTopicConnectionFactory.createTopicConnection();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,251,newConnection = (TopicConnection) localConnection.getAndSet(null);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,254,if (localClientId != null && localClientId.length() > 0) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,255,newConnection.setClientID(getLocalClientId());
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,257,newConnection.start();
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,259,inboundMessageConvertor.setConnection(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,262,initializeInboundDestinationBridgesLocalSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,263,initializeOutboundDestinationBridgesLocalSide(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,267,newConnection.setExceptionListener(new ExceptionListener() {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,269,public void onException(JMSException exception) {
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,270,handleConnectionFailure(newConnection);
activemq-broker/src/main/java/org/apache/activemq/network/jms/SimpleJmsTopicConnector.java,275,localConnection.set(newConnection);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,590,addConsumerBrokerExchange(info.getConsumerId());
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1423,private ConsumerBrokerExchange addConsumerBrokerExchange(ConsumerId id) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1428,TransportConnectionState state = lookupConnectionState(id);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1429,context = state.getContext();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1431,SessionState ss = state.getSessionState(id.getParentId());
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,67,protected ServerSocket serverSocket;
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,107,protected BlockingQueue<Socket> socketQueue = new LinkedBlockingQueue<Socket>();
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,113,protected AtomicInteger currentTransportCount = new AtomicInteger();
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,130,this.serverSocket = serverSocketFactory.createServerSocket(bind.getPort(), backlog, addr);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,131,configureServerSocket(this.serverSocket);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,398,if (serverSocket != null) {
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,399,serverSocket.close();
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpTransportFactory.java,26,import org.apache.activemq.transport.InactivityMonitor;
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpTransportFactory.java,60,LOG.trace("Not created with a TextWireFormat: " + wireFormat);
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpTransportFactory.java,90,HttpClientTransport httpTransport = (HttpClientTransport)transport.narrow(HttpClientTransport.class);
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpTransportFactory.java,91,if(httpTransport != null && httpTransport.isTrace() ) {
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpTransportFactory.java,100,transport = new InactivityMonitor(transport, null /* ignore wire format as no negotiation over http */);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,124,return getConnection().getExceptionListener();
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,134,getConnection().setExceptionListener(exceptionListener);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnectionFactory.java,270,connectionsPool != null ? connectionsPool.getNumActive() : 0);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,103,private final TransportListener disposedListener = new DefaultTransportListener() {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,105,private final TransportListener myTransportListener = createTransportListener();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,171,TransportListener createTransportListener() {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,175,Command command = (Command) o;
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,176,if (command == null) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,177,return;
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,179,if (command.isResponse()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,180,Object object = null;
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,181,synchronized (requestMap) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,182,object = requestMap.remove(Integer.valueOf(((Response) command).getCorrelationId()));
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,184,if (object != null && object.getClass() == Tracked.class) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,185,((Tracked) object).onResponses(command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,192,if (command.isConnectionControl()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,193,handleConnectionControl((ConnectionControl) command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,195,if (transportListener != null) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,196,transportListener.onCommand(command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,203,handleTransportFailure(error);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,206,transportListener.onException(new InterruptedIOException());
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,212,if (transportListener != null) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,213,transportListener.transportInterupted();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,219,if (transportListener != null) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,220,transportListener.transportResumed();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,331,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,332,LOG.debug("Started " + this);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,357,LOG.debug("Stopped " + this);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,392,if (LOG.isTraceEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,393,LOG.trace("Stopped backup: " + transport);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,566,myTransportListener.onCommand(response);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,576,myTransportListener.onCommand(dispatch);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,592,if (LOG.isTraceEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,593,LOG.trace("Waiting for transport to reconnect..: " + command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,598,if (LOG.isInfoEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,599,LOG.info("Failover timed out after " + (end - start) + "ms");
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,607,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,608,LOG.debug("Interupted: " + e, e);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,666,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,667,LOG.debug("Send oneway attempt: " + i + " failed for command:" + command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,676,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,677,LOG.debug("Send oneway attempt: " + i + " failed for command:" + command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,745,LOG.error("Failed to parse URI: " + u);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,788,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,789,LOG.debug("urlList connectionList:" + l + ", from: " + uris);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,833,if (LOG.isTraceEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,834,LOG.trace("restore requestMap, replay: " + command);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,888,LOG.error("Failed to read updateURIsURL: " + fileURL, ioe);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,926,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,927,LOG.debug("Doing rebalance from: " + connectedTransportURI + " to " + connectList);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,936,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,937,LOG.debug("Caught an exception stopping existing transport for rebalance", e);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,998,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,999,LOG.debug("Attempting  " + connectFailures + "th  connect to: " + uri);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1001,transport.setTransportListener(myTransportListener);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1004,if (started &&  !firstConnection) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1008,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1009,LOG.debug("Connection established");
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1033,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1034,LOG.debug("transport resumed by transport listener not set");
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1040,LOG.info("Successfully connected to " + uri);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1042,LOG.info("Successfully reconnected to " + uri);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1049,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1050,LOG.debug("Connect fail to: " + uri + ", reason: " + e);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1057,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1058,LOG.debug("Stop of failed transport: " + transport +
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1074,LOG.error("Failed to connect to " + uris + " after: " + connectFailures + " attempt(s)");
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1365,LOG.error("Failed to Lookup INetAddress for URI[ " + first + " ] : " + e);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1367,LOG.error("Failed to Lookup INetAddress for URI[ " + second + " ] : " + e);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,972,if (transport == null && !firstConnection && (reconnectDelay > 0) && !disposed) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,973,synchronized (sleepMutex) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,974,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,975,LOG.debug("Waiting " + reconnectDelay + " ms before attempting connection. ");
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,977,try {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,978,sleepMutex.wait(reconnectDelay);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,980,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1103,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,1104,LOG.debug("Waiting " + reconnectDelay + " ms before attempting connection");
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,37,ManagedRegionBroker broker;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/HealthView.java,38,String currentState = "Good";
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,261,journal = new Journal() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,263,protected void cleanup() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,264,super.cleanup();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,265,txStoreCleanup();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,268,journal.setDirectory(getDirectory());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,269,journal.setMaxFileLength(journalMaxFileLength);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,270,journal.setWriteBatchSize(journalWriteBatchSize);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,271,IOHelper.mkdirs(journal.getDirectory());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,272,journal.start();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,273,recoverPendingLocalTransactions();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,274,store(new KahaTraceCommand().setMessage("LOADED " + new Date()));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,294,journal.close();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,295,journal = null;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,870,ByteSequence data = getContent();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,871,if (data == null) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,872,data = new ByteSequence(new byte[] {}, 0, 0);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,874,InputStream is = new ByteArrayInputStream(data);
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,875,if (isCompressed()) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,887,length = data.getLength();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,889,dataIn = new DataInputStream(is);
activemq-client/src/main/java/org/apache/activemq/command/Message.java,145,copy.content = content;
activemq-client/src/main/java/org/apache/activemq/command/Message.java,146,copy.marshalledProperties = marshalledProperties;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1215,doPageIn(true, false);  // signal no expiry processing needed.
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1581,pageInMessages(hasBrowsers);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1820,doPageIn(force, true);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1823,private void doPageIn(boolean force, boolean processExpired) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1824,PendingList newlyPaged = doPageInForDispatch(force, processExpired);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1842,private PendingList doPageInForDispatch(boolean force, boolean processExpired) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1846,int toPageIn = Math.min(getMaxPageSize(), messages.size());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1848,new Object[]{
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1850,toPageIn,
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1851,destinationStatistics.getInflight().getCount(),
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1852,pagedInMessages.size(),
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1853,destinationStatistics.getEnqueues().getCount(),
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1868,if (toPageIn > 0 && (force || (!consumers.isEmpty() && pagedInPendingSize < getMaxPageSize()))) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1876,while (messages.hasNext() && count < toPageIn) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2085,protected void pageInMessages(boolean force) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2086,doDispatch(doPageInForDispatch(force, true));
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2104,boolean zeroPrefetch = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2108,zeroPrefetch |= s.getPrefetchSize() == 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2115,if (total == 0 && zeroPrefetch) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,2116,total = 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1046,Checksum checksum = new Adler32();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1050,for (PageWrite w : batch) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1051,if (enableRecoveryFile) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1061,writeFile.seek(toOffset(w.page.getPageId()));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1062,writeFile.write(w.getDiskBound(), 0, pageSize);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1063,w.done();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1067,if (enableRecoveryFile) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1069,if (recoveryPageCount > recoveryFileMaxPageCount) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1070,int t = Math.max(recoveryFileMinPageCount, batch.size());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1071,recoveryFile.setLength(recoveryFileSizeForPages(t));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1075,recoveryFile.seek(0);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1077,recoveryFile.writeLong(nextTxid.get());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1081,recoveryFile.writeLong(checksum.getValue());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1083,recoveryFile.writeInt(batch.size());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1088,if (enableRecoveryFile) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,718,if (isGcIfInactive()&& this.lastActiveTime != 0l) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,266,return safeGetBroker().getTopics();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,271,return safeGetBroker().getQueues();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,276,return safeGetBroker().getTemporaryTopics();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,281,return safeGetBroker().getTemporaryQueues();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,286,return safeGetBroker().getTopicSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,291,return safeGetBroker().getDurableTopicSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,296,return safeGetBroker().getQueueSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,301,return safeGetBroker().getTemporaryTopicSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,306,return safeGetBroker().getTemporaryQueueSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,311,return safeGetBroker().getInactiveDurableTopicSubscribers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,316,return safeGetBroker().getTopicProducers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,321,return safeGetBroker().getQueueProducers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,326,return safeGetBroker().getTemporaryTopicProducers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,331,return safeGetBroker().getTemporaryQueueProducers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/BrokerView.java,336,return safeGetBroker().getDynamicDestinationProducers();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedRegionBroker.java,21,import java.util.HashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedRegionBroker.java,22,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedRegionBroker.java,24,import java.util.Map;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagedRegionBroker.java,26,import java.util.Set;
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,33,import org.apache.activemq.ActiveMQQueueSession;
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,35,import org.apache.activemq.ActiveMQTopicSession;
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,73,return new ServerSessionImpl(this, (ActiveMQSession)session, activeMQAsfEndpointWorker.workManager, endpoint, true, batchSize);
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,77,return new ServerSessionImpl(this, (ActiveMQSession)session, activeMQAsfEndpointWorker.workManager, endpoint, false, batchSize);
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,223,List l = session.getUnconsumedMessages();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1581,if (pendingAcks == null || pendingAcks.size() <= 1) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,87,worker.release();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,62,return retainCounter.get()==0;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,72,Runnable task;
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,73,while( (task= ioTasks.poll()) !=null ) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,91,processIoTasks();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,93,int count = selector.select(10);
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,101,Set keys = selector.selectedKeys();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,103,for (Iterator i = keys.iterator(); i.hasNext();) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,104,final SelectionKey key = (SelectionKey)i.next();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,107,final SelectorSelection s = (SelectorSelection)key.attachment();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,109,if( key.isValid() ) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,137,Set keys = selector.keys();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,138,for (Iterator i = keys.iterator(); i.hasNext();) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,139,SelectionKey key = (SelectionKey)i.next();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,140,SelectorSelection s = (SelectorSelection)key.attachment();
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorWorker.java,148,ignore.printStackTrace();
activemq-broker/src/main/java/org/apache/activemq/util/BrokerSupport.java,34,private BrokerSupport() {
activemq-broker/src/main/java/org/apache/activemq/util/BrokerSupport.java,51,public static void doResend(final ConnectionContext context, Message originalMessage, ActiveMQDestination deadLetterDestination, boolean copy) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,734,ActiveMQDestination deadLetterDestination = deadLetterStrategy.getDeadLetterQueueFor(message, subscription);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,607,getPersistenceAdapter().setUsageManager(getProducerSystemUsage());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,608,getPersistenceAdapter().setBrokerName(getBrokerName());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,609,LOG.info("Using Persistence Adapter: {}", getPersistenceAdapter());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,613,getPersistenceAdapter().start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,751,stopper.stop(getManagementContext());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1126,if (persistenceAdapter == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,593,startException = e;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,627,startException = t;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,637,if (startException != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,638,return;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,748,stopper.stop(persistenceAdapter);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,889,if (startException != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1125,public PersistenceAdapter getPersistenceAdapter() throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2880,public Throwable getStartException() {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,507,LOG.debug("{} detail: {}", message, cause);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,263,message.setRegionDestination(Queue.this);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1626,metadata.ackMessageFileMap.remove(candidate);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1629,boolean result = true;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1630,boolean empty = true;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1632,File directory = getTmpDataDirectory();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1633,if (directory.exists() && directory.isDirectory()) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1634,File[] files = directory.listFiles();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1635,if (files != null && files.length > 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1636,empty = false;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1637,for (int i = 0; i < files.length; i++) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1638,File file = files[i];
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1639,if (!file.isDirectory()) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1640,result &= file.delete();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1645,if (!empty) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1646,String str = result ? "Successfully deleted" : "Failed to delete";
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1647,LOG.info("{} temporary storage", str);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1654,this.tempDataStore.start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1669,try {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1670,tempDataStore.start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1672,RuntimeException exception = new RuntimeException("Failed to start provided temp data store: " + tempDataStore, e);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1673,LOG.error(exception.getLocalizedMessage(), e);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1674,throw exception;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,778,if (LOG.isInfoEnabled()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,779,LOG.info("Some journal files are missing: " + missingJournalFiles);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,795,missingPredicates.add(new BTreeVisitor.BetweenVisitor<Location, Long>(new Location(id, (int) seq.getFirst()), new Location(id, (int) seq.getLast() + 1)));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,827,throw new IOException("Detected missing/corrupt journal files. "+matches.size()+" messages affected.");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/BTreeVisitor.java,169,return first+" <= key < "+last;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,184,public void doStart() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,83,message.setRegionDestination(regionDestination);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,319,ActiveMQTopic topic = AdvisorySupport.getExpiredMessageTopic(messageReference.getMessage().getDestination());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,336,ActiveMQTopic topic = AdvisorySupport.getMessageConsumedAdvisoryTopic(messageReference.getMessage().getDestination());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,351,ActiveMQTopic topic = AdvisorySupport.getMessageDeliveredAdvisoryTopic(messageReference.getMessage().getDestination());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,366,ActiveMQTopic topic = AdvisorySupport.getMessageDiscardedAdvisoryTopic(messageReference.getMessage().getDestination());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,450,ActiveMQTopic topic = AdvisorySupport.getMessageDLQdAdvisoryTopic(messageReference.getMessage().getDestination());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,460,message.setRegionDestination(this);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,636,boolean interrupted = Thread.interrupted();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,725,if (interrupted) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,726,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,691,boolean interrupted = Thread.interrupted();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,699,if (interrupted) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,700,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,641,boolean interrupted = Thread.interrupted();
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,646,if (interrupted) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,647,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,19,import java.io.InterruptedIOException;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,32,import org.apache.activemq.command.Command;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,38,import org.apache.activemq.command.Response;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,322,syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,397,try {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,398,beforeEnd();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,400,throw toXAException(e);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,402,setXid(null);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,408,try {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,409,beforeEnd();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,411,throw toXAException(e);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,413,setXid(null);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,453,IntegerResponse response = (IntegerResponse)syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,517,syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,557,syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,617,syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,714,syncSendPacketWithInterruptionHandling(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,755,private Response syncSendPacketWithInterruptionHandling(Command command) throws JMSException {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,756,try {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,757,return this.connection.syncSendPacket(command);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,759,if (e.getLinkedException() instanceof InterruptedIOException) {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,760,try {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,761,Thread.interrupted();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,762,return this.connection.syncSendPacket(command);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,764,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,768,throw e;
activemq-client/src/main/java/org/apache/activemq/transport/FutureResponse.java,42,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/transport/FutureResponse.java,43,if (LOG.isDebugEnabled()) {
activemq-client/src/main/java/org/apache/activemq/transport/FutureResponse.java,44,LOG.debug("Operation interupted: " + e, e);
activemq-client/src/main/java/org/apache/activemq/transport/FutureResponse.java,46,throw new InterruptedIOException("Interrupted.");
activemq-client/src/main/java/org/apache/activemq/transport/FutureResponse.java,58,throw new InterruptedIOException("Interrupted.");
activemq-client/src/main/java/org/apache/activemq/transport/ResponseCorrelator.java,67,FutureResponse future = new FutureResponse(responseCallback);
activemq-client/src/main/java/org/apache/activemq/transport/ResponseCorrelator.java,125,dispose(error);
activemq-client/src/main/java/org/apache/activemq/transport/WireFormatNegotiator.java,97,if (!readyCountDownLatch.await(negotiateTimeout, TimeUnit.MILLISECONDS)) {
activemq-client/src/main/java/org/apache/activemq/transport/WireFormatNegotiator.java,101,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/transport/WireFormatNegotiator.java,102,throw new InterruptedIOException();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,120,public FailoverTransport() throws InterruptedIOException {
activemq-client/src/main/java/org/apache/activemq/transport/fanout/FanoutTransport.java,159,public FanoutTransport() throws InterruptedIOException {
activemq-client/src/main/java/org/apache/activemq/util/ThreadPoolUtils.java,127,executorService.shutdownNow();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,718,sd.locationIndex.remove(tx, keys.location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,719,sd.messageIdIndex.remove(tx, keys.messageId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,720,metadata.producerSequenceIdTracker.rollback(keys.messageId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,721,undoCounter++;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,64,boolean matches = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,65,MessageEvaluationContext msgContext = new NonCachedMessageEvaluationContext();
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,66,msgContext.setDestination(dest.getActiveMQDestination());
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,67,msgContext.setMessageReference(message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,68,List<Subscription> subs = dest.getConsumers();
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,69,for (Subscription sub : subs) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,70,if (sub.matches(message, msgContext)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,71,matches = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,72,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,77,matches = tryMatchingCachedSubs(broker, dest, msgContext);
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/SelectorAwareVirtualTopicInterceptor.java,79,return matches;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1368,md.setRollbackCause(e);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,836,checkUsage(context, producerExchange, message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,837,sendLock.lockInterruptibly();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,838,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,839,if (store != null && message.isPersistent()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,863,sendLock.unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreQueueCursor.java,96,nonPersistent.addMessageLast(node);
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,380,LOG.info("socketQueue interuppted - stopping");
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,381,if (!isStopping()) {
activemq-broker/src/main/java/org/apache/activemq/util/IOHelper.java,189,throw new IOException("Failed to move " + src + " to " + targetDirectory);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,59,BrokerService brokerService;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,447,this.brokerService = brokerService;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,455,public BrokerService getBrokerService() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,456,return brokerService;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,118,X509Certificate[] peerCerts = ((SslTransport) next).getPeerCertificates();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,119,if (trace && peerCerts != null) {
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,120,LOG.debug("Peer Identity has been verified\n");
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,122,return peerCerts;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTTransportFilter.java,124,return null;
activemq-client/src/main/java/org/apache/activemq/usage/MemoryUsage.java,77,usageLock.readLock().lock();
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java,83,inputBuffer = ByteBuffer.allocate(8 * 1024);
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java,87,NIOOutputStream outPutStream = new NIOOutputStream(channel, 16 * 1024);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,591,&& !Thread.currentThread().isInterrupted()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1057,indexLock.readLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1061,indexLock.readLock().unlock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1273,long id = sd.orderIndex.getNextMessageId(priority);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1341,LOG.debug("no message sequence exists for id: " + command.getMessageId() + " and sub: " + command.getSubscriptionKey());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2880,long getNextMessageId(int priority) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,359,Map transactionMap = null;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,360,synchronized (xaTransactions) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,361,transactionMap = xid.isXATransaction() ? xaTransactions : context.getTransactions();
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,363,Transaction transaction = (Transaction)transactionMap.get(xid);
activemq-http/src/main/java/org/apache/activemq/transport/SecureSocketConnectorFactory.java,22,import org.apache.activemq.transport.https.Krb5AndCertsSslSocketConnector;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,19,import java.io.IOException;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,20,import java.net.ServerSocket;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,21,import java.security.KeyManagementException;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,22,import java.security.NoSuchAlgorithmException;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,23,import java.security.NoSuchProviderException;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,24,import java.security.Principal;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,25,import java.util.Collections;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,26,import java.util.List;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,27,import java.util.Random;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,28,import javax.net.ssl.SSLContext;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,29,import javax.net.ssl.SSLServerSocket;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,30,import javax.net.ssl.SSLSocket;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,32,import org.eclipse.jetty.http.HttpSchemes;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,33,import org.eclipse.jetty.io.EndPoint;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,34,import org.eclipse.jetty.server.Request;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,35,import org.eclipse.jetty.server.ssl.ServletSSL;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,36,import org.eclipse.jetty.server.ssl.SslSocketConnector;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,37,import org.eclipse.jetty.util.ssl.SslContextFactory;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,38,import org.slf4j.Logger;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,39,import org.slf4j.LoggerFactory;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,47,public class Krb5AndCertsSslSocketConnector extends SslSocketConnector {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,48,public static final List<String> KRB5_CIPHER_SUITES = Collections.unmodifiableList(Collections.singletonList("TLS_KRB5_WITH_3DES_EDE_CBC_SHA"));
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,49,static {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,50,System.setProperty("https.cipherSuites", KRB5_CIPHER_SUITES.get(0));
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,53,private static final Logger LOG = LoggerFactory.getLogger(Krb5AndCertsSslSocketConnector.class);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,55,private static final String REMOTE_PRINCIPAL = "remote_principal";
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,57,public enum MODE {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,58,KRB, CERTS, BOTH
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,61,private boolean useKrb;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,62,private boolean useCerts;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,64,public Krb5AndCertsSslSocketConnector() {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,66,super();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,67,useKrb = false;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,68,useCerts = true;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,69,setPasswords();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,72,public static boolean isKrb(String mode) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,73,return mode == MODE.KRB.toString() || mode == MODE.BOTH.toString();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,76,public void setMode(String mode) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,77,useKrb = mode == MODE.KRB.toString() || mode == MODE.BOTH.toString();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,78,useCerts = mode == MODE.CERTS.toString() || mode == MODE.BOTH.toString();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,79,logIfDebug("useKerb = " + useKrb + ", useCerts = " + useCerts);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,84,private void setPasswords() {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,85,if (!useCerts) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,86,Random r = new Random();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,87,System.setProperty("jetty.ssl.password", String.valueOf(r.nextLong()));
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,88,System.setProperty("jetty.ssl.keypassword", String.valueOf(r.nextLong()));
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,93,public SslContextFactory getSslContextFactory() {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,94,final SslContextFactory factory = super.getSslContextFactory();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,96,if (useCerts) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,97,return factory;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,100,try {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,101,SSLContext context = factory.getProvider() == null ? SSLContext.getInstance(factory.getProtocol()) : SSLContext.getInstance(factory.getProtocol(),
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,102,factory.getProvider());
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,103,context.init(null, null, null);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,104,factory.setSslContext(context);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,110,return factory;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,121,protected ServerSocket newServerSocket(String host, int port, int backlog) throws IOException {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,122,logIfDebug("Creating new KrbServerSocket for: " + host);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,123,SSLServerSocket ss = null;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,125,if (useCerts) // Get the server socket from the SSL super impl
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,126,ss = (SSLServerSocket) super.newServerSocket(host, port, backlog);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,127,else { // Create a default server socket
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,128,try {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,129,ss = (SSLServerSocket) super.newServerSocket(host, port, backlog);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,131,LOG.warn("Could not create KRB5 Listener", e);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,132,throw new IOException("Could not create KRB5 Listener: " + e.toString());
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,137,if (useKrb) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,138,ss.setNeedClientAuth(true);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,139,String[] combined;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,140,if (useCerts) { // combine the cipher suites
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,141,String[] certs = ss.getEnabledCipherSuites();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,142,combined = new String[certs.length + KRB5_CIPHER_SUITES.size()];
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,143,System.arraycopy(certs, 0, combined, 0, certs.length);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,144,System.arraycopy(KRB5_CIPHER_SUITES.toArray(new String[0]), 0, combined, certs.length, KRB5_CIPHER_SUITES.size());
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,146,combined = KRB5_CIPHER_SUITES.toArray(new String[0]);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,149,ss.setEnabledCipherSuites(combined);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,151,return ss;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,155,public void customize(EndPoint endpoint, Request request) throws IOException {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,156,if (useKrb) { // Add Kerberos-specific info
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,157,SSLSocket sslSocket = (SSLSocket) endpoint.getTransport();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,158,Principal remotePrincipal = sslSocket.getSession().getPeerPrincipal();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,159,logIfDebug("Remote principal = " + remotePrincipal);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,160,request.setScheme(HttpSchemes.HTTPS);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,161,request.setAttribute(REMOTE_PRINCIPAL, remotePrincipal);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,163,if (!useCerts) { // Add extra info that would have been added by
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,165,String cipherSuite = sslSocket.getSession().getCipherSuite();
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,166,Integer keySize = Integer.valueOf(ServletSSL.deduceKeyLength(cipherSuite));
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,167,;
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,169,request.setAttribute("javax.servlet.request.cipher_suite", cipherSuite);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,170,request.setAttribute("javax.servlet.request.key_size", keySize);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,175,super.customize(endpoint, request);
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,178,private void logIfDebug(String s) {
activemq-http/src/main/java/org/apache/activemq/transport/https/Krb5AndCertsSslSocketConnector.java,180,LOG.debug(s);
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,28,import org.apache.activemq.transport.tcp.SslTransportServer;
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,91,Connector connector = context.getConnector();
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,92,if (connector instanceof TransportConnector) {
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,93,TransportConnector transportConnector = (TransportConnector) connector;
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,94,isSSL = transportConnector.getServer().isSslServer();
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,99,if (isSSL) {
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,113,boolean isSSL;
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,114,Connector connector = context.getConnector();
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,115,if (connector instanceof TransportConnector) {
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,116,TransportConnector transportConnector = (TransportConnector) connector;
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,117,isSSL = (transportConnector.getServer() instanceof SslTransportServer);
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,119,isSSL = false;
activemq-broker/src/main/java/org/apache/activemq/security/JaasDualAuthenticationBroker.java,122,if (isSSL) {
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,73,int nextMinutes = getNext(minutes, currentMinutes);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,79,int nextHour = getNext(hours, currentHours);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,103,int nextHour = getNext(hours, currentHours);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,109,int nextMinutes = getNext(minutes, currentMinutes);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,126,int nextMonth = getNext(month, currentMonth);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,153,nextWeekDay = getNext(dayOfWeek, currentDayOfWeek);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,157,nextCalendarDay = getNext(dayOfMonth, currentDayOfMonth);
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,193,static int getNext(final CronEntry entry, final int current) throws MessageFormatException {
activemq-client/src/main/java/org/apache/activemq/broker/scheduler/CronParser.java,212,result = entry.end + first - entry.start - current;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1402,BrokerSupport.resend(context, m.getMessage(), dest);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1403,removeMessage(context, m);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1404,messagesLock.writeLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1406,messages.rollback(m.getMessageId());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1407,if (isDLQ()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1408,DeadLetterStrategy stratagy = getDeadLetterStrategy();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1409,stratagy.rollback(m.getMessage());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1412,messagesLock.writeLock().unlock();
activemq-osgi/src/main/java/org/apache/activemq/osgi/ActiveMQServiceFactory.java,105,broker.waitUntilStarted();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,65,public void marshal(Object command, DataOutput os) throws IOException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,66,StompFrame stomp = (org.apache.activemq.transport.stomp.StompFrame)command;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,68,if (stomp.getAction().equals(Stomp.Commands.KEEPALIVE)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,69,os.write(Stomp.BREAK);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,70,return;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,73,StringBuilder buffer = new StringBuilder();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompWireFormat.java,88,os.write(buffer.toString().getBytes("UTF-8"));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,52,protected final LinkedHashMap<MessageId, MessageDispatch> dispatchedMessage = new LinkedHashMap<MessageId, MessageDispatch>();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,53,protected final LinkedList<MessageDispatch> unconsumedMessage = new LinkedList<MessageDispatch>();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,68,if (ackMode == CLIENT_ACK) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,69,synchronized (this) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,70,dispatchedMessage.put(message.getMessageId(), md);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,186,dispatchedMessage.remove(msgId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1477,gcCandidateSet.remove(lastUpdate.getDataFileId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1465,pageFile.flush();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2260,public long getStoredMessageCount(Transaction tx, StoredDestination sd, String subscriptionKey) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2261,SequenceSet messageSequences = sd.ackPositions.get(tx, subscriptionKey);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2262,if (messageSequences != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2263,long result = messageSequences.rangeSize();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2265,return result > 0 ? result - 1 : 0;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionStateTracker.java,182,Vector<TransactionInfo> toRollback = new Vector<TransactionInfo>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2411,List<TransportConnector> al = new ArrayList<TransportConnector>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,972,LOG.error("KahaDB failed to store to Journal", ioe);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,195,firstAsyncException = null;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,198,if (firstAsyncException != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,199,throw firstAsyncException;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,377,firstAsyncException = e;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,378,if (wb != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,379,wb.exception.set(e);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,380,wb.latch.countDown();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,382,if (nextWriteBatch != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,383,nextWriteBatch.exception.set(e);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,384,nextWriteBatch.latch.countDown();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,409,if (write.onComplete != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1434,pageFile.tx().execute(new Transaction.Closure<IOException>() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1436,public void execute(Transaction tx) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1437,checkpointUpdate(tx, cleanup);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1453,void checkpointUpdate(Transaction tx, boolean cleanup) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2075,protected ObjectName createNetworkConnectorObjectName(NetworkConnector connector) throws MalformedObjectNameException {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2410,Set<ActiveMQDestination> durableDestinations = getBroker().getDurableDestinations();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2450,connector.setBrokerName(getBrokerName());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2451,connector.setDurableDestinations(durableDestinations);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2452,if (getDefaultSocketURIString() != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2453,connector.setBrokerURL(getDefaultSocketURIString());
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2455,if (networkConnectorStartExecutor != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2456,networkConnectorStartExecutor.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2458,public void run() {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2459,try {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2460,LOG.info("Async start of {}", connector);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2461,connector.start();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2463,LOG.error("Async start of network connector: {} failed", connector, e);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2468,connector.start();
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,45,private ExecutorService executor;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,83,if (initDone.compareAndSet(false, true)) {
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,86,if (dedicatedTaskRunner || "true".equalsIgnoreCase(System.getProperty("org.apache.activemq.UseDedicatedTaskRunner"))) {
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,87,executor = null;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,89,executor = createDefaultExecutor();
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,91,LOG.debug("Initialized TaskRunnerFactory[{}] using ExecutorService: {}", name, executor);
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,103,executor = null;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,105,initDone.set(false);
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,116,executor = null;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,118,initDone.set(false);
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,129,executor = null;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,131,initDone.set(false);
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,187,return executor;
activemq-client/src/main/java/org/apache/activemq/thread/TaskRunnerFactory.java,191,this.executor = executor;
activemq-client/src/main/java/org/apache/activemq/transport/tcp/TcpTransportServer.java,176,IntrospectionSupport.setProperties(socket, transportOptions);
activemq-client/src/main/java/org/apache/activemq/util/IntrospectionSupport.java,139,public static boolean setProperties(Object target, Map props) {
activemq-client/src/main/java/org/apache/activemq/util/IntrospectionSupport.java,152,iter.remove();
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,272,boolean isActive = destinationStatistics.getConsumers().getCount() != 0 ||
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,273,destinationStatistics.getProducers().getCount() != 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,274,if (isActive && isGcWithNetworkConsumers() && destinationStatistics.getConsumers().getCount() != 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,191,super.removeSubscription(context, sub, lastDeliveredSequenceId);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,193,consumers.remove(sub);
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,183,if (sub.matches(destination)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,184,throw new JMSException("Destination still has an active subscription: " + destination);
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,143,addSubscriptionsForDestination(context, dest);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1496,LOG.trace("gc candidates after producerSequenceIdTrackerLocation:" + dataFileId + ", " + gcCandidateSet);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1504,LOG.trace("gc candidates after ackMessageFileMapLocation:" + dataFileId + ", " + gcCandidateSet);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1515,LOG.trace("gc candidates after tx range:" + Arrays.asList(inProgressTxRange) + ", " + gcCandidateSet);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,426,if (writeFile.length() < PAGE_FILE_HEADER_SIZE) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,427,writeFile.setLength(PAGE_FILE_HEADER_SIZE);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,429,nextFreePageId.set((writeFile.length() - PAGE_FILE_HEADER_SIZE) / pageSize);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1214,do {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1216,pagedInMessagesLock.readLock().lock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1217,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1218,list = new ArrayList<MessageReference>(pagedInMessages.values());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1220,pagedInMessagesLock.readLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1223,for (MessageReference ref : list) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1225,QueueMessageReference r = (QueueMessageReference) ref;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1226,removeMessage(c, r);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1234,if (this.destinationStatistics.getMessages().getCount() > 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1237,gc();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1238,this.destinationStatistics.getMessages().setCount(0);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1239,getMessages().clear();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,125,protected transient Map<Integer, Set<Integer>> ackMessageFileMap = new HashMap<Integer, Set<Integer>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,131,destinations = new BTreeIndex<String, StoredDestination>(pageFile, is.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,283,metadata.destinations = new BTreeIndex<String, StoredDestination>(pageFile, tx.allocate().getPageId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,395,IOHelper.mkdirs(directory);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,415,if( opened.compareAndSet(true, false)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,500,HashMap<KahaDestination, opCount> destinationOpCount = new HashMap<KahaDestination, opCount>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,543,ArrayList<TranInfo> infos = new ArrayList<TranInfo>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,607,Set<TransactionId> toRollback = new HashSet<TransactionId>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,608,Set<TransactionId> toDiscard = new HashSet<TransactionId>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,707,final ArrayList<Long> matches = new ArrayList<Long>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,771,HashSet<Integer> missingJournalFiles = new HashSet<Integer>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,783,ArrayList<BTreeVisitor.Predicate<Location>> missingPredicates = new ArrayList<BTreeVisitor.Predicate<Location>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1260,private final HashSet<Integer> journalFilesBeingReplicated = new HashSet<Integer>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1351,referenceFileIds = new HashSet<Integer>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1469,final TreeSet<Integer> completeFileSet = new TreeSet<Integer>(journal.getFileMap().keySet());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1470,final TreeSet<Integer> gcCandidateSet = new TreeSet<Integer>(completeFileSet);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1818,final TreeMap<Long, Long> messageReferences = new TreeMap<Long, Long>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1819,final HashSet<String> subscriptionCache = new LinkedHashSet<String>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1827,value.orderIndex.defaultPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1828,value.locationIndex = new BTreeIndex<Location, Long>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1829,value.messageIdIndex = new BTreeIndex<String, Long>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1832,value.subscriptions = new BTreeIndex<String, KahaSubscriptionCommand>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1833,value.subscriptionAcks = new BTreeIndex<String, LastAck>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1835,value.ackPositions = new ListIndex<String, SequenceSet>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1841,LinkedHashMap<String, SequenceSet> temp = new LinkedHashMap<String, SequenceSet>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1846,new BTreeIndex<Long, HashSet<String>>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1871,value.ackPositions = new ListIndex<String, SequenceSet>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1884,value.subLocations = new ListIndex<String, Location>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1890,value.subLocations = new ListIndex<String, Location>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1899,value.orderIndex.lowPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1900,value.orderIndex.highPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, dataIn.readLong());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1906,value.orderIndex.lowPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1911,value.orderIndex.highPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1994,rc.locationIndex = new BTreeIndex<Location, Long>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1995,rc.messageIdIndex = new BTreeIndex<String, Long>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1998,rc.subscriptions = new BTreeIndex<String, KahaSubscriptionCommand>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1999,rc.subscriptionAcks = new BTreeIndex<String, LastAck>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2000,rc.ackPositions = new ListIndex<String, SequenceSet>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2001,rc.subLocations = new ListIndex<String, Location>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2039,rc.subscriptionCursors = new HashMap<String, MessageOrderCursor>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2180,ArrayList<Long> unreferenced = new ArrayList<Long>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2198,ArrayList<Entry<Long, MessageKeys>> deletes = new ArrayList<Entry<Long, MessageKeys>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2243,ArrayList<Entry<Long, MessageKeys>> deletes = new ArrayList<Entry<Long, MessageKeys>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2279,private final LinkedHashMap<TransactionId, List<Operation>> inflightTransactions = new LinkedHashMap<TransactionId, List<Operation>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2281,protected final LinkedHashMap<TransactionId, List<Operation>> preparedTransactions = new LinkedHashMap<TransactionId, List<Operation>>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2282,protected final Set<String> ackedAndPrepared = new HashSet<String>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2738,defaultPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2740,lowPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, tx.allocate());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2741,highPriorityIndex = new BTreeIndex<Long, MessageKeys>(pageFile, tx.allocate());
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,740,if (e instanceof SecurityException) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,742,delayedStop(2000, "Failed with SecurityException: " + e.getLocalizedMessage(), e);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,100,private boolean starting;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,101,private boolean pendingStop;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,198,if (!stopping.get() && !pendingStop) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,273,if (pendingStop) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,291,if (!pendingStop) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,884,if (pendingStop || stopping.get()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,942,starting = true;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,963,pendingStop = true;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,991,pendingStop = true;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1015,pendingStop = true;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1016,if (starting) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1227,public synchronized boolean isStarting() {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1228,return starting;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1241,protected synchronized void setStarting(boolean starting) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1242,this.starting = starting;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1248,public synchronized boolean isPendingStop() {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1249,return pendingStop;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1252,protected synchronized void setPendingStop(boolean pendingStop) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1253,this.pendingStop = pendingStop;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,551,this.subscriptionRecoveryPolicy.start();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,552,if (memoryUsage != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,553,memoryUsage.start();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,563,if (taskRunner != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,564,taskRunner.shutdown();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,566,this.subscriptionRecoveryPolicy.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,567,if (memoryUsage != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,568,memoryUsage.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,570,if (this.topicStore != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,571,this.topicStore.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,574,scheduler.cancel(expireMessagesTask);
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,145,selection = SelectorManager.getInstance().register(channel, new SelectorManager.Listener() {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,146,public void onSelect(SelectorSelection selection) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,147,serviceRead();
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,150,public void onError(SelectorSelection selection, Throwable error) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,151,if (error instanceof IOException) {
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,152,onException((IOException) error);
activemq-client/src/main/java/org/apache/activemq/transport/nio/NIOSSLTransport.java,154,onException(IOExceptionSupport.create(error));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,804,final ArrayList<Long> matches = new ArrayList<Long>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,808,matches.add(value);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,819,for (Long sequenceId : matches) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,58,private static final int MAX_BATCH_SIZE = 32*1024*1024;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,269,if (ack.isStandardAck() || ack.isPoisonAck() || ack.isIndividualAck()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,270,if (context.isInTransaction()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,271,context.getTransaction().addSynchronization(new Synchronization() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,274,public void afterCommit() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,281,dispatchMatched();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,291,dispatchMatched();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,292,return;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,301,dispatchMatched();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,302,return;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,307,throw new JMSException("Invalid acknowledgment: " + ack);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,478,return getDispatchedQueueSize() <= (info.getPrefetchSize() * .4);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,486,return getDispatchedQueueSize() >= (info.getPrefetchSize() * .9);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,55,private final List<JobListener> jobListeners = new CopyOnWriteArrayList<JobListener>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,203,final List<Job> result = new ArrayList<Job>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,223,final List<Job> result = new ArrayList<Job>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,297,startTime = (startTime / 1000) * 1000;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,349,values = new ArrayList<JobLocation>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,452,List<Long> keys = new ArrayList<Long>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,526,List<JobLocation> list = new ArrayList<JobLocation>(first.getValue());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,660,this.index = new BTreeIndex<Long, List<JobLocation>>(this.store.getPageFile(), tx.allocate().getPageId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/scheduler/JobSchedulerImpl.java,671,this.index = new BTreeIndex<Long, List<JobLocation>>(this.store.getPageFile(), in.readLong());
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,65,private boolean disposed;
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,82,private boolean started;
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,133,public void clearMarshalledState() throws JMSException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMapMessage.java,134,super.clearMarshalledState();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQObjectMessage.java,211,public void clearMarshalledState() throws JMSException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQObjectMessage.java,212,super.clearMarshalledState();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQTextMessage.java,149,public void clearMarshalledState() throws JMSException {
activemq-broker/src/main/java/org/apache/activemq/broker/region/AbstractRegion.java,571,LOG.debug("setting prefetch: {}, on subscription: {}; resulting value: {}", new Object[]{ control.getPrefetch(), control.getConsumerId(), sub.getConsumerInfo().getCurrentPrefetchSize()});
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,25,import java.util.concurrent.atomic.AtomicInteger;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,59,protected final AtomicInteger prefetchExtension = new AtomicInteger();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,413,for (Destination dest : destinations) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,414,dest.wakeup();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,849,protected int getPrefetchExtension() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,850,return this.prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/QueueSubscription.java,80,+ this.prefetchExtension + ", pending=" + getPendingQueueSize();
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,461,protected Region getRegion(ActiveMQDestination destination) throws JMSException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/plist/PListStoreImpl.java,276,this.directory = new File(IOHelper.getDefaultDataDirectory() + File.pathSeparator + "delayedDB");
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,345,private boolean hasDurableSubChanged(ConsumerInfo info1, ConsumerInfo info2) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryPersistenceAdapter.java,44,public class MemoryPersistenceAdapter implements PersistenceAdapter {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBPersistenceAdapter.java,56,public class KahaDBPersistenceAdapter extends LockableServiceSupport implements PersistenceAdapter, JournaledStore, TransactionIdTransformerAware {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,46,public class MultiKahaDBPersistenceAdapter extends LockableServiceSupport implements PersistenceAdapter, BrokerServiceAware {
activemq-client/src/main/java/org/apache/activemq/util/TypeConversionSupport.java,53,public boolean equals(Object o) {
activemq-client/src/main/java/org/apache/activemq/util/TypeConversionSupport.java,54,ConversionKey x = (ConversionKey)o;
activemq-client/src/main/java/org/apache/activemq/util/TypeConversionSupport.java,55,return x.from == from && x.to == to;
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,141,return;
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,146,if (!done) {
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,147,queued = true;
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,150,if (queued) {
activemq-client/src/main/java/org/apache/activemq/thread/PooledTaskRunner.java,151,executor.execute(runable);
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFilter.java,128,X509Certificate[] peerCerts = ((SslTransport) next).getPeerCertificates();
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFilter.java,129,if (trace && peerCerts != null) {
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFilter.java,130,LOG.debug("Peer Identity has been verified\n");
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFilter.java,132,return peerCerts;
activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpTransportFilter.java,134,return null;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,21,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,24,import java.util.Map.Entry;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,32,import org.apache.activemq.store.AbstractMessageStore;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,84,if( removed !=null ) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,97,for (Iterator<Message> iter = messageTable.values().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,128,int count = 0;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,129,for (Iterator iter = messageTable.entrySet().iterator(); iter.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,130,Map.Entry entry = (Entry)iter.next();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,132,count++;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,134,lastBatchId = (MessageId)entry.getKey();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,136,listener.recoverMessageReference((MessageId)msg);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,138,listener.recoverMessage((Message)msg);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryPersistenceAdapter.java,164,return (MemoryMessageStore)value;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryPersistenceAdapter.java,167,MessageStore delegate = ((ProxyMessageStore)value).getDelegate();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryPersistenceAdapter.java,193,public File getDirectory(){
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryPersistenceAdapter.java,200,public long size(){
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,22,import java.util.Iterator;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,24,import java.util.Map.Entry;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,48,public MemoryTopicMessageStore(ActiveMQDestination destination, Map<MessageId, Message> messageTable, Map<SubscriptionKey, SubscriptionInfo> subscriberDatabase) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,64,for (Iterator<MemoryTopicSub> i = topicSubMap.values().iterator(); i.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,65,MemoryTopicSub sub = i.next();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,70,public synchronized void acknowledge(ConnectionContext context, String clientId, String subscriptionName,
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,71,MessageId messageId, MessageAck ack) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,85,MemoryTopicSub sub = new MemoryTopicSub();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,88,for (Iterator i = messageTable.entrySet().iterator(); i.hasNext();) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,89,Map.Entry entry = (Entry)i.next();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,90,sub.addMessage((MessageId)entry.getKey(), (Message)entry.getValue());
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicMessageStore.java,97,org.apache.activemq.util.SubscriptionKey key = new SubscriptionKey(clientId, subscriptionName);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicSub.java,34,private Map<MessageId, Message> map = new LinkedHashMap<MessageId, Message>();
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicSub.java,38,synchronized(this) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicSub.java,46,synchronized(this) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTopicSub.java,52,if( removed!=null ) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,131,this.persistenceAdapter=persistenceAdapter;
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,205,public void acknowledge(ConnectionContext context, String clientId, String subscriptionName,
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,206,MessageId messageId, MessageAck ack) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,207,MemoryTransactionStore.this.acknowledge((TopicMessageStore)getDelegate(), clientId,
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,208,subscriptionName, messageId, ack);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,247,public void commit(TransactionId txid, boolean wasPrepared, Runnable preCommit,Runnable postCommit) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,288,listener.recover((XATransactionId)txid, tx.getMessages(), tx.getAcks());
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,361,public void acknowledge(final TopicMessageStore destination, final String clientId, final String subscriptionName,
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,362,final MessageId messageId, final MessageAck ack) throws IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,220,msg.getMessageId().setBrokerSequenceId(sequenceId);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,221,return listener.recoverMessage(msg);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,225,return listener.recoverMessageReference(new MessageId(reference));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,664,KahaProducerAuditCommand audit = (KahaProducerAuditCommand) load(metadata.producerSequenceIdTrackerLocation);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,682,KahaAckMessageFileMapCommand audit = (KahaAckMessageFileMapCommand) load(metadata.ackMessageFileMapLocation);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1103,Message msg = (Message) wireFormat.unmarshal(new DataInputStream(addMessage.getMessage().newInput()));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1104,return msg;
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,229,if (broker.isExpired(node)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,233,((Destination)node.getRegionDestination()).getDestinationStatistics().getExpired().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,234,broker.messageExpired(getContext(), node, this);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,588,if (LOG.isInfoEnabled() && redoCounter % 100000 == 0) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,589,LOG.info("@" + recoveryPosition +  ", "  + redoCounter + " entries recovered ..");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,42,private boolean used;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,57,used = true;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,71,public synchronized void clearUsedMark() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,72,used = false;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,76,return used;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,97,synchronized void clearUsedMark() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,98,for (Pool pool : pools.values()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,99,pool.clearUsedMark();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAccessorPool.java,103,synchronized void disposeUnused() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,388,protected synchronized void cleanup() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,678,boolean expired = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,679,if (messageReference.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,680,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,682,Message message = messageReference.getMessage();
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,683,synchronized (message) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,684,expired = stampAsExpired(message);
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,687,LOG.warn("unexpected exception on message expiry determination for: {}", messageReference, e);
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,690,return expired;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,488,if (broker.isExpired(message)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,489,getDestinationStatistics().getExpired().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,490,broker.messageExpired(context, message, null);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,475,if (broker.isExpired(reference)) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,20,import java.sql.Connection;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,21,import java.sql.PreparedStatement;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,22,import java.sql.SQLException;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,23,import java.sql.Statement;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,72,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,97,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,130,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/BlobJDBCAdapter.java,155,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,70,protected ReadWriteLock cleanupExclusiveLock = new ReentrantReadWriteLock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,83,cleanupExclusiveLock.writeLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,84,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,123,cleanupExclusiveLock.writeLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,133,cleanupExclusiveLock.writeLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,152,cleanupExclusiveLock.writeLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,163,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,182,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,191,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,202,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,215,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,244,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,258,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,278,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,288,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,300,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,309,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,320,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,329,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,339,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,350,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,374,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,385,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,404,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,414,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,431,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,440,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,467,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,478,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,506,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,526,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,537,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,548,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,569,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,580,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,604,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,615,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,640,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,651,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,666,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,685,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,722,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,731,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,750,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,760,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,778,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,787,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,797,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,805,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,813,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,821,cleanupExclusiveLock.writeLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,824,s = c.getConnection().prepareStatement(this.statements.getDeleteOldMessagesStatementWithPriority());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,831,cleanupExclusiveLock.writeLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,841,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,855,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,880,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,888,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,938,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,953,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,962,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,994,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1002,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1010,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1021,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1030,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1041,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1079,cleanupExclusiveLock.readLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1089,cleanupExclusiveLock.readLock().lock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1100,cleanupExclusiveLock.readLock().unlock();
activemq-broker/src/main/java/org/apache/activemq/network/NetworkConnector.java,148,result.setDurableDestinations(dest);
activemq-broker/src/main/java/org/apache/activemq/network/NetworkConnector.java,150,return result;
activemq-broker/src/main/java/org/apache/activemq/network/NetworkConnector.java,153,protected Transport createLocalTransport() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/network/NetworkConnector.java,154,return TransportFactory.connect(localURI);
activemq-broker/src/main/java/org/apache/activemq/network/jms/JmsConnector.java,578,Thread.sleep(policy.getNextDelay(attempt));
activemq-broker/src/main/java/org/apache/activemq/network/jms/ReconnectionPolicy.java,235,nextDelay = nextDelay * (long)(attempt * backOffMultiplier);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,48,import static javax.xml.bind.DatatypeConverter.parseBase64Binary;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,49,import static javax.xml.bind.DatatypeConverter.printBase64Binary;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,81,public void doCreateTables(TransactionContext c) throws SQLException, IOException {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,82,Statement s = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,90,boolean alreadyExists = false;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,91,ResultSet rs = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,92,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,93,rs = c.getConnection().getMetaData().getTables(null, null, this.statements.getFullMessageTableName(),
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,94,new String[] { "TABLE" });
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,95,alreadyExists = rs.next();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,98,close(rs);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,100,s = c.getConnection().createStatement();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,101,String[] createStatments = this.statements.getCreateSchemaStatements();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,102,for (int i = 0; i < createStatments.length; i++) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,105,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,106,LOG.debug("Executing SQL: " + createStatments[i]);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,107,s.execute(createStatments[i]);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,109,if (alreadyExists) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,110,LOG.debug("Could not create JDBC tables; The message table already existed." + " Failure was: "
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,112,+ " Vendor code: " + e.getErrorCode());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,114,LOG.warn("Could not create JDBC tables; they could already exist." + " Failure was: "
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,116,+ " Vendor code: " + e.getErrorCode());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,117,JDBCPersistenceAdapter.log("Failure details: ", e);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,124,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,125,s.close();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,139,final BrokerService brokerService = this.broker.getBrokerService();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,184,BrokerService bService = connector.getBrokerService();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,185,if (bService.isShutdownOnSlaveFailure()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,186,if (brokerInfo != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,187,if (brokerInfo.isSlaveBroker()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,188,LOG.error("Slave has exception: {} shutting down master now.", e.getMessage(), e);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,189,try {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,190,doStop();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,191,bService.stop();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,193,LOG.warn("Failed to stop the master", ex);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1303,duplexBridge.setBrokerService(broker.getBrokerService());
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1393,result.setLastStoredSequenceId(broker.getBrokerService().getPersistenceAdapter().getLastProducerSequenceId(id));
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,104,XAException xae = new XAException("Prepare cannot be called now.");
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,105,xae.errorCode = XAException.XAER_PROTO;
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,185,XAException xae = new XAException("PRE COMMIT FAILED");
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,186,xae.errorCode = XAException.XAER_RMERR;
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,200,XAException xae = new XAException("POST COMMIT FAILED");
activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java,201,xae.errorCode = XAException.XAER_RMERR;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,388,void done() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,389,try {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,390,browser.decrementQueueRef();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,392,LOG.warn("decrement ref on browser: " + browser, e);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1577,boolean hasBrowsers = browserDispatches.size() > 0;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1590,try{
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1605,LOG.debug("dispatch to browser: {}, already dispatched/paged count: {}", browser, alreadyDispatchedMessages.size());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1859,toPageIn = Math.min(getConsumerMessageCountBeforeFull(), toPageIn);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1704,getDestinationStatistics().getDequeues().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1714,getDestinationStatistics().getDequeues().increment();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1740,if (!reference.isDropped()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1741,reference.drop();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1742,destinationStatistics.getMessages().decrement();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,533,for (MessageReference ref : unAckedMessages) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,551,if (!qmr.isDropped()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestination.java,35,private boolean copyMessage = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestination.java,83,return copyMessage;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestination.java,92,this.copyMessage = copyMessage;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestinationFilter.java,41,private boolean copyMessage;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/CompositeDestinationFilter.java,47,this.copyMessage = copyMessage;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,675,for (Destination dest :destinations) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,676,dest.slowConsumer(context, this);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,22,import javax.jms.*;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,25,import org.apache.activemq.command.*;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,35,private ActiveMQMessageTransformation() {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,48,ActiveMQDestination activeMQDestination = null;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,50,if (destination != null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,51,if (destination instanceof ActiveMQDestination) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,52,return (ActiveMQDestination)destination;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,55,if (destination instanceof TemporaryQueue) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,56,activeMQDestination = new ActiveMQTempQueue(((Queue)destination).getQueueName());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,58,activeMQDestination = new ActiveMQTempTopic(((Topic)destination).getTopicName());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,60,activeMQDestination = new ActiveMQQueue(((Queue)destination).getQueueName());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,62,activeMQDestination = new ActiveMQTopic(((Topic)destination).getTopicName());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,67,return activeMQDestination;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,149,BlobMessage blobMessage = (BlobMessage)message;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,150,ActiveMQBlobMessage msg = new ActiveMQBlobMessage();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,151,msg.setConnection(connection);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,153,msg.setBlobDownloader(new BlobDownloader(connection.getBlobTransferPolicy()));
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,155,try {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,156,msg.setURL(blobMessage.getURL());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageTransformation.java,160,activeMessage = msg;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,279,this.connection.syncSendPacket(info);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,54,private long reconnectDelay = initialReconnectDelay;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,137,LOG.debug("Failure occurred soon after the discovery event was generated.  It will be classified as a connection failure: "+event);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,142,LOG.warn("Reconnect attempts exceeded "+maxReconnectAttempts+" tries.  Reconnecting has been disabled for: " + event);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,146,synchronized (sleepMutex) {
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,147,try {
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,148,if (!running.get()) {
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,149,LOG.debug("Reconnecting disabled: stopped");
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,150,return;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,153,LOG.debug("Waiting "+event.reconnectDelay+" ms before attempting to reconnect.");
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,154,sleepMutex.wait(event.reconnectDelay);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,156,LOG.debug("Reconnecting disabled: " + ie);
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,157,Thread.currentThread().interrupt();
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,158,return;
activemq-client/src/main/java/org/apache/activemq/transport/discovery/simple/SimpleDiscoveryAgent.java,162,if (!useExponentialBackOff) {
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,104,FileInputStream fis = new FileInputStream(persistFile);
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,105,try {
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,115,fis.close();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/OpenTypeSupport.java,67,public CompositeType getCompositeType() throws OpenDataException {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,34,import org.apache.activemq.store.PListStore;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,42,import org.apache.activemq.util.ByteSequence;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,398,expireOldMessages();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,418,protected synchronized void expireOldMessages() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,424,discardExpiredMessage(node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,434,if (LOG.isTraceEnabled()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,436,LOG.trace("{}, flushToDisk() mem list size: {} {}", new Object[]{ name, memoryList.size(), (systemUsage != null ? systemUsage.getMemoryUsage() : "") });
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,337,UNSUBACK ack = new UNSUBACK();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,338,ack.messageId(command.messageId());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,339,sendToMQTT(ack.encode());
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,41,protected boolean hadSpace = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,41,private final Broker broker;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,47,public QueueStorePrefetch(Queue queue, Broker broker) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,50,this.broker = broker;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,104,hadSpace = this.hasSpace();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,105,if (!broker.getBrokerService().isPersistent() || hadSpace) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/QueueStorePrefetch.java,106,this.store.recoverNextMessages(this.maxBatchSize, this);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreQueueCursor.java,50,this.persistent = new QueueStorePrefetch(queue, broker);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,281,public boolean recoverMessage(long sequenceId, byte[] data) throws Exception {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,282,Message msg = (Message)wireFormat.unmarshal(new ByteSequence(data));
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,283,msg.getMessageId().setBrokerSequenceId(sequenceId);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,284,listener.recoverMessage(msg);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,287,return true;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,290,public boolean recoverMessageReference(String reference) throws Exception {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,291,if (listener.hasSpace()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,292,listener.recoverMessageReference(new MessageId(reference));
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,293,return true;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCMessageStore.java,295,return false;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,591,while (rs.next() && count < maxReturned) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,597,while (rs.next() && count < maxReturned) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,627,while (rs.next() && count < maxReturned) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,633,while (rs.next() && count < maxReturned) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1058,while (rs.next() && count < maxReturned) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,1067,while (rs.next() && count < maxReturned) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,601,if (counter >= maxReturned) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ProducerView.java,128,if (info != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ProducerView.java,129,return info.isDispatchAsync();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,941,String str = brokerName.replaceAll("[^a-zA-Z0-9\\.\\_\\-\\:]", "_");
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,943,LOG.error("Broker Name: {} contained illegal characters - replaced with {}", brokerName, str);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1496,vmConnectorURI = new URI("vm://" + getBrokerName().replaceAll("[^a-zA-Z0-9\\.\\_\\-]", "_"));
activemq-broker/src/main/java/org/apache/activemq/network/DiscoveryNetworkConnector.java,132,activeEvents.remove(uri);
activemq-broker/src/main/java/org/apache/activemq/network/DiscoveryNetworkConnector.java,141,activeEvents.remove(uri);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,254,LOG.warn("Exception occurred processing: \n" + command + ": " + exception.toString());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,947,LOG.debug("Stomp Connect heartbeat conf RW[" + hbReadInterval + "," + hbWriteInterval + "]");
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,962,LOG.warn("Could not send a receipt for " + command, e);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,241,throw new ProtocolException("Unknown STOMP action: " + action);
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,91,if (escape == (0xFFFF & c)) {
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,93,if (i >= like.length()) {
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,95,break;
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,102,regexp.append(".*?"); // Do a non-greedy match
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,104,regexp.append("."); // match one
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,106,regexp.append("\\x");
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,107,regexp.append(Integer.toHexString(0xFFFF & c));
activemq-client/src/main/java/org/apache/activemq/filter/ComparisonExpression.java,109,regexp.append(c);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/OrderedPendingList.java,152,Iterator<MessageReference> iterator = iterator();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,145,List<MessageReference> messageReferences = new ArrayList<MessageReference>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,146,for (PendingNode pendingNode : map.values()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,147,messageReferences.add(pendingNode.getMessage());
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/PrioritizedPendingList.java,149,return messageReferences;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,646,TransactionInfo info = new TransactionInfo(getConnectionId(), null, TransactionInfo.RECOVER);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,647,try {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,648,this.connection.checkClosedOrFailed();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,649,this.connection.ensureConnectionInfoSent();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,651,DataArrayResponse receipt = (DataArrayResponse)this.connection.syncSendPacket(info);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,652,DataStructure[] data = receipt.getData();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,653,XATransactionId[] answer;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,654,if (data instanceof XATransactionId[]) {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,655,answer = (XATransactionId[])data;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,657,answer = new XATransactionId[data.length];
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,658,System.arraycopy(data, 0, answer, 0, data.length);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,660,return answer;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,662,throw toXAException(e);
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java,233,physicalConnection.cleanup();
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,783,xae.errorCode = original.errorCode;
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,784,if (xae.errorCode == XA_OK) {
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,789,xae.initCause(original);
activemq-client/src/main/java/org/apache/activemq/state/ConnectionState.java,48,private HashMap<ConsumerId, ConsumerInfo> recoveringPullConsumers;
activemq-client/src/main/java/org/apache/activemq/state/ConnectionState.java,147,recoveringPullConsumers = new HashMap<ConsumerId, ConsumerInfo>();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,542,LOG.error("Network connection between {} and {} shutdown due to a remote error: {}", new Object[]{
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,543,localBroker, remoteBroker, error
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,546,LOG.warn("Network connection between {} and {} shutdown due to a remote error: {}", new Object[]{
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,547,localBroker, remoteBroker, error
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicRegion.java,338,LOG.error("Failed to create TopicSubscription ", e);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompNIOSSLTransport.java,47,protected void initializeStreams() throws IOException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompNIOSSLTransport.java,48,codec = new StompCodec(this);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompNIOSSLTransport.java,49,super.initializeStreams();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompNIOSSLTransport.java,50,if (inputBuffer.position() != 0 && inputBuffer.hasRemaining()) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompNIOSSLTransport.java,51,serviceRead();
activemq-partition/src/main/java/org/apache/activemq/partition/PartitionBroker.java,238,if( !targetScores.isEmpty() ) {
activemq-partition/src/main/java/org/apache/activemq/partition/PartitionBroker.java,240,int bestScore=0;
activemq-partition/src/main/java/org/apache/activemq/partition/PartitionBroker.java,242,if( entry.getValue().value > bestScore ) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,894,public void setObjectProperty(String name, Object value) throws JMSException {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,895,initializeWriting();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQBytesMessage.java,896,super.setObjectProperty(name, value);
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,428,public int getMaxProducersToAudit() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java,439,public int getMaxAuditDepth() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,209,public int getMaxProducersToAudit() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,226,public int getMaxAuditDepth() {
activemq-client/src/main/java/org/apache/activemq/management/SizeStatisticImpl.java,21,private long maxSize;
activemq-client/src/main/java/org/apache/activemq/management/SizeStatisticImpl.java,22,private long minSize;
activemq-client/src/main/java/org/apache/activemq/management/SizeStatisticImpl.java,78,public synchronized long getMinSize() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/HashIndex.java,125,private Marshaller<Key> keyMarshaller;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/index/HashIndex.java,395,public synchronized void setKeyMarshaller(Marshaller<Key> marshaller) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,127,ResultSet resultSet = statement.executeQuery();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,128,long result = 0l;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,129,if (resultSet.next()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,130,Timestamp timestamp = resultSet.getTimestamp(1);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,131,long diff = System.currentTimeMillis() - timestamp.getTime();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,132,if (Math.abs(diff) > maxAllowableDiffFromDBTime) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,134,result = (-diff);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,136,LOG.info(getLeaseHolderId() + " diff adjust from db: " + result + ", db time: " + timestamp);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/LeaseDatabaseLocker.java,138,return result;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,380,class BrowserDispatch {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,381,QueueBrowserSubscription browser;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,383,public BrowserDispatch(QueueBrowserSubscription browserSubscription) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,384,browser = browserSubscription;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,385,browser.incrementQueueRef();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,396,public QueueBrowserSubscription getBrowser() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,397,return browser;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,401,ConcurrentLinkedQueue<BrowserDispatch> browserDispatches = new ConcurrentLinkedQueue<BrowserDispatch>();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,450,BrowserDispatch browserDispatch = new BrowserDispatch(browserSubscription);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,451,browserDispatches.add(browserDispatch);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,557,browserDispatches.remove(sub);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1596,Iterator<BrowserDispatch> browsers = browserDispatches.iterator();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1598,BrowserDispatch browserDispatch = browsers.next();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1603,QueueBrowserSubscription browser = browserDispatch.getBrowser();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1619,browserDispatches.remove(browserDispatch);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1622,LOG.warn("exception on dispatch to browser: {}", browserDispatch.getBrowser(), e);
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,26,import javax.jms.Destination;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,233,LOG.info("Loaded the Bouncy Castle security provider.");
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQResourceAdapter.java,126,String clientId = activationSpec.getClientId();
activemq-http/src/main/java/org/apache/activemq/transport/http/HttpClientTransport.java,69,public static final int MAX_CLIENT_TIMEOUT = 30000;
activemq-client/src/main/java/org/apache/activemq/usage/MemoryUsage.java,97,public boolean waitForSpace(long timeout) throws InterruptedException {
activemq-client/src/main/java/org/apache/activemq/usage/MemoryUsage.java,109,while (percentUsage >= 100 ) {
activemq-client/src/main/java/org/apache/activemq/usage/MemoryUsage.java,110,waitForSpaceCondition.await(timeout, TimeUnit.MILLISECONDS);
activemq-client/src/main/java/org/apache/activemq/usage/MemoryUsage.java,112,usageLock.readLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,52,final Set<TransactionId> recoveredPendingCommit = new HashSet<TransactionId>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,304,recoveredPendingCommit.addAll(inflightTransactions.keySet());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,305,LOG.info("pending local transactions: " + recoveredPendingCommit);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,360,if (recoveredPendingCommit.contains(txid)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,301,process(load(location));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,320,public void process(JournalCommand<?> command) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,324,getTx(TransactionIdConversion.convert(prepareCommand.getTransactionInfo()));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,90,private final IdGenerator ACK_ID_GENERATOR = new IdGenerator();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,104,private static class AckEntry {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,106,private final String messageId;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,107,private final StompSubscription subscription;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,109,public AckEntry(String messageId, StompSubscription subscription) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,110,this.messageId = messageId;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,111,this.subscription = subscription;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,114,public MessageAck onMessageAck(TransactionId transactionId) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,115,return subscription.onStompMessageAck(messageId, transactionId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,118,public MessageAck onMessageNack(TransactionId transactionId) throws ProtocolException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,119,return subscription.onStompMessageNack(messageId, transactionId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,122,public String getMessageId() {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,123,return this.messageId;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,127,public StompSubscription getSubscription() {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,128,return this.subscription;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,349,messageId = pendingAck.getMessageId();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,406,messageId = pendingAck.getMessageId();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,580,stompSubscription = new StompSubscription(this, subscriptionId, consumerInfo, headers.get(Stomp.Headers.TRANSFORMATION));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,582,stompSubscription = new StompQueueBrowserSubscription(this, subscriptionId, consumerInfo, headers.get(Stomp.Headers.TRANSFORMATION));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,839,String ackId = null;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,841,AckEntry pendingAck = new AckEntry(md.getMessage().getMessageId().toString(), sub);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,842,ackId = this.ACK_ID_GENERATOR.generateId();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,843,this.pedingAcks.put(ackId, pendingAck);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,845,try {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,846,sub.onMessageDispatch(md, ackId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,848,if (ackId != null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,849,this.pedingAcks.remove(ackId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompQueueBrowserSubscription.java,30,public StompQueueBrowserSubscription(ProtocolConverter stompTransport, String subscriptionId, ConsumerInfo consumerInfo, String transformation) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompQueueBrowserSubscription.java,31,super(stompTransport, subscriptionId, consumerInfo, transformation);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompQueueBrowserSubscription.java,35,void onMessageDispatch(MessageDispatch md, String ackId) throws IOException, JMSException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompQueueBrowserSubscription.java,38,super.onMessageDispatch(md, ackId);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,24,import java.util.Map.Entry;
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,59,public StompSubscription(ProtocolConverter stompTransport, String subscriptionId, ConsumerInfo consumerInfo, String transformation) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,66,void onMessageDispatch(MessageDispatch md, String ackId) throws IOException, JMSException {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,74,dispatchedMessage.put(message.getMessageId(), md);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,99,if (ackId != null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,103,protocolConverter.getStompTransport().sendToStomp(command);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,107,unconsumedMessage.clear();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,113,for (Iterator<?> iter = dispatchedMessage.entrySet().iterator(); iter.hasNext();) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,115,Map.Entry entry = (Entry)iter.next();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,116,MessageDispatch msg = (MessageDispatch)entry.getValue();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,117,if (unconsumedMessage.contains(msg)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,118,iter.remove();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,123,ack = new MessageAck(unconsumedMessage.getLast(), MessageAck.STANDARD_ACK_TYPE, unconsumedMessage.size());
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,124,unconsumedMessage.clear();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,137,if (!dispatchedMessage.containsKey(msgId)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,145,if (ackMode == CLIENT_ACK) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,152,for (Iterator<?> iter = dispatchedMessage.entrySet().iterator(); iter.hasNext();) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,155,Map.Entry entry = (Entry)iter.next();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,156,MessageId id = (MessageId)entry.getKey();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,157,MessageDispatch msg = (MessageDispatch)entry.getValue();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,160,if (!unconsumedMessage.contains(msg)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,161,unconsumedMessage.add(msg);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,165,iter.remove();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,169,if (id.equals(msgId)) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,170,ack.setLastMessageId(id);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,183,unconsumedMessage.add(dispatchedMessage.get(msgId));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,205,unconsumedMessage.add(dispatchedMessage.get(msgId));
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,208,dispatchedMessage.remove(msgId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,877,sd.orderIndex.setBatch(tx, cursorPos);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,914,sd.orderIndex.setBatch(tx, pos);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,940,try {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,941,synchronized (this) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,943,if (taskRunnerFactory != null) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,944,taskRunner = taskRunnerFactory.createTaskRunner(this, "ActiveMQ Connection Dispatcher: "
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,945,+ getRemoteAddress());
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,947,taskRunner = null;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,949,transport.start();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,950,active = true;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,951,BrokerInfo info = connector.getBrokerInfo().copy();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,952,if (connector.isUpdateClusterClients()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,953,info.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,955,info.setPeerBrokerInfos(null);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,957,dispatchAsync(info);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,959,connector.onStarted(this);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,964,throw e;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,969,setStarting(false);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,970,if (isPendingStop()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,971,LOG.debug("Calling the delayed stop() after start() {}", this);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,972,stop();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,990,synchronized (this) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1014,synchronized (this) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1017,LOG.debug("stopAsync() called in the middle of start(). Delaying till start completes..");
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1018,return;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1461,metadata.ackMessageFileMapLocation = checkpointAckMessageFileMap();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2057,Iterator<Entry<String, SequenceSet>> subscriptions = rc.ackPositions.iterator(tx);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2058,while (subscriptions.hasNext()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2059,Entry<String, SequenceSet> subscription = subscriptions.next();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2060,SequenceSet pendingAcks = subscription.getValue();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2061,if (pendingAcks != null && !pendingAcks.isEmpty()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2062,Long lastPendingAck = pendingAcks.getTail().getLast();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2064,Long current = rc.messageReferences.get(sequenceId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2065,if (current == null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2066,current = new Long(0);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2071,if (!sequenceId.equals(lastPendingAck)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2072,current = current.longValue() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2075,rc.messageReferences.put(sequenceId, current);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2097,if (!rc.messageReferences.isEmpty()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2098,Long nextMessageId = (Long) rc.messageReferences.keySet().toArray()[rc.messageReferences.size() - 1];
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2099,rc.orderIndex.nextMessageId =
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2100,Math.max(rc.orderIndex.nextMessageId, nextMessageId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2123,Long count = sd.messageReferences.get(messageSequence);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2124,if (count == null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2125,count = Long.valueOf(0L);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2127,count = count.longValue() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2128,sd.messageReferences.put(messageSequence, count);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2143,for (Long ackPosition : allOutstanding) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2144,Long count = sd.messageReferences.get(ackPosition);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2163,Long count = sd.messageReferences.get(messageSequence);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2164,if (count == null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2165,count = Long.valueOf(0L);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2167,count = count.longValue() + 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2168,sd.messageReferences.put(messageSequence, count);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2183,Long references = sd.messageReferences.get(sequenceId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2184,if (references != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2185,references = references.longValue() - 1;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2187,if (references.longValue() > 0) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2188,sd.messageReferences.put(sequenceId, references);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2190,sd.messageReferences.remove(sequenceId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2191,unreferenced.add(sequenceId);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2231,Long count = sd.messageReferences.get(messageSequence);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2234,if (references > 0) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2235,sd.messageReferences.put(messageSequence, Long.valueOf(references));
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2236,return;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2238,sd.messageReferences.remove(messageSequence);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,462,metaData.setCleanShutdown(true);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,413,freeList = new SequenceSet();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,414,for (Iterator<Page> i = tx().iterator(true); i.hasNext(); ) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,415,Page page = i.next();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,416,if (page.getType() == Page.PAGE_FREE_TYPE) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,417,freeList.add(page.getPageId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1217,List<Operation> tx = inflightTransactions.remove(key);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,255,destinationMap.removeAll(destination);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,270,destinationMap.removeAll(destination);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,52,import org.apache.activemq.filter.MessageEvaluationContext;
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,198,MessageEvaluationContext ctx = new MessageEvaluationContext();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,245,MessageEvaluationContext ctx = new MessageEvaluationContext();
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/DestinationView.java,286,MessageEvaluationContext ctx = new MessageEvaluationContext();
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,765,ConnectionContext answer = new ConnectionContext(new NonCachedMessageEvaluationContext());
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/FilePendingMessageCursor.java,476,ConnectionContext context = new ConnectionContext(new NonCachedMessageEvaluationContext());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,52,import org.apache.activemq.filter.MessageEvaluationContext;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1011,MessageEvaluationContext messageEvalContext = new MessageEvaluationContext();
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,19,import java.io.IOException;
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,20,import java.util.concurrent.atomic.AtomicBoolean;
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,21,import java.util.concurrent.atomic.AtomicLong;
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,208,double value = flowControlInfo.getSendsBlocked() / flowControlInfo.getTotalSends();
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnectionFactory.java,77,if (getDurableTopicPrefetch() != null) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnectionFactory.java,80,if (getOptimizeDurableTopicPrefetch() != null) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnectionFactory.java,83,if (getQueuePrefetch() != null) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnectionFactory.java,86,if (getQueueBrowserPrefetch() != null) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnectionFactory.java,89,if (getTopicPrefetch() != null) {
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/Stomp.java,52,String SUBSCRIBE = "SUB";
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/Stomp.java,53,String UNSUBSCRIBE = "UNSUB";
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,86,private final Map<String, LocalTransactionId> transactions = new ConcurrentHashMap<String, LocalTransactionId>();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,265,HashMap<String, String> headers = new HashMap<String, String>();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,768,HashMap<String, String> responseHeaders = new HashMap<String, String>();
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,169,hash = hash(globalTransactionId, hash);
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,170,hash = hash(branchQualifier, hash);
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,178,private static int hash(byte[] bytes, int hash) {
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,179,int size = bytes.length;
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,180,for (int i = 0; i < size; i++) {
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,181,hash ^= bytes[i] << ((i % 4) * 8);
activemq-client/src/main/java/org/apache/activemq/command/XATransactionId.java,183,return hash;
activemq-broker/src/main/java/org/apache/activemq/broker/scheduler/SchedulerBroker.java,197,getInternalScheduler().schedule(msg.getMessageId().toString(),
activemq-broker/src/main/java/org/apache/activemq/broker/scheduler/SchedulerBroker.java,198,new ByteSequence(packet.data, packet.offset, packet.length), cronEntry, delay, period, repeat);
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,171,private final CopyOnWriteArrayList<ActiveMQSession> sessions = new CopyOnWriteArrayList<ActiveMQSession>();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,172,private final CopyOnWriteArrayList<ActiveMQConnectionConsumer> connectionConsumers = new CopyOnWriteArrayList<ActiveMQConnectionConsumer>();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,824,Map<String, String> options = new HashMap<String, String>(info.getDestination().getOptions());
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1243,Map<String, String> options = new HashMap<String, String>(consumerInfo.getDestination().getOptions());
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1353,if(exception!=null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1357,if (isClosed()||closing.get()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1373,if (jmsEx !=null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1400,if (isClosed()||closing.get()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,1416,if (jmsEx !=null) {
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,19,import java.util.Enumeration;
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,20,import java.util.HashMap;
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,21,import java.util.Map;
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,41,public MessageQuery(BrokerFacade brokerFacade, SessionPool sessionPool) throws JMSException {
activemq-web/src/main/java/org/apache/activemq/web/MessageQuery.java,42,super(brokerFacade, sessionPool);
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,24,import org.springframework.beans.factory.DisposableBean;
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,31,private SessionPool sessionPool;
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,33,private Session session;
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,37,public QueueBrowseQuery(BrokerFacade brokerFacade, SessionPool sessionPool) throws JMSException {
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,39,this.sessionPool = sessionPool;
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,40,this.session = sessionPool.borrowSession();
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,48,sessionPool.returnSession(session);
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,49,session = null;
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,65,queue = session.createQueue(getValidDestination());
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,82,public Session getSession() {
activemq-web/src/main/java/org/apache/activemq/web/QueueBrowseQuery.java,83,return session;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreDurableSubscriberCursor.java,191,nonPersistent.addMessageLast(node);
activemq-client/src/main/java/org/apache/activemq/filter/DestinationMap.java,201,Set set = get(destination);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,760,RemoveSubscriptionInfo info = ((RemoveSubscriptionInfo) data);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,761,SubscriptionInfo subscriptionInfo = new SubscriptionInfo(info.getClientId(), info.getSubscriptionName());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,765,if (removed) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,407,localClientId = configuration.getName() + "_" + remoteBrokerName + "_inbound_" + configuration.getBrokerName();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,432,duplexLocalConnectionInfo.setClientId(configuration.getName() + "_" + remoteBrokerName + "_inbound_duplex_"
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,509,remoteConnectionInfo.setClientId(configuration.getName() + "_" + configuration.getBrokerName() + "_outbound");
activemq-broker/src/main/java/org/apache/activemq/network/ConduitBridge.java,75,ds.getDurableRemoteSubs().add(new SubscriptionInfo(info.getClientId(), info.getSubscriptionName()));
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,60,import org.apache.activemq.transport.tcp.SslTransport;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,1126,sub.getDurableRemoteSubs().add(new SubscriptionInfo(sub.getRemoteInfo().getClientId(), consumerInfo.getSubscriptionName()));
activemq-broker/src/main/java/org/apache/activemq/network/ConduitBridge.java,60,if (info.isNetworkSubscription()) {
activemq-broker/src/main/java/org/apache/activemq/network/ConduitBridge.java,87,return ds.isStaticallyIncluded() || !ds.getRemoteInfo().isNetworkSubscription();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,879,localBroker.oneway(sub.getLocalInfo().createRemoveCommand());
activemq-broker/src/main/java/org/apache/activemq/network/DurableConduitBridge.java,89,info.setConsumerId(new ConsumerId(localSessionInfo.getSessionId(),
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,317,while (true) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,318,int currentExtension = prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,319,int newExtension = Math.max(currentExtension, index + 1);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,320,if (prefetchExtension.compareAndSet(currentExtension, newExtension)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,321,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,385,while (true) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,386,int currentExtension = prefetchExtension.get();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,387,int newExtension = Math.max(0, currentExtension - (index + 1));
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,388,if (prefetchExtension.compareAndSet(currentExtension, newExtension)) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,389,break;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,432,synchronized(dispatchLock) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,443,synchronized(dispatchLock) {
activemq-client/src/main/java/org/apache/activemq/command/MessagePull.java,28,public class MessagePull extends BaseCommand {
activemq-client/src/main/java/org/apache/activemq/transport/nio/SelectorSelection.java,46,e.printStackTrace();
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQStreamMessage.java,731,return rc;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2392,private Journal createJournal() throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,146,location.setLatch(batch.latch);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,172,WriteBatch batch = enqueue(write);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/DataFileAppender.java,174,location.setLatch(batch.latch);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,77,private final AtomicBoolean connectorStarting = new AtomicBoolean(false);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,127,connectorStarting.set(true);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,136,connectorStarting.set(false);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,175,if (!connectorStarting.get()) {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/ManagementContext.java,303,return connectorStarting.get() || (connectorServer != null && connectorServer.isActive());
activemq-broker/src/main/java/org/apache/activemq/util/DefaultIOExceptionHandler.java,47,if (ignoreAllErrors) {
activemq-broker/src/main/java/org/apache/activemq/security/JaasAuthenticationBroker.java,87,super.addConnection(context, info);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,557,if (getBrokerService().isStarted()) {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,559,advisoryMessage.setStringProperty(AdvisorySupport.MSG_PROPERTY_ORIGIN_BROKER_NAME, getBrokerName());
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,560,String id = getBrokerId() != null ? getBrokerId().getValue() : "NOT_SET";
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,561,advisoryMessage.setStringProperty(AdvisorySupport.MSG_PROPERTY_ORIGIN_BROKER_ID, id);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,563,String url = getBrokerService().getVmConnectorURI().toString();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,565,url = getBrokerService().getDefaultSocketURIString();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,567,advisoryMessage.setStringProperty(AdvisorySupport.MSG_PROPERTY_ORIGIN_BROKER_URL, url);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,570,advisoryMessage.setDataStructure(command);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,571,advisoryMessage.setPersistent(false);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,572,advisoryMessage.setType(AdvisorySupport.ADIVSORY_MESSAGE_TYPE);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,573,advisoryMessage.setMessageId(new MessageId(advisoryProducerId, messageIdGenerator.getNextSequenceId()));
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,574,advisoryMessage.setTargetConsumerId(targetConsumerId);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,575,advisoryMessage.setDestination(topic);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,576,advisoryMessage.setResponseRequired(false);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,577,advisoryMessage.setProducerId(advisoryProducerId);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,578,boolean originalFlowControl = context.isProducerFlowControl();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,579,final ProducerBrokerExchange producerExchange = new ProducerBrokerExchange();
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,580,producerExchange.setConnectionContext(context);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,581,producerExchange.setMutable(true);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,582,producerExchange.setProducerState(new ProducerState(new ProducerInfo()));
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,583,try {
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,584,context.setProducerFlowControl(false);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,585,next.send(producerExchange, advisoryMessage);
activemq-broker/src/main/java/org/apache/activemq/advisory/AdvisoryBroker.java,587,context.setProducerFlowControl(originalFlowControl);
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/StompSubscription.java,122,if (!unconsumedMessage.isEmpty()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,487,if (context == null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1277,this.future.setException(e);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1292,public void setException(final Exception e) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,1371,this.future.setException(e);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,55,public void purge() throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,642,LOG.error("expired waiting for space..");
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,63,public int removeMatchingMessages(String selector) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,67,public int removeMatchingMessages(String selector, int maximumMessages) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,95,public int moveMatchingMessagesTo(String selector, String destinationName) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,101,public int moveMatchingMessagesTo(String selector, String destinationName, int maximumMessages) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,107,public int retryMessages() throws Exception {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1001,throw new IOException("Could not load journal record. Invalid location: "+location);
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,172,if (!isCacheEnabled() && size==0 && isStarted() && useCache) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,174,setCacheEnabled(true);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,415,if (originalTransport instanceof SslTransport) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,416,X509Certificate[] peerCerts = ((SslTransport) originalTransport).getPeerCertificates();
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,437,if (originalTransport instanceof SslTransport) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,438,X509Certificate[] peerCerts = ((SslTransport) originalTransport).getPeerCertificates();
activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java,2003,if (!closing.get() && !closed.get()) {
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobDownloadStrategy.java,49,connection.connect();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobDownloadStrategy.java,50,connection.disconnect();
activemq-client/src/main/java/org/apache/activemq/blob/DefaultBlobUploadStrategy.java,69,throw new IOException("PUT was not successful: " + connection.getResponseCode() + " "
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2424,URI uri = getVmConnectorURI();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2427,map.put("async", "false");
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2428,uri = URISupport.createURIWithQuery(uri, URISupport.createQueryString(map));
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2449,connector.setLocalUri(uri);
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java,1290,Transport localTransport = NetworkBridgeFactory.createLocalTransport(broker);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,151,duplexInboundLocalBroker = NetworkBridgeFactory.createLocalTransport(brokerService.getBroker());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,669,MessageAck ack = new MessageAck(message, MessageAck.STANDARD_ACK_TYPE, demandConsumerDispatched);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,671,remoteBroker.oneway(ack);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,856,localBroker.request(sub.getLocalInfo());
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,858,localBroker.oneway(sub.getLocalInfo());
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,74,public static Transport createLocalTransport(Broker broker) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,75,URI uri = broker.getVmConnectorURI();
activemq-broker/src/main/java/org/apache/activemq/network/NetworkBridgeFactory.java,78,map.put("async", "true");
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,632,addConsumerInfo((ConsumerInfo) command);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,713,synchronized (brokerService.getVmConnectorURI()) {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,854,if (isDuplex()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,67,protected boolean warnOnProducerFlowControl = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,625,long nextWarn = start;
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,633,long now = System.currentTimeMillis();
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,634,if (now >= nextWarn) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,635,getLog().info("{}: {} (blocking for: {}s)", new Object[]{ usage, warning, new Long(((now - start) / 1000))});
activemq-broker/src/main/java/org/apache/activemq/broker/region/BaseDestination.java,636,nextWarn = now + blockedProducerWarningInterval;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,606,if (warnOnProducerFlowControl) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,607,warnOnProducerFlowControl = false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,341,if (warnOnProducerFlowControl) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,342,warnOnProducerFlowControl = false;
activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java,46,private final FlowControlInfo flowControlInfo = new FlowControlInfo();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,60,protected boolean usePrefetchExtension = true;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,841,public boolean isUsePrefetchExtension() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,842,return usePrefetchExtension;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,845,public void setUsePrefetchExtension(boolean usePrefetchExtension) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,846,this.usePrefetchExtension = usePrefetchExtension;
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,645,while (pending.hasNext() && !isFull() && count < numberToDispatch) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,152,return systemUsage != null ? (!systemUsage.getMemoryUsage().isFull(memoryUsageHighWaterMark)) : true;
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,152,private final List<TransportConnector> transportConnectors = new CopyOnWriteArrayList<TransportConnector>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,153,private final List<NetworkConnector> networkConnectors = new CopyOnWriteArrayList<NetworkConnector>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,154,private final List<ProxyConnector> proxyConnectors = new CopyOnWriteArrayList<ProxyConnector>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,155,private final List<JmsConnector> jmsConnectors = new CopyOnWriteArrayList<JmsConnector>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,156,private final List<Service> services = new ArrayList<Service>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,193,private final List<Runnable> shutdownHooks = new ArrayList<Runnable>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,571,LOG.error("Failed to start Apache ActiveMQ ({}, {})", new Object[]{ getBrokerName(), brokerId }, e);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1249,Map<String, String> answer = new HashMap<String, String>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1370,return new ArrayList<TransportConnector>(transportConnectors);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1405,return new ArrayList<NetworkConnector>(networkConnectors);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1409,return new ArrayList<ProxyConnector>(proxyConnectors);
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2197,List<DestinationInterceptor> answer = new ArrayList<DestinationInterceptor>();
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2425,Map<String, String> map = new HashMap<String, String>(URISupport.parseParameters(uri));
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,2548,Set <ActiveMQQueue> consumerDestinations = new HashSet<ActiveMQQueue>();
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,20,import java.io.IOException;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,21,import java.io.PrintWriter;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,22,import java.util.Enumeration;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,23,import java.util.HashMap;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,25,import javax.jms.Destination;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,26,import javax.jms.JMSException;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,27,import javax.jms.Message;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,28,import javax.jms.MessageConsumer;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,29,import javax.jms.ObjectMessage;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,30,import javax.jms.TextMessage;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,31,import javax.servlet.ServletConfig;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,32,import javax.servlet.ServletException;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,33,import javax.servlet.http.HttpServletRequest;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,34,import javax.servlet.http.HttpServletResponse;
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,247,String type = getContentType(request);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,248,if (type != null) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,249,response.setContentType(type);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,251,if (isXmlContent(message)) {
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,252,response.setContentType(defaultContentType);
activemq-web/src/main/java/org/apache/activemq/web/MessageServlet.java,254,response.setContentType("text/plain");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBPersistenceAdapter.java,650,return "KahaDBPersistenceAdapter[" + path + "]";
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,124,private String nameFromDestinationFilter(ActiveMQDestination destination) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,374,File defaultDir = MessageDatabase.DEFAULT_DIRECTORY;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1218,ack.setPoisonCause(new Throwable("Exceeded redelivery policy limit:" + redeliveryPolicy
activemq-broker/src/main/java/org/apache/activemq/transport/TransportLoggerFactory.java,65,private static int defaultJmxPort = 1099;
activemq-broker/src/main/java/org/apache/activemq/transport/TransportLoggerFactory.java,138,int id = getNextId();
activemq-broker/src/main/java/org/apache/activemq/transport/TransportLoggerFactory.java,184,return LoggerFactory.getLogger(TransportLogger.class.getName()+".Connection:" + id);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,40,log.debug("SENDING REQUEST: "+command);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,45,log.debug("GOT RESPONSE: "+response);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,50,log.debug("SENDING ASNYC REQUEST: "+command);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,55,log.debug("SENDING: "+command);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,60,log.debug("RECEIVED: " + command);
activemq-broker/src/main/java/org/apache/activemq/transport/logwriters/DefaultLogWriter.java,65,log.debug("RECEIVED Exception: "+error, error);
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,93,synchronized (transactionStore) {
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,94,transactionStore.rollback(getTransactionId());
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,96,try {
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,97,fireAfterRollback();
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,99,LOG.warn("POST ROLLBACK FAILED: ", e);
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,100,XAException xae = new XAException("POST ROLLBACK FAILED");
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,101,xae.errorCode = XAException.XAER_RMERR;
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,102,xae.initCause(e);
activemq-broker/src/main/java/org/apache/activemq/transaction/LocalTransaction.java,103,throw xae;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1047,if (enableRecoveryFile) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1048,recoveryFile.seek(RECOVERY_FILE_HEADER_SIZE);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1052,try {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1053,checksum.update(w.getDiskBound(), 0, pageSize);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1055,throw IOExceptionSupport.create("Cannot create recovery file. Reason: " + t, t);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1057,recoveryFile.writeLong(w.page.getPageId());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1058,recoveryFile.write(w.getDiskBound(), 0, pageSize);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,1066,try {
activemq-broker/src/main/java/org/apache/activemq/broker/PublishedAddressPolicy.java,38,private HashMap<Integer, Integer> portMapping = new HashMap<Integer, Integer>();
activemq-broker/src/main/java/org/apache/activemq/broker/PublishedAddressPolicy.java,212,public void setPortMapping(HashMap<Integer, Integer> portMapping) {
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/IntrospectionSupport.java,97,if (boolean.class.isAssignableFrom(to) && value instanceof String) {
activemq-broker/src/main/java/org/apache/activemq/plugin/SubQueueSelectorCacheBroker.java,152,return subSelectorCache.get(destination);
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,59,private int serverSessionId = getNextLogId();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,60,private final Logger log = LoggerFactory.getLogger(ServerSessionImpl.class.getName() + ":" + serverSessionId);
activemq-client/src/main/java/org/apache/activemq/TransactionContext.java,779,private XAException toXAException(JMSException e) {
activemq-client/src/main/java/org/apache/activemq/command/ActiveMQMessage.java,721,private void checkReadOnlyProperties() throws MessageNotWriteableException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,299,Location location = journal.getNextLocation(null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,300,while (location != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,302,location = journal.getNextLocation(location);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,359,try {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,361,LOG.info("delivering pending commit outcome for tid: " + txid);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,362,broker.commitTransaction(null, txid, false);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,365,LOG.info("delivering rollback outcome to store for tid: " + txid);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,366,broker.forgetTransaction(null, txid);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,368,persistCompletion(txid);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,370,LOG.error("failed to deliver pending outcome for tid: " + txid, ex);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,219,Sequence sequence = new Sequence(location.getOffset(), nextOffset - 1);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/journal/Journal.java,243,dataFile.setLength((int) dataFile.corruptedBlocks.removeLastSequence().getFirst());
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,711,this.transactionContext = null;
activemq-client/src/main/java/org/apache/activemq/command/Message.java,80,protected ByteSequence marshalledProperties;
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportServer.java,38,private boolean disposed;
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportServer.java,66,if (disposed) {
activemq-broker/src/main/java/org/apache/activemq/transport/vm/VMTransportServer.java,119,VMTransportFactory.stopped(this);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,255,((JDBCPersistenceAdapter)persistenceAdapter).rollbackLastAck(context, priority, jdbcTopicMessageStore.getDestination(), subName, clientId);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,986,String subName = rs.getString(3);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/adapter/DefaultJDBCAdapter.java,987,String subId = rs.getString(4);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,569,if (ackedAndPrepared.contains(entry.getValue().messageId)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,595,if (ackedAndPrepared.contains(entry.getValue().messageId)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,881,if (ackedAndPrepared.contains(entry.getValue().messageId)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBStore.java,925,if (ackedAndPrepared.contains(entry.getValue().messageId)) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,1263,StoredDestination sd = getStoredDestination(command.getDestination(), tx);
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,59,public boolean removeMessage(String messageId) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,71,public boolean copyMessageTo(String messageId, String destinationName) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,77,public int copyMatchingMessagesTo(String selector, String destinationName) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,83,public int copyMatchingMessagesTo(String selector, String destinationName, int maximumMessages) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/jmx/QueueView.java,89,public boolean moveMessageTo(String messageId, String destinationName) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1297,set.addAll(pagedInMessages.values());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1364,set.addAll(pagedInMessages.values());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1456,set.addAll(pagedInMessages.values());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1485,set.addAll(pagedInMessages.values());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,126,private PreviouslyDeliveredMap<MessageId, Boolean> previouslyDeliveredMessages;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,146,private boolean clearDeliveredList;
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,726,inProgressClearRequiredFlag.decrementAndGet();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,733,clearDeliveredList();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1103,for (Entry<MessageId, Boolean> entry: previouslyDeliveredMessages.entrySet()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1104,if (!entry.getValue()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1131,for (Entry<MessageId, Boolean> entry: previouslyDeliveredMessages.entrySet()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1132,if (!entry.getValue()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1207,session.connection.rollbackDuplicate(this, md.getMessage());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1238,if (nonBlockingRedelivery) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1239,if (!unconsumedMessages.isClosed()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1241,final LinkedList<MessageDispatch> pendingRedeliveries =
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1242,new LinkedList<MessageDispatch>(deliveredMessages);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1244,Collections.reverse(pendingRedeliveries);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1246,deliveredCounter -= deliveredMessages.size();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1247,deliveredMessages.clear();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1255,for(MessageDispatch dispatch : pendingRedeliveries) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1267,unconsumedMessages.stop();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1269,for (MessageDispatch md : deliveredMessages) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1270,unconsumedMessages.enqueueFirst(md);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1273,deliveredCounter -= deliveredMessages.size();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1274,deliveredMessages.clear();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1276,if (redeliveryDelay > 0 && !unconsumedMessages.isClosed()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1278,session.getScheduler().executeAfterDelay(new Runnable() {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1282,if (started.get()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1283,start();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1291,start();
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1297,if (messageListener.get() != null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1298,session.redispatch(this, unconsumedMessages);
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1309,for (Entry<MessageId, Boolean> entry: previouslyDeliveredMessages.entrySet()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1310,if (!entry.getValue()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1314,removeFromDeliveredMessages(entry.getKey());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1354,if (this.info.isBrowser() || !session.connection.isDuplicate(this, md.getMessage())) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1377,if (!unconsumedMessages.isRunning()) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1379,session.connection.rollbackDuplicate(this, md.getMessage());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1444,if (previouslyDeliveredMessages == null) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1445,previouslyDeliveredMessages = new PreviouslyDeliveredMap<MessageId, Boolean>(session.getTransactionContext().getTransactionId());
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1447,for (MessageDispatch delivered : deliveredMessages) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java,1448,previouslyDeliveredMessages.put(delivered.getMessage().getMessageId(), false);
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,1935,for (MessageDispatch md : c) {
activemq-client/src/main/java/org/apache/activemq/ActiveMQSession.java,1936,this.connection.rollbackDuplicate(dispatcher, md.getMessage());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1358,int oldMaxSize = getMaxPageSize();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1359,setMaxPageSize((int) this.destinationStatistics.getMessages().getCount());
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1360,doPageIn(true);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1361,setMaxPageSize(oldMaxSize);
activemq-jms-pool/src/main/java/org/apache/activemq/jms/pool/PooledConnection.java,83,this.cleanupConnectionTemporaryDestinations();
activemq-stomp/src/main/java/org/apache/activemq/transport/stomp/ProtocolConverter.java,262,exception.printStackTrace(stream);
activemq-broker/src/main/java/org/apache/activemq/broker/region/DurableTopicSubscription.java,312,protected void acknowledge(ConnectionContext context, MessageAck ack, MessageReference node) throws IOException {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,218,String remoteHost = transport.getRemoteAddress();
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,225,String remoteHost = transport.getRemoteAddress();
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,266,updated.remove(failedConnectTransportURI);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,768,if (!updated.isEmpty()) {
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,769,return updated;
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,771,ArrayList<URI> l = new ArrayList<URI>(uris);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,774,removed = l.remove(failedConnectTransportURI);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,916,List<URI> connectList = getConnectList();
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,545,if (connect != null) {
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryMessageStore.java,153,lastBatchId = messageId;
activemq-broker/src/main/java/org/apache/activemq/broker/region/virtual/VirtualDestinationInterceptor.java,67,public synchronized void create(Broker broker, ConnectionContext context, ActiveMQDestination destination) throws Exception {
activemq-broker/src/main/java/org/apache/activemq/store/PersistenceAdapter.java,158,void checkpoint(boolean sync) throws IOException;
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBPersistenceAdapter.java,75,public void checkpoint(boolean sync) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/KahaDBPersistenceAdapter.java,76,this.letter.checkpoint(sync);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,317,LOG.info("periodic checkpoint/cleanup disabled, will ocurr on clean shutdown/restart");
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,419,checkpointUpdate(true);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,968,startCheckpoint();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,144,public void checkpoint(final boolean sync) throws IOException {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBPersistenceAdapter.java,146,persistenceAdapter.checkpoint(sync);
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,19,import java.util.ArrayList;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,20,import java.util.HashMap;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,22,import java.util.List;
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,76,if (getMaxSlowDuration() > 0) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,79,for (SlowConsumerEntry entry : slowConsumers.values()) {
activemq-broker/src/main/java/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.java,80,entry.mark();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,55,import org.apache.activemq.command.MessageAck;
activemq-broker/src/main/java/org/apache/activemq/broker/util/RedeliveryPlugin.java,131,if (messageReference.isExpired()) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1615,if (tempDataStore == null) {
activemq-broker/src/main/java/org/apache/activemq/broker/BrokerService.java,1812,if (jobSchedulerStore == null) {
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,120,if( sslContext == null ) {
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,121,if( provider == null ) {
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,122,sslContext = SSLContext.getInstance(protocol);
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,124,sslContext = SSLContext.getInstance(protocol, provider);
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,126,sslContext.init(getKeyManagersAsArray(), getTrustManagersAsArray(), getSecureRandom());
activemq-client/src/main/java/org/apache/activemq/broker/SslContext.java,130,public void setSSLContext(SSLContext sslContext) {
activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQEndpointWorker.java,287,serverSessionPool.close();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,108,return stale || !session.isRunning();
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,162,log.debug("Running");
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,165,log.debug("run loop start");
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,168,if ( session.isRunning() ) {
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionImpl.java,199,log.debug("Run finished");
activemq-ra/src/main/java/org/apache/activemq/ra/ServerSessionPoolImpl.java,192,activeSessions.remove(ss);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,117,private final Runnable expireMessagesTask = new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/RegionBroker.java,116,purgeInactiveDestinations();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,717,private final Runnable expireMessagesTask = new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,49,private boolean started=false;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/StoreQueueCursor.java,38,private boolean started;
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractPendingMessageCursor.java,48,private boolean cacheEnabled=true;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,84,persistenceAdapter.commitTransaction(ctx);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,131,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,134,if (connection != null && !connection.getAutoCommit()) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,145,try {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,146,if (connection != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,147,connection.close();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,152,connection = null;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java,172,if (!connection.getAutoCommit()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,157,private final Set<TransactionStore> stores = new HashSet<TransactionStore>();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,161,stores.add(store);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,164,public Set<TransactionStore> getStores() {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,206,for (TransactionStore store : tx.getStores()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,207,store.commit(txid, true, null, null);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,254,for (TransactionStore store : tx.getStores()) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,255,store.rollback(txid);
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MultiKahaDBTransactionStore.java,345,getTx(xid).trackStore(adapter.createTransactionStore());
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,30,import org.apache.activemq.ActiveMQMessageAudit;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,86,final ConnectionContext context = new ConnectionContext();
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,132,Destination destination =  addDestination(context, amqDestination, false);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,133,registerSync(destination, transaction, ack);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,136,private void registerSync(Destination destination, Transaction transaction, BaseCommand command) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,137,Synchronization sync = new PreparedDestinationCompletion(destination, command.isMessage());
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,148,final Destination destination;
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,151,public PreparedDestinationCompletion(final Destination destination, boolean messageSend) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,177,destination.clearPendingMessages();
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,185,destination.clearPendingMessages();
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,186,destination.getDestinationStatistics().getEnqueues().add(opCount);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,187,destination.getDestinationStatistics().getMessages().add(opCount);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,190,destination.getDestinationStatistics().getDequeues().add(opCount);
activemq-broker/src/main/java/org/apache/activemq/broker/TransactionBroker.java,191,destination.getDestinationStatistics().getMessages().subtract(opCount);
activemq-broker/src/main/java/org/apache/activemq/broker/region/Destination.java,239,public void clearPendingMessages();
activemq-broker/src/main/java/org/apache/activemq/broker/region/DestinationFilter.java,382,public void clearPendingMessages() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/DestinationFilter.java,383,next.clearPendingMessages();
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,434,dispatched.remove(node);
activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java,435,nodeDest.getDestinationStatistics().getInflight().decrement();
activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java,1243,public void clearPendingMessages() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/Topic.java,782,public void clearPendingMessages() {
activemq-broker/src/main/java/org/apache/activemq/broker/region/cursors/AbstractStoreCursor.java,207,setCacheEnabled(false);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,33,public class ProxyTopicMessageStore implements TopicMessageStore {
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,35,final TopicMessageStore delegate;
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,38,this.delegate = delegate;
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,87,return delegate.lookupSubscription(clientId, subscriptionName);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,93,delegate.acknowledge(context, clientId, subscriptionName, messageId, ack);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,103,delegate.deleteSubscription(clientId, subscriptionName);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,109,delegate.recoverSubscription(clientId, subscriptionName, listener);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,115,delegate.recoverNextMessages(clientId, subscriptionName, maxReturned, listener);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,120,delegate.resetBatching(clientId, subscriptionName);
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,130,return delegate.getAllSubscriptions();
activemq-broker/src/main/java/org/apache/activemq/store/ProxyTopicMessageStore.java,140,return delegate.getMessageCount(clientId, subscriberName);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,110,persistenceAdapter.commitTransaction(ctx);
activemq-broker/src/main/java/org/apache/activemq/store/memory/MemoryTransactionStore.java,253,tx = preparedTransactions.remove(txid);
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,74,setStateFinished();
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,90,LOG.warn("Store COMMIT FAILED: ", t);
activemq-broker/src/main/java/org/apache/activemq/transaction/XATransaction.java,91,rollback();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,85,private MemoryTransactionStore transactionStore;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,193,MessageStore rc = new JDBCMessageStore(this, getAdapter(), wireFormat, destination, audit);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,194,if (transactionStore != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,195,rc = transactionStore.proxy(rc);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,202,TopicMessageStore rc = new JDBCTopicMessageStore(this, getAdapter(), wireFormat, destination, audit);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,203,if (transactionStore != null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,204,rc = transactionStore.proxy(rc);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,249,if (transactionStore == null) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java,250,transactionStore = new JdbcMemoryTransactionStore(this);
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCTopicMessageStore.java,149,return perPriority[javax.jms.Message.DEFAULT_PRIORITY];
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JDBCTopicMessageStore.java,308,recovered.perPriority[isPrioritizedMessages() ? priority : javax.jms.Message.DEFAULT_PRIORITY].recovered = sequenceId;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,21,import java.util.HashMap;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,31,import org.apache.activemq.store.ProxyTopicMessageStore;
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,50,private HashMap<ActiveMQDestination, MessageStore> topicStores = new HashMap<ActiveMQDestination, MessageStore>();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,288,protected void onProxyTopicStore(ProxyTopicMessageStore proxyTopicMessageStore) {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,289,topicStores.put(proxyTopicMessageStore.getDestination(), proxyTopicMessageStore.getDelegate());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,297,JDBCTopicMessageStore jdbcTopicMessageStore = (JDBCTopicMessageStore) topicStores.get(lastAckCommand.getMessageAck().getDestination());
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,304,((JDBCPersistenceAdapter)persistenceAdapter).getBrokerService().getRegionBroker().getDestinationMap().get(removeMessageCommand.getMessageAck().getDestination()).getDestinationStatistics().getMessages().increment();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2287,public void trackRecoveredAcks(ArrayList<MessageAck> acks) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2288,this.indexLock.writeLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2289,try {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2290,for (MessageAck ack : acks) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2291,ackedAndPrepared.add(ack.getLastMessageId().toProducerKey());
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2294,this.indexLock.writeLock().unlock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2299,if (acks != null) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2300,this.indexLock.writeLock().lock();
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2301,try {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2302,for (MessageAck ack : acks) {
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java,2306,this.indexLock.writeLock().unlock();
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,188,Message msg = (Message) ((JDBCPersistenceAdapter)persistenceAdapter).getWireFormat().unmarshal(new ByteSequence(message));
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,192,tx.add(new RemoveMessageCommand() {
activemq-jdbc-store/src/main/java/org/apache/activemq/store/jdbc/JdbcMemoryTransactionStore.java,205,return null;
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,451,while (result && tokenizer.hasMoreTokens()) {
activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java,462,boolean result = true;
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,491,topicName = mqttTopicMap.get(message.getJMSDestination());
activemq-mqtt/src/main/java/org/apache/activemq/transport/mqtt/MQTTProtocolConverter.java,494,mqttTopicMap.put(message.getJMSDestination(), topicName);
activemq-client/src/main/java/org/apache/activemq/transport/failover/FailoverTransport.java,251,LOG.warn("Transport (" + transport.getRemoteAddress() + ") failed, reason:  " + e
activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java,175,diskBoundLocation = -1;
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,743,serialExecutor.execute(new Runnable() {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,745,public void run() {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,746,try {
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,747,localBroker.oneway(destInfo);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,749,LOG.warn("failed to deliver remove command for destination: {}", destInfo.getDestination(), e);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,754,localBroker.oneway(destInfo);
activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java,852,protected void addSubscription(DemandSubscription sub) throws IOException {
